/*! decentraland-ecs@6.4.2 */!function(t,e){for(var n in e)t[n]=e[n]}(this,function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=30)}([function(t,e,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),p=n(8),u=n(16),c="__name__symbol_",l="__classId__symbol_",h="__component__id_",f=function(){function t(t,e,n){this.componentId=t,this.componentName=e,this.classId=n}return t=r([p.EventConstructor()],t)}();e.DisposableComponentCreated=f;var d=function(){function t(t){this.componentId=t}return t=r([p.EventConstructor()],t)}();e.DisposableComponentRemoved=d;var y=function(){function t(t,e){this.componentId=t,this.component=e}return t=r([p.EventConstructor()],t)}();function v(t,e){return function(n){if(n.isComponent)throw new TypeError("You cannot extend a component. Trying to extend "+n.originalClassName+" with: "+t);if("number"!=typeof e||isNaN(e))throw new Error("classId: "+e+" is an invalid integer");var o=n,r=function(){if(!v.engine)throw new Error("You need to set a DisposableComponent.engine before creating disposable components");var n=Array.prototype.slice.call(arguments),r=new(o.bind.apply(o,s([void 0],n))),i=a.newId("C");return Object.defineProperty(r,c,{enumerable:!1,writable:!1,configurable:!1,value:t}),Object.defineProperty(r,h,{enumerable:!1,writable:!1,configurable:!1,value:i}),void 0!==e&&Object.defineProperty(r,l,{enumerable:!1,writable:!1,configurable:!1,value:e}),v.engine&&v.engine.registerComponent(r),r};return void 0!==e&&(r[l]=e),r[c]=t,r.isComponent=!0,r.isDisposableComponent=!0,r.originalClassName=t,(r.prototype=n.prototype).constructor=n,r}}function m(t){if(!t)throw new TypeError(t+" is not a component.");if(t[h])return t[h];throw new TypeError(t+" is not a registered disposable component.")}e.DisposableComponentUpdated=y,e.Component=function(t,e){return function(n){if(n.isComponent)throw new TypeError("You cannot extend a component. Trying to extend "+n.originalClassName+" with: "+t);var o=n,r=function(){var n=Array.prototype.slice.call(arguments),r=new(o.bind.apply(o,s([void 0],n)));return Object.defineProperty(r,c,{enumerable:!1,writable:!1,configurable:!1,value:t}),void 0!==e&&Object.defineProperty(r,l,{enumerable:!1,writable:!1,configurable:!1,value:e}),r};return void 0!==e&&(r[l]=e),r[c]=t,r.isComponent=!0,r.originalClassName=t,(r.prototype=n.prototype).constructor=n,r}},e.DisposableComponent=v,function(t){t.engine=null}(v=e.DisposableComponent||(e.DisposableComponent={})),e.getComponentName=function(t){if(!t)throw new TypeError(t+" is not a component.");if(t[c])return t[c];throw new TypeError(t+" is not a registered component.")},e.getComponentClassId=function(t){if(!t)throw new TypeError(t+" is not a component.");if(t[l])return t[l];if(!t[c])throw new TypeError(t+" is not a registered component.");return null},e.getComponentId=m;var b=function(){function t(){this.dirty=!1,this.data={},this.subscriptions=[]}return t.component=function(t,e){if(delete t[e]){var n=e+"_"+Math.random();t[n]=void 0,Object.defineProperty(t,n,o(o({},Object.getOwnPropertyDescriptor(t,n)),{enumerable:!1})),Object.defineProperty(t,e.toString(),{get:function(){return this[n]},set:function(t){var o=this[n];if(this.data[e]=t?m(t):null,this[n]=t,t!==o){this.dirty=!0;for(var r=0;r<this.subscriptions.length;r++)this.subscriptions[r](e,t,o)}},enumerable:!0})}},t.field=function(t,e){delete t[e]&&Object.defineProperty(t,e.toString(),{get:function(){return this.data[e]},set:function(t){var n=this.data[e];if(this.data[e]=t,t!==n){this.dirty=!0;for(var o=0;o<this.subscriptions.length;o++)this.subscriptions[o](e,t,n)}},enumerable:!0})},t.uiValue=function(t,e){delete t[e]&&Object.defineProperty(t,e.toString(),{get:function(){return this.data[e].toString()},set:function(t){var n=this.data[e],o=new u.UIValue(t);if(this.data[e]=o,o!==n){this.dirty=!0;for(var r=0;r<this.subscriptions.length;r++)this.subscriptions[r](e,o,n)}},enumerable:!0})},t.readonly=function(t,e){delete t[e]&&Object.defineProperty(t,e.toString(),{get:function(){if(e in this.data==!1)throw new Error("The field "+e+" is uninitialized");return this.data[e]},set:function(t){if(e in this.data)throw new Error("The field "+e+" is readonly");this.data[e]=t,this.dirty=!0},enumerable:!0,configurable:!1})},t.prototype.onChange=function(t){return this.subscriptions.push(t),this},t.prototype.toJSON=function(){return this.data},t}();e.ObservableComponent=b,e.isDisposableComponent=function(t){return h in t}},function(t,e,n){"use strict";var o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s},r=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0});var i=0;e.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];"undefined"!=typeof dcl?dcl.log.apply(dcl,r(t)):console.log.apply(console,r(["DEBUG:"],t))},e.error=function(t,e){"undefined"!=typeof dcl?dcl.error(t,e):console.error("ERROR:",t,e)},e.newId=function(t){if(i++,0===t.length)throw new Error("newId(type: string): type cannot be empty");return t+i.toString(36)},e.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},e.buildArray=function(t,e){for(var n=[],o=0;o<t;++o)n.push(e());return n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.CW=0]="CW",t[t.CCW=1]="CCW"}(e.Orientation||(e.Orientation={})),function(t){t[t.LOCAL=0]="LOCAL",t[t.WORLD=1]="WORLD",t[t.BONE=2]="BONE"}(e.Space||(e.Space={})),e.ToGammaSpace=1/2.2,e.ToLinearSpace=2.2,e.Epsilon=1e-6,e.DEG2RAD=Math.PI/180,e.RAD2DEG=360/(2*Math.PI)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),r=n(2),i=n(10),s=n(6),a=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.z=n}return Object.defineProperty(t.prototype,"isNonUniform",{get:function(){var t=Math.abs(this.x),e=Math.abs(this.y);if(t!==e)return!0;var n=Math.abs(this.z);return t!==n||e!==n},enumerable:!0,configurable:!0}),t.Add=function(e,n){return new t(e.x,e.y,e.z).addInPlace(n)},t.GetClipFactor=function(e,n,o,r){var i=t.Dot(e,o)-r;return i/(i-(t.Dot(n,o)-r))},t.GetAngleBetweenVectors=function(e,n,r){var i=e.normalizeToRef(o.MathTmp.Vector3[1]),s=n.normalizeToRef(o.MathTmp.Vector3[2]),a=t.Dot(i,s),p=o.MathTmp.Vector3[3];return t.CrossToRef(i,s,p),t.Dot(p,r)>0?Math.acos(a):-Math.acos(a)},t.FromArray=function(e,n){return void 0===n&&(n=0),new t(e[n],e[n+1],e[n+2])},t.FromFloatArray=function(e,n){return t.FromArray(e,n)},t.FromArrayToRef=function(t,e,n){n.x=t[e],n.y=t[e+1],n.z=t[e+2]},t.FromFloatArrayToRef=function(e,n,o){return t.FromArrayToRef(e,n,o)},t.FromFloatsToRef=function(t,e,n,o){o.copyFromFloats(t,e,n)},t.Zero=function(){return new t(0,0,0)},t.One=function(){return new t(1,1,1)},t.Up=function(){return new t(0,1,0)},t.Down=function(){return new t(0,-1,0)},t.Forward=function(){return new t(0,0,1)},t.Backward=function(){return new t(0,0,-1)},t.Right=function(){return new t(1,0,0)},t.Left=function(){return new t(-1,0,0)},t.TransformCoordinates=function(e,n){var o=t.Zero();return t.TransformCoordinatesToRef(e,n,o),o},t.TransformCoordinatesToRef=function(e,n,o){return t.TransformCoordinatesFromFloatsToRef(e.x,e.y,e.z,n,o)},t.TransformCoordinatesFromFloatsToRef=function(t,e,n,o,r){var i=o.m,s=t*i[0]+e*i[4]+n*i[8]+i[12],a=t*i[1]+e*i[5]+n*i[9]+i[13],p=t*i[2]+e*i[6]+n*i[10]+i[14],u=1/(t*i[3]+e*i[7]+n*i[11]+i[15]);r.x=s*u,r.y=a*u,r.z=p*u},t.TransformNormal=function(e,n){var o=t.Zero();return t.TransformNormalToRef(e,n,o),o},t.TransformNormalToRef=function(t,e,n){this.TransformNormalFromFloatsToRef(t.x,t.y,t.z,e,n)},t.TransformNormalFromFloatsToRef=function(t,e,n,o,r){var i=o.m;r.x=t*i[0]+e*i[4]+n*i[8],r.y=t*i[1]+e*i[5]+n*i[9],r.z=t*i[2]+e*i[6]+n*i[10]},t.CatmullRom=function(e,n,o,r,i){var s=i*i,a=i*s;return new t(.5*(2*n.x+(-e.x+o.x)*i+(2*e.x-5*n.x+4*o.x-r.x)*s+(-e.x+3*n.x-3*o.x+r.x)*a),.5*(2*n.y+(-e.y+o.y)*i+(2*e.y-5*n.y+4*o.y-r.y)*s+(-e.y+3*n.y-3*o.y+r.y)*a),.5*(2*n.z+(-e.z+o.z)*i+(2*e.z-5*n.z+4*o.z-r.z)*s+(-e.z+3*n.z-3*o.z+r.z)*a))},t.Clamp=function(e,n,o){var r=new t;return t.ClampToRef(e,n,o,r),r},t.ClampToRef=function(t,e,n,o){var r=t.x;r=(r=r>n.x?n.x:r)<e.x?e.x:r;var i=t.y;i=(i=i>n.y?n.y:i)<e.y?e.y:i;var s=t.z;s=(s=s>n.z?n.z:s)<e.z?e.z:s,o.copyFromFloats(r,i,s)},t.Hermite=function(e,n,o,r,i){var s=i*i,a=i*s,p=2*a-3*s+1,u=-2*a+3*s,c=a-2*s+i,l=a-s;return new t(e.x*p+o.x*u+n.x*c+r.x*l,e.y*p+o.y*u+n.y*c+r.y*l,e.z*p+o.z*u+n.z*c+r.z*l)},t.Lerp=function(e,n,o){var r=new t(0,0,0);return t.LerpToRef(e,n,o,r),r},t.LerpToRef=function(t,e,n,o){o.x=t.x+(e.x-t.x)*n,o.y=t.y+(e.y-t.y)*n,o.z=t.z+(e.z-t.z)*n},t.Dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},t.Cross=function(e,n){var o=t.Zero();return t.CrossToRef(e,n,o),o},t.CrossToRef=function(t,e,n){var o=t.y*e.z-t.z*e.y,r=t.z*e.x-t.x*e.z,i=t.x*e.y-t.y*e.x;n.copyFromFloats(o,r,i)},t.Normalize=function(e){var n=t.Zero();return t.NormalizeToRef(e,n),n},t.NormalizeToRef=function(t,e){t.normalizeToRef(e)},t.Minimize=function(e,n){var o=new t(e.x,e.y,e.z);return o.minimizeInPlace(n),o},t.Maximize=function(e,n){var o=new t(e.x,e.y,e.z);return o.maximizeInPlace(n),o},t.Distance=function(e,n){return Math.sqrt(t.DistanceSquared(e,n))},t.DistanceSquared=function(t,e){var n=t.x-e.x,o=t.y-e.y,r=t.z-e.z;return n*n+o*o+r*r},t.Center=function(e,n){var o=t.Add(e,n);return o.scaleInPlace(.5),o},t.RotationFromAxis=function(e,n,o){var r=t.Zero();return t.RotationFromAxisToRef(e,n,o,r),r},t.RotationFromAxisToRef=function(t,e,n,r){var s=o.MathTmp.Quaternion[0];i.Quaternion.RotationQuaternionFromAxisToRef(t,e,n,s),r.copyFrom(s.eulerAngles)},t.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},t.prototype.getClassName=function(){return"Vector3"},t.prototype.getHashCode=function(){var t=this.x||0;return t=397*(t=397*t^(this.y||0))^(this.z||0)},t.prototype.asArray=function(){var t=[];return this.toArray(t,0),t},t.prototype.toArray=function(t,e){return void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,this},t.prototype.toQuaternion=function(){return i.Quaternion.Identity.setEuler(this.y,this.x,this.z)},t.prototype.addInPlace=function(t){return this.addInPlaceFromFloats(t.x,t.y,t.z)},t.prototype.addInPlaceFromFloats=function(t,e,n){return this.x+=t,this.y+=e,this.z+=n,this},t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y,this.z+e.z)},t.prototype.addToRef=function(t,e){return e.copyFromFloats(this.x+t.x,this.y+t.y,this.z+t.z)},t.prototype.subtractInPlace=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},t.prototype.subtract=function(e){return new t(this.x-e.x,this.y-e.y,this.z-e.z)},t.prototype.subtractToRef=function(t,e){return this.subtractFromFloatsToRef(t.x,t.y,t.z,e)},t.prototype.subtractFromFloats=function(e,n,o){return new t(this.x-e,this.y-n,this.z-o)},t.prototype.subtractFromFloatsToRef=function(t,e,n,o){return o.copyFromFloats(this.x-t,this.y-e,this.z-n)},t.prototype.applyMatrix4=function(t){this.applyMatrix4ToRef(t,this)},t.prototype.applyMatrix4ToRef=function(t,e){var n=this.x,o=this.y,r=this.z,i=t.m,s=1/(i[3]*n+i[7]*o+i[11]*r+i[15]);return e.x=(i[0]*n+i[4]*o+i[8]*r+i[12])*s,e.y=(i[1]*n+i[5]*o+i[9]*r+i[13])*s,e.z=(i[2]*n+i[6]*o+i[10]*r+i[14])*s,e},t.prototype.rotate=function(t){return this.rotateToRef(t,this)},t.prototype.rotateToRef=function(t,e){var n=this.x,o=this.y,r=this.z,i=t.x,s=t.y,a=t.z,p=t.w,u=p*n+s*r-a*o,c=p*o+a*n-i*r,l=p*r+i*o-s*n,h=-i*n-s*o-a*r;return e.x=u*p+h*-i+c*-a-l*-s,e.y=c*p+h*-s+l*-i-u*-a,e.z=l*p+h*-a+u*-s-c*-i,e},t.prototype.negate=function(){return new t(-this.x,-this.y,-this.z)},t.prototype.scaleInPlace=function(t){return this.x*=t,this.y*=t,this.z*=t,this},t.prototype.scale=function(e){return new t(this.x*e,this.y*e,this.z*e)},t.prototype.scaleToRef=function(t,e){return e.copyFromFloats(this.x*t,this.y*t,this.z*t)},t.prototype.scaleAndAddToRef=function(t,e){return e.addInPlaceFromFloats(this.x*t,this.y*t,this.z*t)},t.prototype.equals=function(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z},t.prototype.equalsWithEpsilon=function(t,e){return void 0===e&&(e=r.Epsilon),t&&s.Scalar.WithinEpsilon(this.x,t.x,e)&&s.Scalar.WithinEpsilon(this.y,t.y,e)&&s.Scalar.WithinEpsilon(this.z,t.z,e)},t.prototype.equalsToFloats=function(t,e,n){return this.x===t&&this.y===e&&this.z===n},t.prototype.multiplyInPlace=function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this},t.prototype.multiply=function(t){return this.multiplyByFloats(t.x,t.y,t.z)},t.prototype.multiplyToRef=function(t,e){return e.copyFromFloats(this.x*t.x,this.y*t.y,this.z*t.z)},t.prototype.multiplyByFloats=function(e,n,o){return new t(this.x*e,this.y*n,this.z*o)},t.prototype.divide=function(e){return new t(this.x/e.x,this.y/e.y,this.z/e.z)},t.prototype.divideToRef=function(t,e){return e.copyFromFloats(this.x/t.x,this.y/t.y,this.z/t.z)},t.prototype.divideInPlace=function(t){return this.divideToRef(t,this)},t.prototype.minimizeInPlace=function(t){return this.minimizeInPlaceFromFloats(t.x,t.y,t.z)},t.prototype.maximizeInPlace=function(t){return this.maximizeInPlaceFromFloats(t.x,t.y,t.z)},t.prototype.minimizeInPlaceFromFloats=function(t,e,n){return t<this.x&&(this.x=t),e<this.y&&(this.y=e),n<this.z&&(this.z=n),this},t.prototype.maximizeInPlaceFromFloats=function(t,e,n){return t>this.x&&(this.x=t),e>this.y&&(this.y=e),n>this.z&&(this.z=n),this},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z))},t.prototype.fract=function(){return new t(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z))},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},t.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z},t.prototype.normalize=function(){return this.normalizeFromLength(this.length())},t.prototype.normalizeFromLength=function(t){return 0===t||1===t?this:this.scaleInPlace(1/t)},t.prototype.normalizeToNew=function(){var e=new t(0,0,0);return this.normalizeToRef(e),e},t.prototype.normalizeToRef=function(t){var e=this.length();return 0===e||1===e?t.copyFromFloats(this.x,this.y,this.z):this.scaleToRef(1/e,t)},t.prototype.clone=function(){return new t(this.x,this.y,this.z)},t.prototype.copyFrom=function(t){return this.copyFromFloats(t.x,t.y,t.z)},t.prototype.copyFromFloats=function(t,e,n){return this.x=t,this.y=e,this.z=n,this},t.prototype.set=function(t,e,n){return this.copyFromFloats(t,e,n)},t.prototype.setAll=function(t){return this.x=this.y=this.z=t,this},t}();e.Vector3=a},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},s=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var a,p=n(0),u=n(5),c=n(25),l=n(1);!function(t){t[t.TRANSFORM=1]="TRANSFORM",t[t.UUID_CALLBACK=8]="UUID_CALLBACK",t[t.BOX_SHAPE=16]="BOX_SHAPE",t[t.SPHERE_SHAPE=17]="SPHERE_SHAPE",t[t.PLANE_SHAPE=18]="PLANE_SHAPE",t[t.CONE_SHAPE=19]="CONE_SHAPE",t[t.CYLINDER_SHAPE=20]="CYLINDER_SHAPE",t[t.TEXT_SHAPE=21]="TEXT_SHAPE",t[t.NFT_SHAPE=22]="NFT_SHAPE",t[t.UI_WORLD_SPACE_SHAPE=23]="UI_WORLD_SPACE_SHAPE",t[t.UI_SCREEN_SPACE_SHAPE=24]="UI_SCREEN_SPACE_SHAPE",t[t.UI_CONTAINER_RECT=25]="UI_CONTAINER_RECT",t[t.UI_CONTAINER_STACK=26]="UI_CONTAINER_STACK",t[t.UI_TEXT_SHAPE=27]="UI_TEXT_SHAPE",t[t.UI_INPUT_TEXT_SHAPE=28]="UI_INPUT_TEXT_SHAPE",t[t.UI_IMAGE_SHAPE=29]="UI_IMAGE_SHAPE",t[t.UI_SLIDER_SHAPE=30]="UI_SLIDER_SHAPE",t[t.CIRCLE_SHAPE=31]="CIRCLE_SHAPE",t[t.BILLBOARD=32]="BILLBOARD",t[t.ANIMATION=33]="ANIMATION",t[t.UI_FULLSCREEN_SHAPE=40]="UI_FULLSCREEN_SHAPE",t[t.UI_BUTTON_SHAPE=41]="UI_BUTTON_SHAPE",t[t.GLTF_SHAPE=54]="GLTF_SHAPE",t[t.OBJ_SHAPE=55]="OBJ_SHAPE",t[t.AVATAR_SHAPE=56]="AVATAR_SHAPE",t[t.BASIC_MATERIAL=64]="BASIC_MATERIAL",t[t.PBR_MATERIAL=65]="PBR_MATERIAL",t[t.HIGHLIGHT_ENTITY=66]="HIGHLIGHT_ENTITY",t[t.SOUND=67]="SOUND",t[t.TEXTURE=68]="TEXTURE",t[t.AUDIO_CLIP=200]="AUDIO_CLIP",t[t.AUDIO_SOURCE=201]="AUDIO_SOURCE",t[t.GIZMOS=203]="GIZMOS"}(a=e.CLASS_ID||(e.CLASS_ID={}));var h=function(t){function e(e){void 0===e&&(e={});var n=t.call(this)||this;return n.position=e.position||u.Vector3.Zero(),n.rotation=e.rotation||u.Quaternion.Identity,n.scale=e.scale||new u.Vector3(1,1,1),n}return r(e,t),Object.defineProperty(e.prototype,"eulerAngles",{get:function(){return this.rotation.eulerAngles},enumerable:!0,configurable:!0}),e.prototype.lookAt=function(t,e){void 0===e&&(e=u.MathTmp.staticUp);var n=new u.Matrix;return u.Matrix.LookAtLHToRef(this.position,t,e,n),n.invert(),u.Quaternion.FromRotationMatrixToRef(n,this.rotation),this},e.prototype.rotate=function(t,e){return this.rotation.multiplyInPlace(this.rotation.angleAxis(e,t)),this},e.prototype.translate=function(t){return this.position.addInPlace(t),this},s([p.ObservableComponent.field],e.prototype,"position",void 0),s([p.ObservableComponent.field],e.prototype,"rotation",void 0),s([p.ObservableComponent.field],e.prototype,"scale",void 0),e=s([p.Component("engine.transform",a.TRANSFORM)],e)}(p.ObservableComponent);e.Transform=h;var f=function(t){function e(e,n,o){void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===o&&(o=!0);var r=t.call(this)||this;return r.x=!0,r.y=!0,r.z=!0,r.x=e,r.y=n,r.z=o,r}return r(e,t),s([p.ObservableComponent.field],e.prototype,"x",void 0),s([p.ObservableComponent.field],e.prototype,"y",void 0),s([p.ObservableComponent.field],e.prototype,"z",void 0),e=s([p.Component("engine.billboard",a.BILLBOARD)],e)}(p.ObservableComponent);e.Billboard=f;var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.withCollisions=!0,e.visible=!0,e}return r(e,t),s([p.ObservableComponent.field],e.prototype,"withCollisions",void 0),s([p.ObservableComponent.field],e.prototype,"visible",void 0),e}(p.ObservableComponent);e.Shape=d;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e=s([p.DisposableComponent("engine.shape",a.BOX_SHAPE)],e)}(d);e.BoxShape=y;var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e=s([p.DisposableComponent("engine.shape",a.SPHERE_SHAPE)],e)}(d);e.SphereShape=v;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),s([p.ObservableComponent.field],e.prototype,"segments",void 0),s([p.ObservableComponent.field],e.prototype,"arc",void 0),e=s([p.DisposableComponent("engine.shape",a.CIRCLE_SHAPE)],e)}(d);e.CircleShape=m;var b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.width=1,e.height=1,e}return r(e,t),s([p.ObservableComponent.field],e.prototype,"width",void 0),s([p.ObservableComponent.field],e.prototype,"height",void 0),s([p.ObservableComponent.field],e.prototype,"uvs",void 0),e=s([p.DisposableComponent("engine.shape",a.PLANE_SHAPE)],e)}(d);e.PlaneShape=b;var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.radiusTop=0,e.radiusBottom=1,e.segmentsHeight=1,e.segmentsRadial=36,e.openEnded=!1,e.radius=null,e.arc=360,e}return r(e,t),s([p.ObservableComponent.field],e.prototype,"radiusTop",void 0),s([p.ObservableComponent.field],e.prototype,"radiusBottom",void 0),s([p.ObservableComponent.field],e.prototype,"segmentsHeight",void 0),s([p.ObservableComponent.field],e.prototype,"segmentsRadial",void 0),s([p.ObservableComponent.field],e.prototype,"openEnded",void 0),s([p.ObservableComponent.field],e.prototype,"radius",void 0),s([p.ObservableComponent.field],e.prototype,"arc",void 0),e=s([p.DisposableComponent("engine.shape",a.CONE_SHAPE)],e)}(d);e.ConeShape=g;var _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.radiusTop=0,e.radiusBottom=1,e.segmentsHeight=1,e.segmentsRadial=36,e.openEnded=!1,e.radius=null,e.arc=360,e}return r(e,t),s([p.ObservableComponent.field],e.prototype,"radiusTop",void 0),s([p.ObservableComponent.field],e.prototype,"radiusBottom",void 0),s([p.ObservableComponent.field],e.prototype,"segmentsHeight",void 0),s([p.ObservableComponent.field],e.prototype,"segmentsRadial",void 0),s([p.ObservableComponent.field],e.prototype,"openEnded",void 0),s([p.ObservableComponent.field],e.prototype,"radius",void 0),s([p.ObservableComponent.field],e.prototype,"arc",void 0),e=s([p.DisposableComponent("engine.shape",a.CYLINDER_SHAPE)],e)}(d);e.CylinderShape=_;var C=function(t){function e(e){var n=t.call(this)||this;return n.src=e,n}return r(e,t),s([d.readonly],e.prototype,"src",void 0),e=s([p.DisposableComponent("engine.shape",a.GLTF_SHAPE)],e)}(d);e.GLTFShape=C;var x=function(t){function e(e,n){void 0===n&&(n=new u.Color3(.6404918,.611472,.8584906));var o=t.call(this)||this;return o.src=e,o.color=n,o}return r(e,t),s([d.readonly],e.prototype,"src",void 0),s([p.ObservableComponent.field],e.prototype,"color",void 0),e=s([p.DisposableComponent("engine.shape",a.NFT_SHAPE)],e)}(d);e.NFTShape=x;var w=function(t){function e(e,n){var o=t.call(this)||this;if(o.src=e,n)for(var r in n)o[r]=n[r];return o}return r(e,t),s([p.ObservableComponent.readonly],e.prototype,"src",void 0),s([p.ObservableComponent.readonly],e.prototype,"samplingMode",void 0),s([p.ObservableComponent.readonly],e.prototype,"wrap",void 0),s([p.ObservableComponent.readonly],e.prototype,"hasAlpha",void 0),e=s([p.DisposableComponent("engine.texture",a.TEXTURE)],e)}(p.ObservableComponent);e.Texture=w;var O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.states=[],e}return r(e,t),e.prototype.addClip=function(t){var e=this;return this.states.push(t),t.onChange(function(){e.dirty=!0}),this},e.prototype.getClip=function(t){for(var e=0;e<this.states.length;e++){var n=this.states[e];if(n.clip===t)return n}var o=new c.AnimationState(t);return this.addClip(o),o},s([p.ObservableComponent.readonly],e.prototype,"states",void 0),e=s([p.Component("engine.animator",a.ANIMATION)],e)}(d);e.Animator=O;var T=function(t){function e(e){var n=t.call(this)||this;return n.src=e,n}return r(e,t),s([p.ObservableComponent.readonly],e.prototype,"src",void 0),e=s([p.DisposableComponent("engine.shape",a.OBJ_SHAPE)],e)}(d);e.OBJShape=T;var R,A=function(t){function e(e){var n=t.call(this)||this;return n.outlineWidth=0,n.outlineColor=new u.Color3(1,1,1),n.color=new u.Color3(1,1,1),n.fontSize=10,n.fontWeight="normal",n.opacity=1,n.value="",n.lineSpacing="0px",n.lineCount=0,n.resizeToFit=!1,n.textWrapping=!1,n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowColor=new u.Color3(1,1,1),n.zIndex=0,n.hTextAlign="center",n.vTextAlign="center",n.width=1,n.height=1,n.paddingTop=0,n.paddingRight=0,n.paddingBottom=0,n.paddingLeft=0,n.isPickable=!1,n.billboard=!1,e&&(n.value=e),n}return r(e,t),s([p.ObservableComponent.field],e.prototype,"outlineWidth",void 0),s([p.ObservableComponent.field],e.prototype,"outlineColor",void 0),s([p.ObservableComponent.field],e.prototype,"color",void 0),s([p.ObservableComponent.field],e.prototype,"fontSize",void 0),s([p.ObservableComponent.field],e.prototype,"fontWeight",void 0),s([p.ObservableComponent.field],e.prototype,"opacity",void 0),s([p.ObservableComponent.field],e.prototype,"value",void 0),s([p.ObservableComponent.field],e.prototype,"lineSpacing",void 0),s([p.ObservableComponent.field],e.prototype,"lineCount",void 0),s([p.ObservableComponent.field],e.prototype,"resizeToFit",void 0),s([p.ObservableComponent.field],e.prototype,"textWrapping",void 0),s([p.ObservableComponent.field],e.prototype,"shadowBlur",void 0),s([p.ObservableComponent.field],e.prototype,"shadowOffsetX",void 0),s([p.ObservableComponent.field],e.prototype,"shadowOffsetY",void 0),s([p.ObservableComponent.field],e.prototype,"shadowColor",void 0),s([p.ObservableComponent.field],e.prototype,"zIndex",void 0),s([p.ObservableComponent.field],e.prototype,"hTextAlign",void 0),s([p.ObservableComponent.field],e.prototype,"vTextAlign",void 0),s([p.ObservableComponent.field],e.prototype,"width",void 0),s([p.ObservableComponent.field],e.prototype,"height",void 0),s([p.ObservableComponent.field],e.prototype,"paddingTop",void 0),s([p.ObservableComponent.field],e.prototype,"paddingRight",void 0),s([p.ObservableComponent.field],e.prototype,"paddingBottom",void 0),s([p.ObservableComponent.field],e.prototype,"paddingLeft",void 0),s([p.ObservableComponent.field],e.prototype,"isPickable",void 0),s([p.ObservableComponent.field],e.prototype,"billboard",void 0),e=s([p.Component("engine.text",a.TEXT_SHAPE)],e)}(d);e.TextShape=A,function(t){t[t.OPAQUE=0]="OPAQUE",t[t.ALPHA_TEST=1]="ALPHA_TEST",t[t.ALPHA_BLEND=2]="ALPHA_BLEND",t[t.ALPHA_TEST_AND_BLEND=3]="ALPHA_TEST_AND_BLEND",t[t.AUTO=4]="AUTO"}(R=e.TransparencyMode||(e.TransparencyMode={}));var E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.alphaTest=.5,e.transparencyMode=R.AUTO,e}return r(e,t),s([p.ObservableComponent.field],e.prototype,"alphaTest",void 0),s([p.ObservableComponent.field],e.prototype,"albedoColor",void 0),s([p.ObservableComponent.field],e.prototype,"emissiveColor",void 0),s([p.ObservableComponent.field],e.prototype,"metallic",void 0),s([p.ObservableComponent.field],e.prototype,"roughness",void 0),s([p.ObservableComponent.field],e.prototype,"ambientColor",void 0),s([p.ObservableComponent.field],e.prototype,"reflectionColor",void 0),s([p.ObservableComponent.field],e.prototype,"reflectivityColor",void 0),s([p.ObservableComponent.field],e.prototype,"directIntensity",void 0),s([p.ObservableComponent.field],e.prototype,"microSurface",void 0),s([p.ObservableComponent.field],e.prototype,"emissiveIntensity",void 0),s([p.ObservableComponent.field],e.prototype,"environmentIntensity",void 0),s([p.ObservableComponent.field],e.prototype,"specularIntensity",void 0),s([p.ObservableComponent.component],e.prototype,"albedoTexture",void 0),s([p.ObservableComponent.component],e.prototype,"alphaTexture",void 0),s([p.ObservableComponent.component],e.prototype,"emissiveTexture",void 0),s([p.ObservableComponent.component],e.prototype,"bumpTexture",void 0),s([p.ObservableComponent.component],e.prototype,"refractionTexture",void 0),s([p.ObservableComponent.field],e.prototype,"disableLighting",void 0),s([p.ObservableComponent.field],e.prototype,"transparencyMode",void 0),e=s([p.DisposableComponent("engine.material",a.PBR_MATERIAL)],e)}(p.ObservableComponent);e.Material=E;var P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.alphaTest=.5,e}return r(e,t),s([p.ObservableComponent.component],e.prototype,"texture",void 0),s([p.ObservableComponent.field],e.prototype,"alphaTest",void 0),e=s([p.DisposableComponent("engine.material",a.BASIC_MATERIAL)],e)}(p.ObservableComponent);e.BasicMaterial=P;var z=function(t){function e(e){var n=t.call(this)||this;if(n.uuid=l.newId("UUID"),!(e&&"apply"in e&&"call"in e))throw new Error("Callback is not a function");return n.callback=e,n}return r(e,t),e.uuidEvent=function(t,n){if(delete t[n]){var o=n+"_"+Math.random();t[o]=void 0,Object.defineProperty(t,o,i(i({},Object.getOwnPropertyDescriptor(t,o)),{enumerable:!1})),Object.defineProperty(t,n.toString(),{get:function(){return this[o]},set:function(t){var r=this[o];if(t){if(!(t instanceof e))throw new Error("value is not an OnUUIDEvent");this.data[n]=t.uuid}else this.data[n]=null;if(this[o]=t,t!==r){this.dirty=!0;for(var i=0;i<this.subscriptions.length;i++)this.subscriptions[i](n,t,r)}},enumerable:!0})}},e.prototype.toJSON=function(){return{uuid:this.uuid,type:this.type}},s([p.ObservableComponent.field],e.prototype,"callback",void 0),e}(p.ObservableComponent);e.OnUUIDEvent=z;var S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="onPointerLock",e}return r(e,t),s([p.ObservableComponent.readonly],e.prototype,"type",void 0),e=s([p.Component("engine.onPointerLock",a.UUID_CALLBACK)],e)}(z);e.OnPointerLock=S;var I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="onAnimationEnd",e}return r(e,t),s([p.ObservableComponent.readonly],e.prototype,"type",void 0),e=s([p.Component("engine.onAnimationEnd",a.UUID_CALLBACK)],e)}(z);e.OnAnimationEnd=I},function(t,e,n){"use strict";function o(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),o(n(2)),o(n(9)),o(n(21)),o(n(22)),o(n(33)),o(n(34)),o(n(35)),o(n(23)),o(n(36)),o(n(37)),o(n(11)),o(n(38)),o(n(39)),o(n(24)),o(n(10)),o(n(6)),o(n(40)),o(n(14)),o(n(3)),o(n(20)),o(n(5))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.WithinEpsilon=function(t,e,n){void 0===n&&(n=1401298e-51);var o=t-e;return-n<=o&&o<=n},t.ToHex=function(t){var e=t.toString(16);return t<=15?("0"+e).toUpperCase():e.toUpperCase()},t.Sign=function(t){var e=+t;return 0===e||isNaN(e)?e:e>0?1:-1},t.Clamp=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=1),Math.min(n,Math.max(e,t))},t.Log2=function(t){return Math.log(t)*Math.LOG2E},t.Repeat=function(t,e){return t-Math.floor(t/e)*e},t.Normalize=function(t,e,n){return(t-e)/(n-e)},t.Denormalize=function(t,e,n){return t*(n-e)+e},t.DeltaAngle=function(e,n){var o=t.Repeat(n-e,360);return o>180&&(o-=360),o},t.PingPong=function(e,n){var o=t.Repeat(e,2*n);return n-Math.abs(o-n)},t.SmoothStep=function(e,n,o){var r=t.Clamp(o);return n*(r=-2*r*r*r+3*r*r)+e*(1-r)},t.MoveTowards=function(e,n,o){return Math.abs(n-e)<=o?n:e+t.Sign(n-e)*o},t.MoveTowardsAngle=function(e,n,o){var r=t.DeltaAngle(e,n);return-o<r&&r<o?n:t.MoveTowards(e,e+r,o)},t.Lerp=function(t,e,n){return t+(e-t)*n},t.LerpAngle=function(e,n,o){var r=t.Repeat(n-e,360);return r>180&&(r-=360),e+r*t.Clamp(o)},t.InverseLerp=function(e,n,o){return e!==n?t.Clamp((o-e)/(n-e)):0},t.Hermite=function(t,e,n,o,r){var i=r*r,s=r*i;return t*(2*s-3*i+1)+n*(-2*s+3*i)+e*(s-2*i+r)+o*(s-i)},t.RandomRange=function(t,e){return t===e?t:Math.random()*(e-t)+t},t.RangeToPercent=function(t,e,n){return(t-e)/(n-e)},t.PercentToRange=function(t,e,n){return(n-e)*t+e},t.NormalizeRadians=function(e){return e-t.TwoPi*Math.floor((e+Math.PI)/t.TwoPi)},t.TwoPi=2*Math.PI,t}();e.Scalar=o},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=function(){function t(t,e,n){this.entity=t,this.componentName=e,this.component=n}return t=o([r.EventConstructor()],t)}();e.ComponentRemoved=i;var s=function(){function t(t,e,n){this.entity=t,this.componentName=e,this.classId=n}return t=o([r.EventConstructor()],t)}();e.ComponentAdded=s;var a=function(){function t(t,e){this.entity=t,this.parent=e}return t=o([r.EventConstructor()],t)}();e.ParentChanged=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),r="__event_name__",i=[];function s(t){if(!(r in t)||"string"!=typeof t[r])throw new Error("The EventConstructor is not registered");return t[r]}var a=function(){function t(){this.listeners={}}return t.prototype.addListener=function(t,e,n){if(!t||"function"!=typeof t)throw new Error("Invalid EventConstructor");var o=s(t),r=this.listeners[o];r||(r=this.listeners[o]=[]);for(var i=0;i<r.length;i++){if(r[i].listener===e)throw new Error("The provided listener is already registered")}return r.push({listener:e,fn:n}),this},t.prototype.removeListener=function(t,e){if(!e||"function"!=typeof e)throw new Error("Invalid EventConstructor");var n=s(e),o=this.listeners[n];if(!o)return!1;for(var r=0;r<o.length;r++){if(o[r].listener===t)return o.splice(r,1),!0}return!1},t.prototype.fireEvent=function(t){var e=s(t.constructor),n=this.listeners[e];if(n)for(var r=0;r<n.length;r++)try{var i=n[r];i.fn.call(i.listener,t)}catch(t){o.error(t)}return this},t}();e.EventManager=a,e.EventConstructor=function(){var t=o.newId("EV");if(-1!==i.indexOf(t))throw new Error("The event name "+t+" is already taken");return i.push(t),function(e){return e[r]=t,e}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),r=n(3),i=n(10),s=n(11);e.MathTmp={Vector3:o.buildArray(6,r.Vector3.Zero),Matrix:o.buildArray(2,s.Matrix.Identity),Quaternion:o.buildArray(3,i.Quaternion.Zero),staticUp:r.Vector3.Up(),tmpMatrix:s.Matrix.Zero()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(11),r=n(3),i=n(9),s=n(2),a=function(){function t(t,e,n,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o=1),this.x=t,this.y=e,this.z=n,this.w=o}return t.FromRotationMatrix=function(e){var n=new t;return t.FromRotationMatrixToRef(e,n),n},t.FromRotationMatrixToRef=function(t,e){var n,o=t.m,r=o[0],i=o[4],s=o[8],a=o[1],p=o[5],u=o[9],c=o[2],l=o[6],h=o[10],f=r+p+h;f>0?(n=.5/Math.sqrt(f+1),e.w=.25/n,e.x=(l-u)*n,e.y=(s-c)*n,e.z=(a-i)*n):r>p&&r>h?(n=2*Math.sqrt(1+r-p-h),e.w=(l-u)/n,e.x=.25*n,e.y=(i+a)/n,e.z=(s+c)/n):p>h?(n=2*Math.sqrt(1+p-r-h),e.w=(s-c)/n,e.x=(i+a)/n,e.y=.25*n,e.z=(u+l)/n):(n=2*Math.sqrt(1+h-r-p),e.w=(a-i)/n,e.x=(s+c)/n,e.y=(u+l)/n,e.z=.25*n)},t.Dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w},t.AreClose=function(e,n){return t.Dot(e,n)>=0},t.Zero=function(){return new t(0,0,0,0)},t.Inverse=function(e){return new t(-e.x,-e.y,-e.z,e.w)},t.IsIdentity=function(t){return t&&0===t.x&&0===t.y&&0===t.z&&1===t.w},t.RotationAxis=function(e,n){var o=n*s.DEG2RAD;return t.RotationAxisToRef(e,o,new t)},t.RotationAxisToRef=function(t,e,n){var o=e*s.DEG2RAD,r=Math.sin(o/2);return t.normalize(),n.w=Math.cos(o/2),n.x=t.x*r,n.y=t.y*r,n.z=t.z*r,n},t.FromArray=function(e,n){return void 0===n&&(n=0),new t(e[n],e[n+1],e[n+2],e[n+3])},t.FromEulerAnglesRef=function(e,n,o,r){return t.RotationYawPitchRollToRef(n*s.DEG2RAD,e*s.DEG2RAD,o*s.DEG2RAD,r)},t.RotationYawPitchRoll=function(e,n,o){var r=new t;return t.RotationYawPitchRollToRef(e,n,o,r),r},t.RotationYawPitchRollToRef=function(t,e,n,o){var r=.5*n,i=.5*e,s=.5*t,a=Math.cos(i),p=Math.cos(s),u=Math.cos(r),c=Math.sin(i),l=Math.sin(s),h=Math.sin(r);o.x=c*p*u+a*l*h,o.y=a*l*u-c*p*h,o.z=a*p*h+c*l*u,o.w=a*p*u-c*l*h},t.RotationAlphaBetaGamma=function(e,n,o){var r=new t;return t.RotationAlphaBetaGammaToRef(e,n,o,r),r},t.RotationAlphaBetaGammaToRef=function(t,e,n,o){var r=.5*(n+t),i=.5*(n-t),s=.5*e;o.x=Math.cos(i)*Math.sin(s),o.y=Math.sin(i)*Math.sin(s),o.z=Math.sin(r)*Math.cos(s),o.w=Math.cos(r)*Math.cos(s)},t.RotationQuaternionFromAxis=function(e,n,o){var r=new t(0,0,0,0);return t.RotationQuaternionFromAxisToRef(e,n,o,r),r},t.RotationQuaternionFromAxisToRef=function(e,n,r,s){var a=i.MathTmp.Matrix[0];o.Matrix.FromXYZAxesToRef(e.normalize(),n.normalize(),r.normalize(),a),t.FromRotationMatrixToRef(a,s)},t.Slerp=function(e,n,o){var r=t.Identity;return t.SlerpToRef(e,n,o,r),r},t.SlerpToRef=function(t,e,n,o){var r,i,s=t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w,a=!1;if(s<0&&(a=!0,s=-s),s>.999999)i=1-n,r=a?-n:n;else{var p=Math.acos(s),u=1/Math.sin(p);i=Math.sin((1-n)*p)*u,r=a?-Math.sin(n*p)*u:Math.sin(n*p)*u}o.x=i*t.x+r*e.x,o.y=i*t.y+r*e.y,o.z=i*t.z+r*e.z,o.w=i*t.w+r*e.w},t.Hermite=function(e,n,o,r,i){var s=i*i,a=i*s,p=2*a-3*s+1,u=-2*a+3*s,c=a-2*s+i,l=a-s;return new t(e.x*p+o.x*u+n.x*c+r.x*l,e.y*p+o.y*u+n.y*c+r.y*l,e.z*p+o.z*u+n.z*c+r.z*l,e.w*p+o.w*u+n.w*c+r.w*l)},Object.defineProperty(t,"Identity",{get:function(){return new t(0,0,0,1)},enumerable:!0,configurable:!0}),t.Angle=function(e,n){var o=t.Dot(e,n);return 2*Math.acos(Math.min(Math.abs(o),1))*s.RAD2DEG},t.Euler=function(e,n,o){return t.RotationYawPitchRoll(n*s.DEG2RAD,e*s.DEG2RAD,o*s.DEG2RAD)},t.LookRotation=function(e,n){void 0===n&&(n=i.MathTmp.staticUp);var o=r.Vector3.Normalize(e),s=r.Vector3.Normalize(r.Vector3.Cross(n,o)),a=r.Vector3.Cross(o,s),p=s.x,u=s.y,c=s.z,l=a.x,h=a.y,f=a.z,d=o.x,y=o.y,v=o.z,m=p+h+v,b=new t;if(m>0){var g=Math.sqrt(m+1);return b.w=.5*g,g=.5/g,b.x=(f-y)*g,b.y=(d-c)*g,b.z=(u-l)*g,b}if(p>=h&&p>=v){var _=Math.sqrt(1+p-h-v),C=.5/_;return b.x=.5*_,b.y=(u+l)*C,b.z=(c+d)*C,b.w=(f-y)*C,b}if(h>v){var x=Math.sqrt(1+h-p-v),w=.5/x;return b.x=(l+u)*w,b.y=.5*x,b.z=(y+f)*w,b.w=(d-c)*w,b}var O=Math.sqrt(1+v-p-h),T=.5/O;return b.x=(d+c)*T,b.y=(y+f)*T,b.z=.5*O,b.w=(u-l)*T,b},t.RotateTowards=function(e,n,o){var r=t.Angle(e,n);if(0===r)return n;var i=Math.min(1,o/r);return t.Slerp(e,n,i)},t.FromToRotation=function(e,n){var o=new t,i=e.normalize(),a=n.normalize(),p=r.Vector3.Dot(i,a);if(p>-1+s.Epsilon){var u=Math.sqrt(2*(1+p)),c=1/u,l=r.Vector3.Cross(i,a).scaleInPlace(c);o.set(l.x,l.y,l.z,.5*u)}else{if(p>1-s.Epsilon)return new t(0,0,0,1);var h=r.Vector3.Cross(r.Vector3.Right(),i);h.lengthSquared()<s.Epsilon&&(h=r.Vector3.Cross(r.Vector3.Forward(),i)),o.set(h.x,h.y,h.z,0)}return o.normalize()},Object.defineProperty(t.prototype,"normalized",{get:function(){return this.normalize()},enumerable:!0,configurable:!0}),t.prototype.setFromToRotation=function(e,n,r){void 0===r&&(r=i.MathTmp.staticUp),i.MathTmp.tmpMatrix=o.Matrix.Zero(),o.Matrix.LookAtLHToRef(e,n,r,i.MathTmp.tmpMatrix),i.MathTmp.tmpMatrix.invert(),t.FromRotationMatrixToRef(i.MathTmp.tmpMatrix,this)},Object.defineProperty(t.prototype,"eulerAngles",{get:function(){var t=new r.Vector3,e=new o.Matrix;this.toRotationMatrix(e);var n=o.Matrix.GetAsMatrix3x3(e);return t.y=s.RAD2DEG*Math.asin(Math.max(-1,Math.min(1,n[6]))),Math.abs(n[6])<.99999?(t.x=s.RAD2DEG*Math.atan2(-n[7],n[8]),t.z=s.RAD2DEG*Math.atan2(-n[3],n[0])):(t.x=s.RAD2DEG*Math.atan2(n[5],n[4]),t.z=0),t},set:function(t){this.setEuler(t.x,t.y,t.z)},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},Object.defineProperty(t.prototype,"length",{get:function(){return Math.sqrt(this.lengthSquared)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lengthSquared",{get:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return"Quaternion"},t.prototype.getHashCode=function(){var t=this.x||0;return t=397*(t=397*(t=397*t^(this.y||0))^(this.z||0))^(this.w||0)},t.prototype.asArray=function(){return[this.x,this.y,this.z,this.w]},t.prototype.equals=function(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},t.prototype.clone=function(){return new t(this.x,this.y,this.z,this.w)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},t.prototype.copyFromFloats=function(t,e,n,o){return this.x=t,this.y=e,this.z=n,this.w=o,this},t.prototype.set=function(t,e,n,o){return this.copyFromFloats(t,e,n,o)},t.prototype.setEuler=function(e,n,o){return t.RotationYawPitchRollToRef(n*s.DEG2RAD,e*s.DEG2RAD,o*s.DEG2RAD,this),this},t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y,this.z+e.z,this.w+e.w)},t.prototype.addInPlace=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},t.prototype.subtract=function(e){return new t(this.x-e.x,this.y-e.y,this.z-e.z,this.w-e.w)},t.prototype.scale=function(e){return new t(this.x*e,this.y*e,this.z*e,this.w*e)},t.prototype.scaleToRef=function(t,e){return e.x=this.x*t,e.y=this.y*t,e.z=this.z*t,e.w=this.w*t,this},t.prototype.scaleInPlace=function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},t.prototype.scaleAndAddToRef=function(t,e){return e.x+=this.x*t,e.y+=this.y*t,e.z+=this.z*t,e.w+=this.w*t,this},t.prototype.multiply=function(e){var n=new t(0,0,0,1);return this.multiplyToRef(e,n),n},t.prototype.multiplyToRef=function(t,e){var n=this.x*t.w+this.y*t.z-this.z*t.y+this.w*t.x,o=-this.x*t.z+this.y*t.w+this.z*t.x+this.w*t.y,r=this.x*t.y-this.y*t.x+this.z*t.w+this.w*t.z,i=-this.x*t.x-this.y*t.y-this.z*t.z+this.w*t.w;return e.copyFromFloats(n,o,r,i),this},t.prototype.multiplyInPlace=function(t){return this.multiplyToRef(t,this),this},t.prototype.conjugateToRef=function(t){return t.copyFromFloats(-this.x,-this.y,-this.z,this.w),this},t.prototype.conjugateInPlace=function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},t.prototype.conjugate=function(){return new t(-this.x,-this.y,-this.z,this.w)},t.prototype.normalize=function(){var t=1/this.length;return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},t.prototype.angleAxis=function(e,n){if(0===n.lengthSquared())return t.Identity;var o=t.Identity,r=e*s.DEG2RAD;r*=.5;var i=n.normalize();return i=n.scaleInPlace(Math.sin(r)),o.x=i.x,o.y=i.y,o.z=i.z,o.w=Math.cos(r),o.normalize()},t.prototype.toRotationMatrix=function(t){return o.Matrix.FromQuaternionToRef(this,t),this},t.prototype.fromRotationMatrix=function(e){return t.FromRotationMatrixToRef(e,this),this},t}();e.Quaternion=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=n(10),i=n(9),s=n(20),a=function(){function t(){this._isIdentity=!1,this._isIdentityDirty=!0,this._isIdentity3x2=!0,this._isIdentity3x2Dirty=!0,this._m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this._updateIdentityStatus(!1)}return Object.defineProperty(t.prototype,"m",{get:function(){return this._m},enumerable:!0,configurable:!0}),Object.defineProperty(t,"IdentityReadOnly",{get:function(){return t._identityReadOnly},enumerable:!0,configurable:!0}),t.FromArray=function(e,n){void 0===n&&(n=0);var o=new t;return t.FromArrayToRef(e,n,o),o},t.FromArrayToRef=function(t,e,n){for(var o=0;o<16;o++)n._m[o]=t[o+e];n._markAsUpdated()},t.FromFloatArrayToRefScaled=function(t,e,n,o){for(var r=0;r<16;r++)o._m[r]=t[r+e]*n;o._markAsUpdated()},t.FromValuesToRef=function(t,e,n,o,r,i,s,a,p,u,c,l,h,f,d,y,v){var m=v._m;m[0]=t,m[1]=e,m[2]=n,m[3]=o,m[4]=r,m[5]=i,m[6]=s,m[7]=a,m[8]=p,m[9]=u,m[10]=c,m[11]=l,m[12]=h,m[13]=f,m[14]=d,m[15]=y,v._markAsUpdated()},t.FromValues=function(e,n,o,r,i,s,a,p,u,c,l,h,f,d,y,v){var m=new t,b=m._m;return b[0]=e,b[1]=n,b[2]=o,b[3]=r,b[4]=i,b[5]=s,b[6]=a,b[7]=p,b[8]=u,b[9]=c,b[10]=l,b[11]=h,b[12]=f,b[13]=d,b[14]=y,b[15]=v,m._markAsUpdated(),m},t.Compose=function(e,n,o){var r=new t;return t.ComposeToRef(e,n,o,r),r},t.ComposeToRef=function(e,n,o,r){t.ScalingToRef(e.x,e.y,e.z,i.MathTmp.Matrix[1]),n.toRotationMatrix(i.MathTmp.Matrix[0]),i.MathTmp.Matrix[1].multiplyToRef(i.MathTmp.Matrix[0],r),r.setTranslation(o)},t.Identity=function(){var e=t.FromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return e._updateIdentityStatus(!0),e},t.IdentityToRef=function(e){t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,e),e._updateIdentityStatus(!0)},t.Zero=function(){var e=t.FromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return e._updateIdentityStatus(!1),e},t.RotationX=function(e){var n=new t;return t.RotationXToRef(e,n),n},t.Invert=function(e){var n=new t;return e.invertToRef(n),n},t.RotationXToRef=function(e,n){var o=Math.sin(e),r=Math.cos(e);t.FromValuesToRef(1,0,0,0,0,r,o,0,0,-o,r,0,0,0,0,1,n),n._updateIdentityStatus(1===r&&0===o)},t.RotationY=function(e){var n=new t;return t.RotationYToRef(e,n),n},t.RotationYToRef=function(e,n){var o=Math.sin(e),r=Math.cos(e);t.FromValuesToRef(r,0,-o,0,0,1,0,0,o,0,r,0,0,0,0,1,n),n._updateIdentityStatus(1===r&&0===o)},t.RotationZ=function(e){var n=new t;return t.RotationZToRef(e,n),n},t.RotationZToRef=function(e,n){var o=Math.sin(e),r=Math.cos(e);t.FromValuesToRef(r,o,0,0,-o,r,0,0,0,0,1,0,0,0,0,1,n),n._updateIdentityStatus(1===r&&0===o)},t.RotationAxis=function(e,n){var o=new t;return t.RotationAxisToRef(e,n,o),o},t.RotationAxisToRef=function(t,e,n){var o=Math.sin(-e),r=Math.cos(-e),i=1-r;t.normalize();var s=n._m;s[0]=t.x*t.x*i+r,s[1]=t.x*t.y*i-t.z*o,s[2]=t.x*t.z*i+t.y*o,s[3]=0,s[4]=t.y*t.x*i+t.z*o,s[5]=t.y*t.y*i+r,s[6]=t.y*t.z*i-t.x*o,s[7]=0,s[8]=t.z*t.x*i-t.y*o,s[9]=t.z*t.y*i+t.x*o,s[10]=t.z*t.z*i+r,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,n._markAsUpdated()},t.RotationYawPitchRoll=function(e,n,o){var r=new t;return t.RotationYawPitchRollToRef(e,n,o,r),r},t.RotationYawPitchRollToRef=function(t,e,n,o){r.Quaternion.RotationYawPitchRollToRef(t,e,n,i.MathTmp.Quaternion[0]),i.MathTmp.Quaternion[0].toRotationMatrix(o)},t.Scaling=function(e,n,o){var r=new t;return t.ScalingToRef(e,n,o,r),r},t.ScalingToRef=function(e,n,o,r){t.FromValuesToRef(e,0,0,0,0,n,0,0,0,0,o,0,0,0,0,1,r),r._updateIdentityStatus(1===e&&1===n&&1===o)},t.Translation=function(e,n,o){var r=new t;return t.TranslationToRef(e,n,o,r),r},t.TranslationToRef=function(e,n,o,r){t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,e,n,o,1,r),r._updateIdentityStatus(0===e&&0===n&&0===o)},t.Lerp=function(e,n,o){var r=new t;return t.LerpToRef(e,n,o,r),r},t.LerpToRef=function(t,e,n,o){for(var r=0;r<16;r++)o._m[r]=t._m[r]*(1-n)+e._m[r]*n;o._markAsUpdated()},t.DecomposeLerp=function(e,n,o){var r=new t;return t.DecomposeLerpToRef(e,n,o,r),r},t.DecomposeLerpToRef=function(e,n,s,a){var p=i.MathTmp.Vector3[0],u=i.MathTmp.Quaternion[0],c=i.MathTmp.Vector3[1];e.decompose(p,u,c);var l=i.MathTmp.Vector3[2],h=i.MathTmp.Quaternion[1],f=i.MathTmp.Vector3[3];n.decompose(l,h,f);var d=i.MathTmp.Vector3[4];o.Vector3.LerpToRef(p,l,s,d);var y=i.MathTmp.Quaternion[2];r.Quaternion.SlerpToRef(u,h,s,y);var v=i.MathTmp.Vector3[5];o.Vector3.LerpToRef(c,f,s,v),t.ComposeToRef(d,y,v,a)},t.LookAtLH=function(e,n,o){var r=new t;return t.LookAtLHToRef(e,n,o,r),r},t.LookAtLHToRef=function(e,n,r,s){var a=i.MathTmp.Vector3[0],p=i.MathTmp.Vector3[1],u=i.MathTmp.Vector3[2];n.subtractToRef(e,u),u.normalize(),o.Vector3.CrossToRef(r,u,a);var c=a.lengthSquared();0===c?a.x=1:a.normalizeFromLength(Math.sqrt(c)),o.Vector3.CrossToRef(u,a,p),p.normalize();var l=-o.Vector3.Dot(a,e),h=-o.Vector3.Dot(p,e),f=-o.Vector3.Dot(u,e);t.FromValuesToRef(a.x,p.x,u.x,0,a.y,p.y,u.y,0,a.z,p.z,u.z,0,l,h,f,1,s)},t.LookAtRH=function(e,n,o){var r=new t;return t.LookAtRHToRef(e,n,o,r),r},t.LookAtRHToRef=function(e,n,r,s){var a=i.MathTmp.Vector3[0],p=i.MathTmp.Vector3[1],u=i.MathTmp.Vector3[2];e.subtractToRef(n,u),u.normalize(),o.Vector3.CrossToRef(r,u,a);var c=a.lengthSquared();0===c?a.x=1:a.normalizeFromLength(Math.sqrt(c)),o.Vector3.CrossToRef(u,a,p),p.normalize();var l=-o.Vector3.Dot(a,e),h=-o.Vector3.Dot(p,e),f=-o.Vector3.Dot(u,e);t.FromValuesToRef(a.x,p.x,u.x,0,a.y,p.y,u.y,0,a.z,p.z,u.z,0,l,h,f,1,s)},t.OrthoLH=function(e,n,o,r){var i=new t;return t.OrthoLHToRef(e,n,o,r,i),i},t.OrthoLHToRef=function(e,n,o,r,i){var s=2/e,a=2/n,p=2/(r-o),u=-(r+o)/(r-o);t.FromValuesToRef(s,0,0,0,0,a,0,0,0,0,p,0,0,0,u,1,i),i._updateIdentityStatus(1===s&&1===a&&1===p&&0===u)},t.OrthoOffCenterLH=function(e,n,o,r,i,s){var a=new t;return t.OrthoOffCenterLHToRef(e,n,o,r,i,s,a),a},t.OrthoOffCenterLHToRef=function(e,n,o,r,i,s,a){var p=2/(n-e),u=2/(r-o),c=2/(s-i),l=-(s+i)/(s-i),h=(e+n)/(e-n),f=(r+o)/(o-r);t.FromValuesToRef(p,0,0,0,0,u,0,0,0,0,c,0,h,f,l,1,a),a._markAsUpdated()},t.OrthoOffCenterRH=function(e,n,o,r,i,s){var a=new t;return t.OrthoOffCenterRHToRef(e,n,o,r,i,s,a),a},t.OrthoOffCenterRHToRef=function(e,n,o,r,i,s,a){t.OrthoOffCenterLHToRef(e,n,o,r,i,s,a),a._m[10]*=-1},t.PerspectiveLH=function(e,n,o,r){var i=new t,s=2*o/e,a=2*o/n,p=(r+o)/(r-o),u=-2*r*o/(r-o);return t.FromValuesToRef(s,0,0,0,0,a,0,0,0,0,p,1,0,0,u,0,i),i._updateIdentityStatus(!1),i},t.PerspectiveFovLH=function(e,n,o,r){var i=new t;return t.PerspectiveFovLHToRef(e,n,o,r,i),i},t.PerspectiveFovLHToRef=function(e,n,o,r,i,s){void 0===s&&(s=!0);var a=o,p=r,u=1/Math.tan(.5*e),c=s?u/n:u,l=s?u:u*n,h=(p+a)/(p-a),f=-2*p*a/(p-a);t.FromValuesToRef(c,0,0,0,0,l,0,0,0,0,h,1,0,0,f,0,i),i._updateIdentityStatus(!1)},t.PerspectiveFovRH=function(e,n,o,r){var i=new t;return t.PerspectiveFovRHToRef(e,n,o,r,i),i},t.PerspectiveFovRHToRef=function(e,n,o,r,i,s){void 0===s&&(s=!0);var a=o,p=r,u=1/Math.tan(.5*e),c=s?u/n:u,l=s?u:u*n,h=-(p+a)/(p-a),f=-2*p*a/(p-a);t.FromValuesToRef(c,0,0,0,0,l,0,0,0,0,h,-1,0,0,f,0,i),i._updateIdentityStatus(!1)},t.PerspectiveFovWebVRToRef=function(t,e,n,o,r){void 0===r&&(r=!1);var i=r?-1:1,s=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),p=Math.tan(t.leftDegrees*Math.PI/180),u=Math.tan(t.rightDegrees*Math.PI/180),c=2/(p+u),l=2/(s+a),h=o._m;h[0]=c,h[1]=h[2]=h[3]=h[4]=0,h[5]=l,h[6]=h[7]=0,h[8]=(p-u)*c*.5,h[9]=-(s-a)*l*.5,h[10]=-n/(e-n),h[11]=1*i,h[12]=h[13]=h[15]=0,h[14]=-2*n*e/(n-e),o._markAsUpdated()},t.GetAsMatrix2x2=function(t){return[t._m[0],t._m[1],t._m[4],t._m[5]]},t.GetAsMatrix3x3=function(t){return[t._m[0],t._m[1],t._m[2],t._m[4],t._m[5],t._m[6],t._m[8],t._m[9],t._m[10]]},t.Transpose=function(e){var n=new t;return t.TransposeToRef(e,n),n},t.TransposeToRef=function(t,e){var n=e._m,o=t._m;n[0]=o[0],n[1]=o[4],n[2]=o[8],n[3]=o[12],n[4]=o[1],n[5]=o[5],n[6]=o[9],n[7]=o[13],n[8]=o[2],n[9]=o[6],n[10]=o[10],n[11]=o[14],n[12]=o[3],n[13]=o[7],n[14]=o[11],n[15]=o[15],e._updateIdentityStatus(t._isIdentity,t._isIdentityDirty)},t.Reflection=function(e){var n=new t;return t.ReflectionToRef(e,n),n},t.ReflectionToRef=function(e,n){e.normalize();var o=e.normal.x,r=e.normal.y,i=e.normal.z,s=-2*o,a=-2*r,p=-2*i;t.FromValuesToRef(s*o+1,a*o,p*o,0,s*r,a*r+1,p*r,0,s*i,a*i,p*i+1,0,s*e.d,a*e.d,p*e.d,1,n)},t.FromXYZAxesToRef=function(e,n,o,r){t.FromValuesToRef(e.x,e.y,e.z,0,n.x,n.y,n.z,0,o.x,o.y,o.z,0,0,0,0,1,r)},t.FromQuaternionToRef=function(t,e){var n=t.x*t.x,o=t.y*t.y,r=t.z*t.z,i=t.x*t.y,s=t.z*t.w,a=t.z*t.x,p=t.y*t.w,u=t.y*t.z,c=t.x*t.w;e._m[0]=1-2*(o+r),e._m[1]=2*(i+s),e._m[2]=2*(a-p),e._m[3]=0,e._m[4]=2*(i-s),e._m[5]=1-2*(r+n),e._m[6]=2*(u+c),e._m[7]=0,e._m[8]=2*(a+p),e._m[9]=2*(u-c),e._m[10]=1-2*(o+n),e._m[11]=0,e._m[12]=0,e._m[13]=0,e._m[14]=0,e._m[15]=1,e._markAsUpdated()},t.prototype._markAsUpdated=function(){this.updateFlag=t._updateFlagSeed++,this._isIdentity=!1,this._isIdentity3x2=!1,this._isIdentityDirty=!0,this._isIdentity3x2Dirty=!0},t.prototype.isIdentity=function(){if(this._isIdentityDirty){this._isIdentityDirty=!1;var t=this._m;this._isIdentity=1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]}return this._isIdentity},t.prototype.isIdentityAs3x2=function(){return this._isIdentity3x2Dirty&&(this._isIdentity3x2Dirty=!1,1!==this._m[0]||1!==this._m[5]||1!==this._m[15]?this._isIdentity3x2=!1:0!==this._m[1]||0!==this._m[2]||0!==this._m[3]||0!==this._m[4]||0!==this._m[6]||0!==this._m[7]||0!==this._m[8]||0!==this._m[9]||0!==this._m[10]||0!==this._m[11]||0!==this._m[12]||0!==this._m[13]||0!==this._m[14]?this._isIdentity3x2=!1:this._isIdentity3x2=!0),this._isIdentity3x2},t.prototype.determinant=function(){if(!0===this._isIdentity)return 1;var t=this._m,e=t[0],n=t[1],o=t[2],r=t[3],i=t[4],s=t[5],a=t[6],p=t[7],u=t[8],c=t[9],l=t[10],h=t[11],f=t[12],d=t[13],y=t[14],v=t[15],m=l*v-y*h,b=c*v-d*h,g=c*y-d*l,_=u*v-f*h,C=u*y-l*f,x=u*d-f*c;return e*+(s*m-a*b+p*g)+n*-(i*m-a*_+p*C)+o*+(i*b-s*_+p*x)+r*-(i*g-s*C+a*x)},t.prototype.toArray=function(){return this._m},t.prototype.asArray=function(){return this._m},t.prototype.invert=function(){return this.invertToRef(this),this},t.prototype.reset=function(){return t.FromValuesToRef(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,this),this._updateIdentityStatus(!1),this},t.prototype.add=function(e){var n=new t;return this.addToRef(e,n),n},t.prototype.addToRef=function(t,e){for(var n=0;n<16;n++)e._m[n]=this._m[n]+t._m[n];return e._markAsUpdated(),this},t.prototype.addToSelf=function(t){for(var e=0;e<16;e++)this._m[e]+=t._m[e];return this._markAsUpdated(),this},t.prototype.invertToRef=function(e){if(!0===this._isIdentity)return t.IdentityToRef(e),this;var n=this._m,o=n[0],r=n[1],i=n[2],s=n[3],a=n[4],p=n[5],u=n[6],c=n[7],l=n[8],h=n[9],f=n[10],d=n[11],y=n[12],v=n[13],m=n[14],b=n[15],g=f*b-m*d,_=h*b-v*d,C=h*m-v*f,x=l*b-y*d,w=l*m-f*y,O=l*v-y*h,T=+(p*g-u*_+c*C),R=-(a*g-u*x+c*w),A=+(a*_-p*x+c*O),E=-(a*C-p*w+u*O),P=o*T+r*R+i*A+s*E;if(0===P)return e.copyFrom(this),this;var z=1/P,S=u*b-m*c,I=p*b-v*c,M=p*m-v*u,D=a*b-y*c,F=a*m-y*u,L=a*v-y*p,U=u*d-f*c,N=p*d-h*c,j=p*f-h*u,H=a*d-l*c,V=a*f-l*u,B=a*h-l*p,k=-(r*g-i*_+s*C),G=+(o*g-i*x+s*w),q=-(o*_-r*x+s*O),W=+(o*C-r*w+i*O),Y=+(r*S-i*I+s*M),X=-(o*S-i*D+s*F),Z=+(o*I-r*D+s*L),Q=-(o*M-r*F+i*L),J=-(r*U-i*N+s*j),K=+(o*U-i*H+s*V),$=-(o*N-r*H+s*B),tt=+(o*j-r*V+i*B);return t.FromValuesToRef(T*z,k*z,Y*z,J*z,R*z,G*z,X*z,K*z,A*z,q*z,Z*z,$*z,E*z,W*z,Q*z,tt*z,e),this},t.prototype.addAtIndex=function(t,e){return this._m[t]+=e,this._markAsUpdated(),this},t.prototype.multiplyAtIndex=function(t,e){return this._m[t]*=e,this._markAsUpdated(),this},t.prototype.setTranslationFromFloats=function(t,e,n){return this._m[12]=t,this._m[13]=e,this._m[14]=n,this._markAsUpdated(),this},t.prototype.setTranslation=function(t){return this.setTranslationFromFloats(t.x,t.y,t.z)},t.prototype.getTranslation=function(){return new o.Vector3(this._m[12],this._m[13],this._m[14])},t.prototype.getTranslationToRef=function(t){return t.x=this._m[12],t.y=this._m[13],t.z=this._m[14],this},t.prototype.removeRotationAndScaling=function(){var e=this.m;return t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,e[12],e[13],e[14],e[15],this),this._updateIdentityStatus(0===e[12]&&0===e[13]&&0===e[14]&&1===e[15]),this},t.prototype.multiply=function(e){var n=new t;return this.multiplyToRef(e,n),n},t.prototype.copyFrom=function(t){t.copyToArray(this._m);var e=t;return this._updateIdentityStatus(e._isIdentity,e._isIdentityDirty,e._isIdentity3x2,e._isIdentity3x2Dirty),this},t.prototype.copyToArray=function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)t[e+n]=this._m[n];return this},t.prototype.multiplyToRef=function(t,e){return this._isIdentity?(e.copyFrom(t),this):t._isIdentity?(e.copyFrom(this),this):(this.multiplyToArray(t,e._m,0),e._markAsUpdated(),this)},t.prototype.multiplyToArray=function(t,e,n){var o=this._m,r=t.m,i=o[0],s=o[1],a=o[2],p=o[3],u=o[4],c=o[5],l=o[6],h=o[7],f=o[8],d=o[9],y=o[10],v=o[11],m=o[12],b=o[13],g=o[14],_=o[15],C=r[0],x=r[1],w=r[2],O=r[3],T=r[4],R=r[5],A=r[6],E=r[7],P=r[8],z=r[9],S=r[10],I=r[11],M=r[12],D=r[13],F=r[14],L=r[15];return e[n]=i*C+s*T+a*P+p*M,e[n+1]=i*x+s*R+a*z+p*D,e[n+2]=i*w+s*A+a*S+p*F,e[n+3]=i*O+s*E+a*I+p*L,e[n+4]=u*C+c*T+l*P+h*M,e[n+5]=u*x+c*R+l*z+h*D,e[n+6]=u*w+c*A+l*S+h*F,e[n+7]=u*O+c*E+l*I+h*L,e[n+8]=f*C+d*T+y*P+v*M,e[n+9]=f*x+d*R+y*z+v*D,e[n+10]=f*w+d*A+y*S+v*F,e[n+11]=f*O+d*E+y*I+v*L,e[n+12]=m*C+b*T+g*P+_*M,e[n+13]=m*x+b*R+g*z+_*D,e[n+14]=m*w+b*A+g*S+_*F,e[n+15]=m*O+b*E+g*I+_*L,this},t.prototype.equals=function(t){var e=t;if(!e)return!1;if((this._isIdentity||e._isIdentity)&&!this._isIdentityDirty&&!e._isIdentityDirty)return this._isIdentity&&e._isIdentity;var n=this.m,o=e.m;return n[0]===o[0]&&n[1]===o[1]&&n[2]===o[2]&&n[3]===o[3]&&n[4]===o[4]&&n[5]===o[5]&&n[6]===o[6]&&n[7]===o[7]&&n[8]===o[8]&&n[9]===o[9]&&n[10]===o[10]&&n[11]===o[11]&&n[12]===o[12]&&n[13]===o[13]&&n[14]===o[14]&&n[15]===o[15]},t.prototype.clone=function(){var e=new t;return e.copyFrom(this),e},t.prototype.getClassName=function(){return"Matrix"},t.prototype.getHashCode=function(){for(var t=this._m[0]||0,e=1;e<16;e++)t=397*t^(this._m[e]||0);return t},t.prototype.decompose=function(e,n,o){if(this._isIdentity)return o&&o.setAll(0),e&&e.setAll(1),n&&n.copyFromFloats(0,0,0,1),!0;var s=this._m;o&&o.copyFromFloats(s[12],s[13],s[14]);var a=e||i.MathTmp.Vector3[0];if(a.x=Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]),a.y=Math.sqrt(s[4]*s[4]+s[5]*s[5]+s[6]*s[6]),a.z=Math.sqrt(s[8]*s[8]+s[9]*s[9]+s[10]*s[10]),this.determinant()<=0&&(a.y*=-1),0===a.x||0===a.y||0===a.z)return n&&n.copyFromFloats(0,0,0,1),!1;if(n){var p=1/a.x,u=1/a.y,c=1/a.z;t.FromValuesToRef(s[0]*p,s[1]*p,s[2]*p,0,s[4]*u,s[5]*u,s[6]*u,0,s[8]*c,s[9]*c,s[10]*c,0,0,0,0,1,i.MathTmp.Matrix[0]),r.Quaternion.FromRotationMatrixToRef(i.MathTmp.Matrix[0],n)}return!0},t.prototype.getRow=function(t){if(t<0||t>3)return null;var e=4*t;return new s.Vector4(this._m[e+0],this._m[e+1],this._m[e+2],this._m[e+3])},t.prototype.setRow=function(t,e){return this.setRowFromFloats(t,e.x,e.y,e.z,e.w)},t.prototype.transpose=function(){return t.Transpose(this)},t.prototype.transposeToRef=function(e){return t.TransposeToRef(this,e),this},t.prototype.setRowFromFloats=function(t,e,n,o,r){if(t<0||t>3)return this;var i=4*t;return this._m[i+0]=e,this._m[i+1]=n,this._m[i+2]=o,this._m[i+3]=r,this._markAsUpdated(),this},t.prototype.scale=function(e){var n=new t;return this.scaleToRef(e,n),n},t.prototype.scaleToRef=function(t,e){for(var n=0;n<16;n++)e._m[n]=this._m[n]*t;return e._markAsUpdated(),this},t.prototype.scaleAndAddToRef=function(t,e){for(var n=0;n<16;n++)e._m[n]+=this._m[n]*t;return e._markAsUpdated(),this},t.prototype.toNormalMatrix=function(e){var n=i.MathTmp.Matrix[0];this.invertToRef(n),n.transposeToRef(e);var o=e._m;t.FromValuesToRef(o[0],o[1],o[2],0,o[4],o[5],o[6],0,o[8],o[9],o[10],0,0,0,0,1,e)},t.prototype.getRotationMatrix=function(){var e=new t;return this.getRotationMatrixToRef(e),e},t.prototype.getRotationMatrixToRef=function(e){var n=i.MathTmp.Vector3[0];if(!this.decompose(n))return t.IdentityToRef(e),this;var o=this._m,r=1/n.x,s=1/n.y,a=1/n.z;return t.FromValuesToRef(o[0]*r,o[1]*r,o[2]*r,0,o[4]*s,o[5]*s,o[6]*s,0,o[8]*a,o[9]*a,o[10]*a,0,0,0,0,1,e),this},t.prototype.toggleModelMatrixHandInPlace=function(){var t=this._m;t[2]*=-1,t[6]*=-1,t[8]*=-1,t[9]*=-1,t[14]*=-1,this._markAsUpdated()},t.prototype.toggleProjectionMatrixHandInPlace=function(){var t=this._m;t[8]*=-1,t[9]*=-1,t[10]*=-1,t[11]*=-1,this._markAsUpdated()},t.prototype._updateIdentityStatus=function(e,n,o,r){void 0===n&&(n=!1),void 0===o&&(o=!1),void 0===r&&(r=!0),this.updateFlag=t._updateFlagSeed++,this._isIdentity=e,this._isIdentity3x2=e||o,this._isIdentityDirty=!this._isIdentity&&n,this._isIdentity3x2Dirty=!this._isIdentity3x2&&r},t._updateFlagSeed=0,t._identityReadOnly=t.Identity(),t}();e.Matrix=a},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=function(){function t(t,e){this.uuid=t,this.payload=e}return t=o([r.EventConstructor()],t)}();e.UUIDEvent=i;var s=function(){function t(t){this.payload=t}return t=o([r.EventConstructor()],t)}();e.RaycastResponse=s;var a=function(){function t(t){this.payload=t}return t=o([r.EventConstructor()],t)}();e.PointerEvent=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(12),r=n(4),i=n(7),s=n(26),a=n(28),p=function(){function t(){}return t.prototype.activate=function(t){t.eventManager.addListener(o.RaycastResponse,this,function(t){"HitFirst"===t.payload.queryType?a.PhysicsCast.instance.handleRaycastHitFirstResponse(t):"HitAll"===t.payload.queryType&&a.PhysicsCast.instance.handleRaycastHitAllResponse(t)}),"undefined"!=typeof dcl&&dcl.subscribe("raycastResponse")},t.prototype.deactivate=function(){"undefined"!=typeof dcl&&dcl.unsubscribe("raycastResponse")},t}();e.RaycastEventSystem=p,e.raycastEventSystem=new p;var u=function(){function t(){}return t.prototype.activate=function(t){t.eventManager.addListener(o.PointerEvent,this,function(t){s.Input.instance.handlePointerEvent(t.payload)}),"undefined"!=typeof dcl&&(dcl.subscribe("pointerUp"),dcl.subscribe("pointerDown"),dcl.subscribe("pointerEvent"))},t.prototype.deactivate=function(){"undefined"!=typeof dcl&&(dcl.unsubscribe("pointerUp"),dcl.unsubscribe("pointerDown"),dcl.unsubscribe("pointerEvent"))},t}();e.PointerEventSystem=u,e.pointerEventSystem=new u;var c=function(){function t(){this.handlerMap={}}return t.prototype.activate=function(t){t.eventManager.addListener(o.UUIDEvent,this,this.handleEvent),t.eventManager.addListener(i.ComponentAdded,this,this.componentAdded),t.eventManager.addListener(i.ComponentRemoved,this,this.componentRemoved),"undefined"!=typeof dcl&&dcl.subscribe("uuidEvent")},t.prototype.deactivate=function(){"undefined"!=typeof dcl&&dcl.unsubscribe("uuidEvent")},t.prototype.onAddEntity=function(t){for(var e in t.components){var n=t.components[e];n instanceof r.OnUUIDEvent&&(this.handlerMap[n.uuid]=n)}},t.prototype.onRemoveEntity=function(t){for(var e in t.components){var n=t.components[e];n instanceof r.OnUUIDEvent&&delete this.handlerMap[n.uuid]}},t.prototype.componentAdded=function(t){if(t.entity.isAddedToEngine()){var e=t.entity.components[t.componentName];e instanceof r.OnUUIDEvent&&(this.handlerMap[e.uuid]=e)}},t.prototype.componentRemoved=function(t){t.entity.isAddedToEngine()&&t.component instanceof r.OnUUIDEvent&&delete this.handlerMap[t.component.uuid]},t.prototype.handleEvent=function(t){if(t.uuid in this.handlerMap){var e=this.handlerMap[t.uuid];e&&e.callback&&"call"in e.callback&&e.callback(t.payload)}},t}();e.UUIDEventSystem=c,e.uuidEventSystem=new c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=n(6),i=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.Zero=function(){return new t(0,0)},t.One=function(){return new t(1,1)},t.Add=function(e,n){return new t(e.x,e.y).addInPlace(n)},t.FromArray=function(e,n){return void 0===n&&(n=0),new t(e[n],e[n+1])},t.FromArrayToRef=function(t,e,n){n.x=t[e],n.y=t[e+1]},t.CatmullRom=function(e,n,o,r,i){var s=i*i,a=i*s;return new t(.5*(2*n.x+(-e.x+o.x)*i+(2*e.x-5*n.x+4*o.x-r.x)*s+(-e.x+3*n.x-3*o.x+r.x)*a),.5*(2*n.y+(-e.y+o.y)*i+(2*e.y-5*n.y+4*o.y-r.y)*s+(-e.y+3*n.y-3*o.y+r.y)*a))},t.Clamp=function(e,n,o){var r=e.x;r=(r=r>o.x?o.x:r)<n.x?n.x:r;var i=e.y;return new t(r,i=(i=i>o.y?o.y:i)<n.y?n.y:i)},t.Hermite=function(e,n,o,r,i){var s=i*i,a=i*s,p=2*a-3*s+1,u=-2*a+3*s,c=a-2*s+i,l=a-s;return new t(e.x*p+o.x*u+n.x*c+r.x*l,e.y*p+o.y*u+n.y*c+r.y*l)},t.Lerp=function(e,n,o){return new t(e.x+(n.x-e.x)*o,e.y+(n.y-e.y)*o)},t.Dot=function(t,e){return t.x*e.x+t.y*e.y},t.Normalize=function(e){var n=new t(e.x,e.y);return n.normalize(),n},t.Minimize=function(e,n){return new t(e.x<n.x?e.x:n.x,e.y<n.y?e.y:n.y)},t.Maximize=function(e,n){return new t(e.x>n.x?e.x:n.x,e.y>n.y?e.y:n.y)},t.Transform=function(e,n){var o=t.Zero();return t.TransformToRef(e,n,o),o},t.TransformToRef=function(t,e,n){var o=e.m,r=t.x*o[0]+t.y*o[4]+o[12],i=t.x*o[1]+t.y*o[5]+o[13];n.x=r,n.y=i},t.PointInTriangle=function(t,e,n,o){var r=.5*(-n.y*o.x+e.y*(-n.x+o.x)+e.x*(n.y-o.y)+n.x*o.y),i=r<0?-1:1,s=(e.y*o.x-e.x*o.y+(o.y-e.y)*t.x+(e.x-o.x)*t.y)*i,a=(e.x*n.y-e.y*n.x+(e.y-n.y)*t.x+(n.x-e.x)*t.y)*i;return s>0&&a>0&&s+a<2*r*i},t.Distance=function(e,n){return Math.sqrt(t.DistanceSquared(e,n))},t.DistanceSquared=function(t,e){var n=t.x-e.x,o=t.y-e.y;return n*n+o*o},t.Center=function(e,n){var o=t.Add(e,n);return o.scaleInPlace(.5),o},t.DistanceOfPointFromSegment=function(e,n,o){var r=t.DistanceSquared(n,o);if(0===r)return t.Distance(e,n);var i=o.subtract(n),s=Math.max(0,Math.min(1,t.Dot(e.subtract(n),i)/r)),a=n.add(i.multiplyByFloats(s,s));return t.Distance(e,a)},t.prototype.toString=function(){return"{X: "+this.x+" Y:"+this.y+"}"},t.prototype.getClassName=function(){return"Vector2"},t.prototype.getHashCode=function(){var t=this.x||0;return t=397*t^(this.y||0)},t.prototype.toArray=function(t,e){return void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,this},t.prototype.asArray=function(){var t=new Array;return this.toArray(t,0),t},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.copyFromFloats=function(t,e){return this.x=t,this.y=e,this},t.prototype.set=function(t,e){return this.copyFromFloats(t,e)},t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.addToRef=function(t,e){return e.x=this.x+t.x,e.y=this.y+t.y,this},t.prototype.addInPlace=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.addVector3=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.subtract=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.subtractToRef=function(t,e){return e.x=this.x-t.x,e.y=this.y-t.y,this},t.prototype.subtractInPlace=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.multiplyInPlace=function(t){return this.x*=t.x,this.y*=t.y,this},t.prototype.multiply=function(e){return new t(this.x*e.x,this.y*e.y)},t.prototype.multiplyToRef=function(t,e){return e.x=this.x*t.x,e.y=this.y*t.y,this},t.prototype.multiplyByFloats=function(e,n){return new t(this.x*e,this.y*n)},t.prototype.divide=function(e){return new t(this.x/e.x,this.y/e.y)},t.prototype.divideToRef=function(t,e){return e.x=this.x/t.x,e.y=this.y/t.y,this},t.prototype.divideInPlace=function(t){return this.divideToRef(t,this)},t.prototype.negate=function(){return new t(-this.x,-this.y)},t.prototype.scaleInPlace=function(t){return this.x*=t,this.y*=t,this},t.prototype.scale=function(e){var n=new t(0,0);return this.scaleToRef(e,n),n},t.prototype.scaleToRef=function(t,e){return e.x=this.x*t,e.y=this.y*t,this},t.prototype.scaleAndAddToRef=function(t,e){return e.x+=this.x*t,e.y+=this.y*t,this},t.prototype.equals=function(t){return t&&this.x===t.x&&this.y===t.y},t.prototype.equalsWithEpsilon=function(t,e){return void 0===e&&(e=o.Epsilon),t&&r.Scalar.WithinEpsilon(this.x,t.x,e)&&r.Scalar.WithinEpsilon(this.y,t.y,e)},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y))},t.prototype.fract=function(){return new t(this.x-Math.floor(this.x),this.y-Math.floor(this.y))},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y},t.prototype.normalize=function(){var t=this.length();if(0===t)return this;var e=1/t;return this.x*=e,this.y*=e,this},t.prototype.clone=function(){return new t(this.x,this.y)},t}();e.Vector2=i},function(t,e,n){"use strict";var o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s},r=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),s=n(0),a=n(8),p=n(31),u=n(1),c=function(){function t(t){this.eventManager=new a.EventManager,this.systems=[],this.entityLists={},this.addedSystems=[],this._entities={},this._disposableComponents={},this._componentGroups={},this.simpleSystems=[],this.eventManager.addListener(i.ComponentAdded,this,this.componentAddedHandler),this.eventManager.addListener(i.ComponentRemoved,this,this.componentRemovedHandler),this.rootEntity=t}return Object.defineProperty(t.prototype,"entities",{get:function(){return this._entities},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disposableComponents",{get:function(){return this._disposableComponents},enumerable:!0,configurable:!0}),t.prototype.addEntity=function(t){var e=t.getParent();if(t.isAddedToEngine())return t;for(var n in t.eventManager=this.eventManager,t.engine=this,this._entities[t.uuid]=t,this.checkRequirementsAndAdd(t),e?e.isAddedToEngine()||e===this.rootEntity||u.log("Engine: warning, added an entity with a parent not present in the engine. Parent id: "+e.uuid):t.setParent(this.rootEntity),t.alive=!0,t.children){var o=t.children[n];o&&(o.isAddedToEngine()||this.addEntity(o))}return t},t.prototype.removeEntity=function(t){var e=t.uuid;if(t.isAddedToEngine()){for(var n in t.components){var o=this._componentGroups[n];if(o)for(var r in o)o[r].removeEntity(t);delete this.entityLists[n][e]}for(var i=0;i<this.simpleSystems.length;i++){var s=this.simpleSystems[i];s.onRemoveEntity&&s.onRemoveEntity(t)}for(var i in t.children){var a=t.children[i];a&&this.removeEntity(a)}return t.alive=!1,t.eventManager=null,delete this._entities[e],!0}for(var n in u.log("Engine: Trying to remove non existent entity from engine."),t.isAddedToEngine()?u.log("Engine: Entity id: "+e):u.log('Engine: Entity "'+t.uuid+'" has not been added to any engine yet.'),u.log("Engine: Entity's components:"),t.components)u.log(n);return!1},t.prototype.addSystem=function(t,e){if(void 0===e&&(e=0),-1!==this.addedSystems.indexOf(t))return u.log("Engine: Trying to add a system that is already added. Aborting"),t;if(this.systems.length>0)for(var n=0;n<this.systems.length;n++){var o=this.systems[n],r=n===this.systems.length-1;if(o.priority>e){this.addedSystems.push(t),this.systems.splice(n,0,{system:t,priority:e});break}if(r){this.addedSystems.push(t),this.systems.splice(n+1,0,{system:t,priority:e});break}}else this.addedSystems.push(t),this.systems.splice(1,0,{system:t,priority:e});return this.registerSystem(t),t},t.prototype.removeSystem=function(t){var e=this.addedSystems.indexOf(t);if(-1!==e){t.active=!1,t.deactivate&&t.deactivate(),this.addedSystems.splice(e,1);for(var n=0;n<this.systems.length;n++){this.systems[n].system===t&&this.systems.splice(n,1)}return!0}return!1},t.prototype.update=function(t){for(var e in this.systems){var n=this.systems[e].system;if(n.active&&n.update)try{n.update(t)}catch(t){u.error(t)}}return this},t.prototype.getEntitiesWithComponent=function(t){var e="string"==typeof t?t:s.getComponentName(t);return e in this.entityLists?this.entityLists[e]:this.entityLists[e]={}},t.prototype.registerComponent=function(t){var e=s.getComponentId(t),n=s.getComponentName(t),o=s.getComponentClassId(t);this._disposableComponents[e]=t,null!==o&&(this.eventManager.fireEvent(new s.DisposableComponentCreated(e,n,o)),this.eventManager.fireEvent(new s.DisposableComponentUpdated(e,t)))},t.prototype.disposeComponent=function(t){var e=s.getComponentId(t);return delete this._disposableComponents[e]&&(this.eventManager.fireEvent(new s.DisposableComponentRemoved(e)),t.onDispose&&t.onDispose(),!0)},t.prototype.updateComponent=function(t){this.eventManager.fireEvent(new s.DisposableComponentUpdated(s.getComponentId(t),t))},t.prototype.getComponentGroup=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=new(p.ComponentGroup.bind.apply(p.ComponentGroup,r([void 0],t)));n.active=!0;for(var o=n.requiresNames,i=0;i<o.length;i++){var s=o[i],a=this._componentGroups[s];a||(this._componentGroups[s]=a=[]),-1===a.indexOf(n)&&a.push(n)}for(var u in this._entities)this.checkRequirements(this._entities[u],n);return n},t.prototype.removeComponentGroup=function(t){if(t.active){t.active=!1;for(var e=t.requiresNames,n=0;n<e.length;n++){var o=e[n],r=this._componentGroups[o];if(r){var i=r.indexOf(t);-1!==i&&r.splice(i,1)}}return!0}return!1},t.prototype.registerSystem=function(t){t.active=!0,t.activate&&t.activate(this),this.simpleSystems.push(t)},t.prototype.checkRequirementsAndAdd=function(t){if(t.isAddedToEngine()){for(var e in t.components){e in this.entityLists||(this.entityLists[e]={}),this.entityLists[e][t.uuid]=t;var n=this._componentGroups[e];if(n)for(var o in n)this.checkRequirements(t,n[o])}for(var r=0;r<this.simpleSystems.length;r++){var i=this.simpleSystems[r];i.onAddEntity&&i.onAddEntity(t)}}},t.prototype.checkRequirements=function(t,e){e.meetsRequirements(t)?e.hasEntity(t)||e.addEntity(t):e.hasEntity(t)&&e.removeEntity(t)},t.prototype.componentAddedHandler=function(t){var e,n=t.entity,o=t.componentName;if(n.isAddedToEngine()){this.entityLists[o]?this.entityLists[o][n.uuid]=n:this.entityLists[o]=((e={})[n.uuid]=n,e);var r=this._componentGroups[o];if(r)for(var i in r)this.checkRequirements(n,r[i])}},t.prototype.componentRemovedHandler=function(t){var e=t.entity,n=t.componentName;if(e.isAddedToEngine()){delete this.entityLists[n][e.uuid];var o=this._componentGroups[n];if(o)for(var r in o)this.checkRequirements(e,o[r])}},t}();e.Engine=c},function(t,e,n){"use strict";var o;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.PERCENT=0]="PERCENT",t[t.PIXELS=1]="PIXELS"}(o=e.UIValueType||(e.UIValueType={}));var r=function(){function t(t){if(this.type=o.PIXELS,"string"==typeof t){var e=t;e.indexOf("px")>-1?this.type=o.PIXELS:e.indexOf("%")>-1&&(this.type=o.PERCENT),this.value=parseFloat(e)}else this.value=t}return t.prototype.toString=function(){var t=this.value.toString();return this.type===o.PERCENT?t+="%":t+="px",t},t}();e.UIValue=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(7),i=n(1),s=function(){function t(t){this.name=t,this.children={},this.eventManager=null,this.alive=!1,this.uuid=i.newId("E"),this.components={},this.engine=null,this._parent=null}return t.prototype.addComponentOrReplace=function(t){if("function"==typeof t)throw new Error("You passed a function or class as a component, an instance of component is expected");if("object"!=typeof t)throw new Error("You passed a "+typeof t+", an instance of component is expected");var e=o.getComponentName(t);if(this.components[e]){if(this.components[e]===t)return t;this.removeComponent(this.components[e],!1)}return this.addComponent(t)},t.prototype.hasComponent=function(t){var e=typeof t;if("string"!==e&&"object"!==e&&"function"!==e)throw new Error("Entity#has(component): component is not a class, name or instance");if(null==t)return!1;var n="string"===e?t:o.getComponentName(t),r=this.components[n];return!!r&&("object"===e?r===t:"function"!==e||r instanceof t)},t.prototype.getComponent=function(t){var e=typeof t;if("string"!==e&&"function"!==e)throw new Error("Entity#get(component): component is not a class or name");var n="string"===e?t:o.getComponentName(t),r=this.components[n];if(!r)throw new Error('Can not get component "'+n+'" from entity "'+this.identifier+'"');if("function"===e){if(r instanceof t)return r;throw new Error('Can not get component "'+n+'" from entity "'+this.identifier+'" (by instance)')}return r},t.prototype.getComponentOrNull=function(t){var e=typeof t;if("string"!==e&&"function"!==e)throw new Error("Entity#getOrNull(component): component is not a class or name");var n="string"===e?t:o.getComponentName(t),r=this.components[n];return r?"function"===e?r instanceof t?r:null:r:null},t.prototype.getComponentOrCreate=function(t){if("function"!=typeof t)throw new Error("Entity#getOrCreate(component): component is not a class");var e=this.getComponentOrNull(t);return e||(e=new t,o.getComponentName(e),this.addComponentOrReplace(e)),e},t.prototype.addComponent=function(t){if("object"!=typeof t)throw new Error("Entity#add(component): You passed a function or class as a component, an instance of component is expected");var e=o.getComponentName(t),n=o.getComponentClassId(t);if(this.components[e])throw new Error('A component of type "'+e+'" is already present in entity "'+this.identifier+'"');this.components[e]=t,this.eventManager&&this.eventManager.fireEvent(new r.ComponentAdded(this,e,n));var i=t;return"function"==typeof i.addedToEntity&&i.addedToEntity(this),t},t.prototype.removeComponent=function(t,e){void 0===e&&(e=!0);var n=typeof t;if("string"!==n&&"function"!==n&&"object"!==n)throw new Error("Entity#remove(component): component is not a class, class or name");var s="string"===n?t:o.getComponentName(t),a=this.components[s];if(a){if("function"===n)return a instanceof t?(delete this.components[s],void(a&&(e&&this.eventManager&&this.eventManager.fireEvent(new r.ComponentRemoved(this,s,a)),"function"==typeof a.removedFromEntity&&a.removedFromEntity(this)))):void i.log('Entity Warning: Trying to remove wrong (by constructor) component "'+s+'" from entity "'+this.identifier+'"');delete this.components[s],a&&(e&&this.eventManager&&this.eventManager.fireEvent(new r.ComponentRemoved(this,s,a)),"function"==typeof a.removedFromEntity&&a.removedFromEntity(this))}else i.log('Entity Warning: Trying to remove inexisting component "'+s+'" from entity "'+this.identifier+'"')},t.prototype.isAddedToEngine=function(){return!(!this.engine||!(this.uuid in this.engine.entities||this.engine.rootEntity===this))},t.prototype.setParent=function(t){var e=!t&&this.engine?this.engine.rootEntity:t,n=this.getParent();if(e===this)throw new Error('Failed to set parent for entity "'+this.identifier+"\": An entity can't set itself as a its own parent");if(e===n)return this;var o=this.getCircularAncestor(e);if(o)throw new Error('Failed to set parent for entity "'+this.identifier+'": Circular parent references are not allowed (See entity "'+o+'")');return n&&delete n.children[this.uuid],null!==e&&"0"!==e.uuid&&(!e.isAddedToEngine()&&this.isAddedToEngine()&&this.engine.removeEntity(this),e.isAddedToEngine()&&!this.isAddedToEngine()&&e.engine.addEntity(this)),this._parent=e||null,this.registerAsChild(),this.eventManager&&this.engine&&this.eventManager.fireEvent(new r.ParentChanged(this,e)),this},t.prototype.getParent=function(){return this._parent},Object.defineProperty(t.prototype,"identifier",{get:function(){return this.name||this.uuid},enumerable:!0,configurable:!0}),t.prototype.getCircularAncestor=function(t){for(var e=this.engine?this.engine.rootEntity:null,n=t;n&&n!==e;){var o=n.getParent();if(o===this)return n.uuid;n=o}return null},t.prototype.registerAsChild=function(){var t=this.getParent();this.uuid&&t&&(t.children[this.uuid]=this)},t}();e.Entity=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),r=Promise.resolve().then.bind(Promise.resolve());e.executeTask=function(t){var e=r(t);return e.isComplete=!1,e.then(function(t){e.isComplete=!0,e.result=t,e.didFail=!1}).catch(function(t){e.isComplete=!0,e.error=t,e.didFail=!0,o.error("executeTask: FAILED "+t.toString(),t)}),e}},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function s(t){try{p(o.next(t))}catch(t){i(t)}}function a(t){try{p(o.throw(t))}catch(t){i(t)}}function p(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}p((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0});var s=n(18),a=function(){function t(t,e,n,o){void 0===e&&(e=!1),this.initalize(t,e,n,o)}return t.prototype.initalize=function(t,e,n,o){return void 0===e&&(e=!1),this.mask=t,this.skipNextObservers=e,this.target=n,this.currentTarget=o,this},t}();e.ObserverEventState=a;var p=function(t,e,n){void 0===n&&(n=null),this.callback=t,this.mask=e,this.scope=n,this.unregisterOnNextCall=!1,this._willBeUnregistered=!1};e.Observer=p;var u=function(){function t(){this._observers=null,this._observables=null}return t.Watch=function(e,n,o,r){var s,a;void 0===o&&(o=-1),void 0===r&&(r=null);var p=new t;p._observers=new Array,p._observables=e;try{for(var u=i(e),c=u.next();!c.done;c=u.next()){var l=c.value.add(n,o,!1,r);l&&p._observers.push(l)}}catch(t){s={error:t}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(s)throw s.error}}return p},t.prototype.dispose=function(){if(this._observers&&this._observables)for(var t=0;t<this._observers.length;t++)this._observables[t].remove(this._observers[t]);this._observers=null,this._observables=null},t}();e.MultiObserver=u;var c=function(){function t(t){this._observers=new Array,this._onObserverAdded=null,this._eventState=new a(0),t&&(this._onObserverAdded=t)}return t.prototype.add=function(t,e,n,o,r){if(void 0===e&&(e=-1),void 0===n&&(n=!1),void 0===o&&(o=null),void 0===r&&(r=!1),!t)return null;var i=new p(t,e,o);return i.unregisterOnNextCall=r,n?this._observers.unshift(i):this._observers.push(i),this._onObserverAdded&&this._onObserverAdded(i),i},t.prototype.addOnce=function(t){return this.add(t,void 0,void 0,void 0,!0)},t.prototype.remove=function(t){return!!t&&(-1!==this._observers.indexOf(t)&&(this._deferUnregister(t),!0))},t.prototype.removeCallback=function(t,e){for(var n=0;n<this._observers.length;n++)if(this._observers[n].callback===t&&(!e||e===this._observers[n].scope))return this._deferUnregister(this._observers[n]),!0;return!1},t.prototype.notifyObservers=function(t,e,n,o){var r,s;if(void 0===e&&(e=-1),!this._observers.length)return!0;var a=this._eventState;a.mask=e,a.target=n,a.currentTarget=o,a.skipNextObservers=!1,a.lastReturnValue=t;try{for(var p=i(this._observers),u=p.next();!u.done;u=p.next()){var c=u.value;if(!c._willBeUnregistered&&(c.mask&e&&(c.scope?a.lastReturnValue=c.callback.apply(c.scope,[t,a]):a.lastReturnValue=c.callback(t,a),c.unregisterOnNextCall&&this._deferUnregister(c)),a.skipNextObservers))return!1}}catch(t){r={error:t}}finally{try{u&&!u.done&&(s=p.return)&&s.call(p)}finally{if(r)throw r.error}}return!0},t.prototype.notifyObserversWithPromise=function(t,e,n,o){var r=this;void 0===e&&(e=-1);var i=Promise.resolve(t);if(!this._observers.length)return i;var s=this._eventState;return s.mask=e,s.target=n,s.currentTarget=o,s.skipNextObservers=!1,this._observers.forEach(function(n){s.skipNextObservers||n._willBeUnregistered||n.mask&e&&(i=n.scope?i.then(function(e){return s.lastReturnValue=e,n.callback.apply(n.scope,[t,s])}):i.then(function(e){return s.lastReturnValue=e,n.callback(t,s)}),n.unregisterOnNextCall&&r._deferUnregister(n))}),i.then(function(){return t})},t.prototype.notifyObserver=function(t,e,n){void 0===n&&(n=-1);var o=this._eventState;o.mask=n,o.skipNextObservers=!1,t.callback(e,o)},t.prototype.hasObservers=function(){return this._observers.length>0},t.prototype.clear=function(){this._observers=new Array,this._onObserverAdded=null},t.prototype.clone=function(){var e=new t;return e._observers=this._observers.slice(0),e},t.prototype.hasSpecificMask=function(t){var e,n;void 0===t&&(t=-1);try{for(var o=i(this._observers),r=o.next();!r.done;r=o.next()){var s=r.value;if(s.mask&t||s.mask===t)return!0}}catch(t){e={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return!1},t.prototype._deferUnregister=function(t){var e=this;t.unregisterOnNextCall=!1,t._willBeUnregistered=!0,s.executeTask(function(){return o(e,void 0,void 0,function(){return r(this,function(e){return[2,this._remove(t)]})})})},t.prototype._remove=function(t){if(!t)return!1;var e=this._observers.indexOf(t);return-1!==e&&(this._observers.splice(e,1),!0)},t}();e.Observable=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=n(6),i=n(3),s=function(){function t(t,e,n,o){this.x=t,this.y=e,this.z=n,this.w=o}return t.Add=function(e,n){return new t(e.x,e.y,e.z,e.w).addInPlace(n)},t.FromArray=function(e,n){return void 0===n&&(n=0),new t(e[n],e[n+1],e[n+2],e[n+3])},t.FromArrayToRef=function(t,e,n){n.x=t[e],n.y=t[e+1],n.z=t[e+2],n.w=t[e+3]},t.FromFloatArrayToRef=function(e,n,o){t.FromArrayToRef(e,n,o)},t.FromFloatsToRef=function(t,e,n,o,r){r.x=t,r.y=e,r.z=n,r.w=o},t.Zero=function(){return new t(0,0,0,0)},t.One=function(){return new t(1,1,1,1)},t.Normalize=function(e){var n=t.Zero();return t.NormalizeToRef(e,n),n},t.NormalizeToRef=function(t,e){e.copyFrom(t),e.normalize()},t.Minimize=function(e,n){var o=new t(e.x,e.y,e.z,e.w);return o.minimizeInPlace(n),o},t.Maximize=function(e,n){var o=new t(e.x,e.y,e.z,e.w);return o.maximizeInPlace(n),o},t.Distance=function(e,n){return Math.sqrt(t.DistanceSquared(e,n))},t.DistanceSquared=function(t,e){var n=t.x-e.x,o=t.y-e.y,r=t.z-e.z,i=t.w-e.w;return n*n+o*o+r*r+i*i},t.Center=function(e,n){var o=t.Add(e,n);return o.scaleInPlace(.5),o},t.TransformNormal=function(e,n){var o=t.Zero();return t.TransformNormalToRef(e,n,o),o},t.TransformNormalToRef=function(t,e,n){var o=e.m,r=t.x*o[0]+t.y*o[4]+t.z*o[8],i=t.x*o[1]+t.y*o[5]+t.z*o[9],s=t.x*o[2]+t.y*o[6]+t.z*o[10];n.x=r,n.y=i,n.z=s,n.w=t.w},t.TransformNormalFromFloatsToRef=function(t,e,n,o,r,i){var s=r.m;i.x=t*s[0]+e*s[4]+n*s[8],i.y=t*s[1]+e*s[5]+n*s[9],i.z=t*s[2]+e*s[6]+n*s[10],i.w=o},t.prototype.toString=function(){return"{X: "+this.x+" Y:"+this.y+" Z:"+this.z+" W:"+this.w+"}"},t.prototype.getClassName=function(){return"Vector4"},t.prototype.getHashCode=function(){var t=this.x||0;return t=397*(t=397*(t=397*t^(this.y||0))^(this.z||0))^(this.w||0)},t.prototype.asArray=function(){var t=new Array;return this.toArray(t,0),t},t.prototype.toArray=function(t,e){return void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,this},t.prototype.addInPlace=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y,this.z+e.z,this.w+e.w)},t.prototype.addToRef=function(t,e){return e.x=this.x+t.x,e.y=this.y+t.y,e.z=this.z+t.z,e.w=this.w+t.w,this},t.prototype.subtractInPlace=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this},t.prototype.subtract=function(e){return new t(this.x-e.x,this.y-e.y,this.z-e.z,this.w-e.w)},t.prototype.subtractToRef=function(t,e){return e.x=this.x-t.x,e.y=this.y-t.y,e.z=this.z-t.z,e.w=this.w-t.w,this},t.prototype.subtractFromFloats=function(e,n,o,r){return new t(this.x-e,this.y-n,this.z-o,this.w-r)},t.prototype.subtractFromFloatsToRef=function(t,e,n,o,r){return r.x=this.x-t,r.y=this.y-e,r.z=this.z-n,r.w=this.w-o,this},t.prototype.negate=function(){return new t(-this.x,-this.y,-this.z,-this.w)},t.prototype.scaleInPlace=function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},t.prototype.scale=function(e){return new t(this.x*e,this.y*e,this.z*e,this.w*e)},t.prototype.scaleToRef=function(t,e){return e.x=this.x*t,e.y=this.y*t,e.z=this.z*t,e.w=this.w*t,this},t.prototype.scaleAndAddToRef=function(t,e){return e.x+=this.x*t,e.y+=this.y*t,e.z+=this.z*t,e.w+=this.w*t,this},t.prototype.equals=function(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},t.prototype.equalsWithEpsilon=function(t,e){return void 0===e&&(e=o.Epsilon),t&&r.Scalar.WithinEpsilon(this.x,t.x,e)&&r.Scalar.WithinEpsilon(this.y,t.y,e)&&r.Scalar.WithinEpsilon(this.z,t.z,e)&&r.Scalar.WithinEpsilon(this.w,t.w,e)},t.prototype.equalsToFloats=function(t,e,n,o){return this.x===t&&this.y===e&&this.z===n&&this.w===o},t.prototype.multiplyInPlace=function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this},t.prototype.multiply=function(e){return new t(this.x*e.x,this.y*e.y,this.z*e.z,this.w*e.w)},t.prototype.multiplyToRef=function(t,e){return e.x=this.x*t.x,e.y=this.y*t.y,e.z=this.z*t.z,e.w=this.w*t.w,this},t.prototype.multiplyByFloats=function(e,n,o,r){return new t(this.x*e,this.y*n,this.z*o,this.w*r)},t.prototype.divide=function(e){return new t(this.x/e.x,this.y/e.y,this.z/e.z,this.w/e.w)},t.prototype.divideToRef=function(t,e){return e.x=this.x/t.x,e.y=this.y/t.y,e.z=this.z/t.z,e.w=this.w/t.w,this},t.prototype.divideInPlace=function(t){return this.divideToRef(t,this)},t.prototype.minimizeInPlace=function(t){return t.x<this.x&&(this.x=t.x),t.y<this.y&&(this.y=t.y),t.z<this.z&&(this.z=t.z),t.w<this.w&&(this.w=t.w),this},t.prototype.maximizeInPlace=function(t){return t.x>this.x&&(this.x=t.x),t.y>this.y&&(this.y=t.y),t.z>this.z&&(this.z=t.z),t.w>this.w&&(this.w=t.w),this},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z),Math.floor(this.w))},t.prototype.fract=function(){return new t(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z),this.w-Math.floor(this.w))},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},t.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},t.prototype.normalize=function(){var t=this.length();return 0===t?this:this.scaleInPlace(1/t)},t.prototype.toVector3=function(){return new i.Vector3(this.x,this.y,this.z)},t.prototype.clone=function(){return new t(this.x,this.y,this.z,this.w)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},t.prototype.copyFromFloats=function(t,e,n,o){return this.x=t,this.y=e,this.z=n,this.w=o,this},t.prototype.set=function(t,e,n,o){return this.copyFromFloats(t,e,n,o)},t.prototype.setAll=function(t){return this.x=this.y=this.z=this.w=t,this},t}();e.Vector4=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){this._radians=t,this._radians<0&&(this._radians+=2*Math.PI)}return t.BetweenTwoPoints=function(e,n){var o=n.subtract(e);return new t(Math.atan2(o.y,o.x))},t.FromRadians=function(e){return new t(e)},t.FromDegrees=function(e){return new t(e*Math.PI/180)},t.prototype.degrees=function(){return 180*this._radians/Math.PI},t.prototype.radians=function(){return this._radians},t}();e.Angle=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(21),r=n(14),i=n(2),s=function(t,e,n){this.startPoint=t,this.midPoint=e,this.endPoint=n;var s=Math.pow(e.x,2)+Math.pow(e.y,2),a=(Math.pow(t.x,2)+Math.pow(t.y,2)-s)/2,p=(s-Math.pow(n.x,2)-Math.pow(n.y,2))/2,u=(t.x-e.x)*(e.y-n.y)-(e.x-n.x)*(t.y-e.y);this.centerPoint=new r.Vector2((a*(e.y-n.y)-p*(t.y-e.y))/u,((t.x-e.x)*p-(e.x-n.x)*a)/u),this.radius=this.centerPoint.subtract(this.startPoint).length(),this.startAngle=o.Angle.BetweenTwoPoints(this.centerPoint,this.startPoint);var c=this.startAngle.degrees(),l=o.Angle.BetweenTwoPoints(this.centerPoint,this.midPoint).degrees(),h=o.Angle.BetweenTwoPoints(this.centerPoint,this.endPoint).degrees();l-c>180&&(l-=360),l-c<-180&&(l+=360),h-l>180&&(h-=360),h-l<-180&&(h+=360),this.orientation=l-c<0?i.Orientation.CW:i.Orientation.CCW,this.angle=o.Angle.FromDegrees(this.orientation===i.Orientation.CW?c-h:h-c)};e.Arc2=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6),r=n(2),i=function(){function t(t,e,n,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o=1),this.r=t,this.g=e,this.b=n,this.a=o}return t.FromHexString=function(e){if("#"!==e.substring(0,1)||9!==e.length)return new t(0,0,0,0);var n=parseInt(e.substring(1,3),16),o=parseInt(e.substring(3,5),16),r=parseInt(e.substring(5,7),16),i=parseInt(e.substring(7,9),16);return t.FromInts(n,o,r,i)},t.Lerp=function(e,n,o){var r=new t(0,0,0,0);return t.LerpToRef(e,n,o,r),r},t.LerpToRef=function(t,e,n,o){o.r=t.r+(e.r-t.r)*n,o.g=t.g+(e.g-t.g)*n,o.b=t.b+(e.b-t.b)*n,o.a=t.a+(e.a-t.a)*n},t.Red=function(){return new t(1,0,0,1)},t.Green=function(){return new t(0,1,0,1)},t.Blue=function(){return new t(0,0,1,1)},t.Black=function(){return new t(0,0,0,1)},t.White=function(){return new t(1,1,1,1)},t.Purple=function(){return new t(.5,0,.5,1)},t.Magenta=function(){return new t(1,0,1,1)},t.Yellow=function(){return new t(1,1,0,1)},t.Gray=function(){return new t(.5,.5,.5,1)},t.Teal=function(){return new t(0,1,1,1)},t.Clear=function(){return new t(0,0,0,0)},t.FromColor3=function(e,n){return void 0===n&&(n=1),new t(e.r,e.g,e.b,n)},t.FromArray=function(e,n){return void 0===n&&(n=0),new t(e[n],e[n+1],e[n+2],e[n+3])},t.FromInts=function(e,n,o,r){return new t(e/255,n/255,o/255,r/255)},t.CheckColors4=function(t,e){if(t.length===3*e){for(var n=[],o=0;o<t.length;o+=3){var r=o/3*4;n[r]=t[o],n[r+1]=t[o+1],n[r+2]=t[o+2],n[r+3]=1}return n}return t},t.prototype.addInPlace=function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this.a+=t.a,this},t.prototype.asArray=function(){var t=new Array;return this.toArray(t,0),t},t.prototype.toArray=function(t,e){return void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t[e+3]=this.a,this},t.prototype.add=function(e){return new t(this.r+e.r,this.g+e.g,this.b+e.b,this.a+e.a)},t.prototype.subtract=function(e){return new t(this.r-e.r,this.g-e.g,this.b-e.b,this.a-e.a)},t.prototype.subtractToRef=function(t,e){return e.r=this.r-t.r,e.g=this.g-t.g,e.b=this.b-t.b,e.a=this.a-t.a,this},t.prototype.scale=function(e){return new t(this.r*e,this.g*e,this.b*e,this.a*e)},t.prototype.scaleToRef=function(t,e){return e.r=this.r*t,e.g=this.g*t,e.b=this.b*t,e.a=this.a*t,this},t.prototype.scaleAndAddToRef=function(t,e){return e.r+=this.r*t,e.g+=this.g*t,e.b+=this.b*t,e.a+=this.a*t,this},t.prototype.clampToRef=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=1),n.r=o.Scalar.Clamp(this.r,t,e),n.g=o.Scalar.Clamp(this.g,t,e),n.b=o.Scalar.Clamp(this.b,t,e),n.a=o.Scalar.Clamp(this.a,t,e),this},t.prototype.multiply=function(e){return new t(this.r*e.r,this.g*e.g,this.b*e.b,this.a*e.a)},t.prototype.multiplyToRef=function(t,e){return e.r=this.r*t.r,e.g=this.g*t.g,e.b=this.b*t.b,e.a=this.a*t.a,e},t.prototype.toString=function(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+" A:"+this.a+"}"},t.prototype.getClassName=function(){return"Color4"},t.prototype.getHashCode=function(){var t=this.r||0;return t=397*(t=397*(t=397*t^(this.g||0))^(this.b||0))^(this.a||0)},t.prototype.clone=function(){return new t(this.r,this.g,this.b,this.a)},t.prototype.copyFrom=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},t.prototype.copyFromFloats=function(t,e,n,o){return this.r=t,this.g=e,this.b=n,this.a=o,this},t.prototype.set=function(t,e,n,o){return this.copyFromFloats(t,e,n,o)},t.prototype.toHexString=function(){var t=255*this.r|0,e=255*this.g|0,n=255*this.b|0,r=255*this.a|0;return"#"+o.Scalar.ToHex(t)+o.Scalar.ToHex(e)+o.Scalar.ToHex(n)+o.Scalar.ToHex(r)},t.prototype.toLinearSpace=function(){var e=new t;return this.toLinearSpaceToRef(e),e},t.prototype.toLinearSpaceToRef=function(t){return t.r=Math.pow(this.r,r.ToLinearSpace),t.g=Math.pow(this.g,r.ToLinearSpace),t.b=Math.pow(this.b,r.ToLinearSpace),t.a=this.a,this},t.prototype.toGammaSpace=function(){var e=new t;return this.toGammaSpaceToRef(e),e},t.prototype.toGammaSpaceToRef=function(t){return t.r=Math.pow(this.r,r.ToGammaSpace),t.g=Math.pow(this.g,r.ToGammaSpace),t.b=Math.pow(this.b,r.ToGammaSpace),t.a=this.a,this},t}();e.Color4=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=n(11),i=n(9),s=function(){function t(t,e,n,r){this.normal=new o.Vector3(t,e,n),this.d=r}return t.FromArray=function(e){return new t(e[0],e[1],e[2],e[3])},t.FromPoints=function(e,n,o){var r=new t(0,0,0,0);return r.copyFromPoints(e,n,o),r},t.FromPositionAndNormal=function(e,n){var o=new t(0,0,0,0);return n.normalize(),o.normal=n,o.d=-(n.x*e.x+n.y*e.y+n.z*e.z),o},t.SignedDistanceToPlaneFromPositionAndNormal=function(t,e,n){var r=-(e.x*t.x+e.y*t.y+e.z*t.z);return o.Vector3.Dot(n,e)+r},t.prototype.asArray=function(){return[this.normal.x,this.normal.y,this.normal.z,this.d]},t.prototype.clone=function(){return new t(this.normal.x,this.normal.y,this.normal.z,this.d)},t.prototype.getClassName=function(){return"Plane"},t.prototype.getHashCode=function(){var t=this.normal.getHashCode();return t=397*t^(this.d||0)},t.prototype.normalize=function(){var t=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z),e=0;return 0!==t&&(e=1/t),this.normal.x*=e,this.normal.y*=e,this.normal.z*=e,this.d*=e,this},t.prototype.transform=function(e){var n=i.MathTmp.Matrix[0];r.Matrix.TransposeToRef(e,n);var o=n.m,s=this.normal.x,a=this.normal.y,p=this.normal.z,u=this.d;return new t(s*o[0]+a*o[1]+p*o[2]+u*o[3],s*o[4]+a*o[5]+p*o[6]+u*o[7],s*o[8]+a*o[9]+p*o[10]+u*o[11],s*o[12]+a*o[13]+p*o[14]+u*o[15])},t.prototype.dotCoordinate=function(t){return this.normal.x*t.x+this.normal.y*t.y+this.normal.z*t.z+this.d},t.prototype.copyFromPoints=function(t,e,n){var o,r=e.x-t.x,i=e.y-t.y,s=e.z-t.z,a=n.x-t.x,p=n.y-t.y,u=n.z-t.z,c=i*u-s*p,l=s*a-r*u,h=r*p-i*a,f=Math.sqrt(c*c+l*l+h*h);return o=0!==f?1/f:0,this.normal.x=c*o,this.normal.y=l*o,this.normal.z=h*o,this.d=-(this.normal.x*t.x+this.normal.y*t.y+this.normal.z*t.z),this},t.prototype.isFrontFacingTo=function(t,e){return o.Vector3.Dot(this.normal,t)<=e},t.prototype.signedDistanceTo=function(t){return o.Vector3.Dot(t,this.normal)+this.d},t}();e.Plane=s},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},s=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),p=n(1),u={looping:!0,speed:1,weight:1},c=function(t){function e(e,n){void 0===n&&(n=u);var o=t.call(this)||this;return o.isAnimationClip=!0,o.looping=u.looping,o.weight=u.weight,o.playing=!1,o.shouldReset=!1,o.speed=u.speed,o.name=p.newId("AnimClip"),o.clip=e,o.setParams(i({},n)),o}return r(e,t),e.prototype.setParams=function(t){return this.looping=void 0!==t.looping?t.looping:this.looping,this.speed=t.speed||this.speed,this},e.prototype.toJSON=function(){var e=JSON.parse(JSON.stringify(t.prototype.toJSON.call(this)));return this.shouldReset&&(this.shouldReset=!1),e},e.prototype.play=function(){this.playing=!0},e.prototype.pause=function(){this.playing=!1},e.prototype.reset=function(){this.shouldReset=!0},e.prototype.stop=function(){this.reset(),this.pause()},s([a.ObservableComponent.readonly],e.prototype,"clip",void 0),s([a.ObservableComponent.field],e.prototype,"looping",void 0),s([a.ObservableComponent.field],e.prototype,"weight",void 0),s([a.ObservableComponent.field],e.prototype,"playing",void 0),s([a.ObservableComponent.field],e.prototype,"shouldReset",void 0),s([a.ObservableComponent.field],e.prototype,"speed",void 0),s([a.ObservableComponent.readonly],e.prototype,"name",void 0),e}(a.ObservableComponent);e.AnimationState=c},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},s=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var a,p=n(27),u=n(5),c=n(0);!function(t){t.POINTER="POINTER",t.PRIMARY="PRIMARY",t.SECONDARY="SECONDARY"}(a=e.ActionButton||(e.ActionButton={}));var l=function(t){if(this.callback=t,!(t&&"apply"in t&&"call"in t))throw new Error("Callback is not a function");y.ensureInstance()};e.PointerEventComponent=l;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e=s([c.Component("pointerDown")],e)}(l);e.GlobalPointerDown=h;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e=s([c.Component("pointerUp")],e)}(l);e.GlobalPointerUp=f;var d=function(t,e){this.fn=t,this.useRaycast=e};e.Subscription=d;var y=function(){function t(){var t,e;this.subscriptions=((t={})[a.POINTER]={BUTTON_DOWN:[],BUTTON_UP:[]},t[a.PRIMARY]={BUTTON_DOWN:[],BUTTON_UP:[]},t[a.SECONDARY]={BUTTON_DOWN:[],BUTTON_UP:[]},t),this.internalState=((e={})[a.POINTER]={BUTTON_DOWN:!1},e[a.PRIMARY]={BUTTON_DOWN:!1},e[a.SECONDARY]={BUTTON_DOWN:!1},e)}return Object.defineProperty(t,"instance",{get:function(){return t.ensureInstance(),t._instance},enumerable:!0,configurable:!0}),t.ensureInstance=function(){t._instance||(t._instance=new t)},t.prototype.isButtonPressed=function(t){return this.internalState[t]},t.prototype.subscribe=function(t,e,n,o){var r=this;return this.subscriptions[e][t].push(new d(o,n)),function(){return r.unsubscribe(t,e,o)}},t.prototype.unsubscribe=function(t,e,n){var o=this.getSubscriptionId(t,e,n);return o>-1&&this.subscriptions[e][t].splice(o,1)},t.prototype.handlePointerEvent=function(t){var e=this.getPointerById(t.buttonId),n=i(i({},t),{button:e,direction:(new u.Vector3).copyFrom(t.direction),origin:(new u.Vector3).copyFrom(t.origin),hit:void 0}),o=t.hit?i(i({},t.hit),{hitPoint:(new u.Vector3).copyFrom(t.hit.hitPoint),normal:(new u.Vector3).copyFrom(t.hit.normal),worldNormal:(new u.Vector3).copyFrom(t.hit.worldNormal)}):void 0;if(t.type===p.InputEventType.DOWN){this.internalState[e].BUTTON_DOWN=!0;for(var r=0;r<this.subscriptions[e].BUTTON_DOWN.length;r++){(s=this.subscriptions[e].BUTTON_DOWN[r]).useRaycast?n.hit=o:n.hit=void 0,s.fn(n)}if(o&&o.entityId&&c.DisposableComponent.engine)(l=(a=c.DisposableComponent.engine.entities[o.entityId])&&a.getComponentOrNull(h))&&(n.hit=o,l.callback(n))}else{this.internalState[e].BUTTON_DOWN=!1;for(r=0;r<this.subscriptions[e].BUTTON_UP.length;r++){var s;(s=this.subscriptions[e].BUTTON_UP[r]).useRaycast?n.hit=o:n.hit=void 0,s.fn(n)}var a,l;if(o&&o.entityId&&c.DisposableComponent.engine)(l=(a=c.DisposableComponent.engine.entities[o.entityId])&&a.getComponentOrNull(f))&&(n.hit=o,l.callback(n))}},t.prototype.getSubscriptionId=function(t,e,n){for(var o=0;o<this.subscriptions[e][t].length;o++)if(this.subscriptions[e][t][o].fn===n)return o;return-1},t.prototype.getPointerById=function(t){return 0===t?a.POINTER:1===t?a.PRIMARY:a.SECONDARY},t}();e.Input=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.DOWN=0]="DOWN",t[t.UP=1]="UP"}(e.InputEventType||(e.InputEventType={})),e.AVATAR_OBSERVABLE="AVATAR_OBSERVABLE"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),r=n(1),i=n(29),s=function(){function t(){this.queries={}}return Object.defineProperty(t,"instance",{get:function(){return t.ensureInstance(),t._instance},enumerable:!0,configurable:!0}),t.ensureInstance=function(){t._instance||(t._instance=new t)},t.prototype.getRayFromCamera=function(t){var e=i.Camera.instance.rotation,n=o.Matrix.Identity();e.toRotationMatrix(n);var r=o.Vector3.TransformCoordinates(o.Vector3.Forward(),n);return{origin:i.Camera.instance.position,direction:r,distance:t}},t.prototype.getRayFromPositions=function(t,e){var n=e.subtract(t),o=n.length();return{origin:t,direction:n.normalize(),distance:o}},t.prototype.hitFirst=function(t,e){var n=r.uuid();this.queries[n]=e,dcl&&dcl.query("raycast",{queryId:n,queryType:"HitFirst",ray:t})},t.prototype.hitAll=function(t,e){var n=r.uuid();this.queries[n]=e,dcl&&dcl.query("raycast",{queryId:n,queryType:"HitAll",ray:t})},t.prototype.hitFirstAvatar=function(t,e){r.log("not implemented yet")},t.prototype.hitAllAvatars=function(t,e){r.log("not implemented yet")},t.prototype.handleRaycastHitFirstResponse=function(t){this.queries[t.payload.queryId](t.payload.payload),delete this.queries[t.payload.queryId]},t.prototype.handleRaycastHitAllResponse=function(t){this.queries[t.payload.queryId](t.payload.payload),delete this.queries[t.payload.queryId]},t}();e.PhysicsCast=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),r=function(){function t(){var t=this;this.position=new o.Vector3,this.rotation=new o.Quaternion,this.feetPosition=new o.Vector3,this.worldPosition=new o.Vector3,this.lastEventPosition={x:0,y:0,z:0},this.lastEventWorldPosition={x:0,y:0,z:0},this.lastEventRotation={x:0,y:0,z:0,w:1},this._playerHeight=1.6,"undefined"!=typeof dcl&&(dcl.subscribe("positionChanged"),dcl.subscribe("rotationChanged"),dcl.onEvent(function(e){switch(e.type){case"positionChanged":t.positionChanged(e.data);break;case"rotationChanged":t.rotationChanged(e.data)}})),Object.defineProperty(this.position,"x",{get:function(){return t.lastEventPosition.x}}),Object.defineProperty(this.position,"y",{get:function(){return t.lastEventPosition.y}}),Object.defineProperty(this.position,"z",{get:function(){return t.lastEventPosition.z}}),Object.defineProperty(this.worldPosition,"x",{get:function(){return t.lastEventWorldPosition.x}}),Object.defineProperty(this.worldPosition,"y",{get:function(){return t.lastEventWorldPosition.y}}),Object.defineProperty(this.worldPosition,"z",{get:function(){return t.lastEventWorldPosition.z}}),Object.defineProperty(this.feetPosition,"x",{get:function(){return t.lastEventPosition.x}}),Object.defineProperty(this.feetPosition,"y",{get:function(){return t.lastEventPosition.y-t.playerHeight}}),Object.defineProperty(this.feetPosition,"z",{get:function(){return t.lastEventPosition.z}}),Object.defineProperty(this.rotation,"x",{get:function(){return t.lastEventRotation.x}}),Object.defineProperty(this.rotation,"y",{get:function(){return t.lastEventRotation.y}}),Object.defineProperty(this.rotation,"z",{get:function(){return t.lastEventRotation.z}}),Object.defineProperty(this.rotation,"w",{get:function(){return t.lastEventRotation.w}})}return Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playerHeight",{get:function(){return this._playerHeight},enumerable:!0,configurable:!0}),t.prototype.positionChanged=function(t){this.lastEventPosition=t.position,this.lastEventWorldPosition=t.cameraPosition,this._playerHeight=t.playerHeight},t.prototype.rotationChanged=function(t){this.lastEventRotation=t.quaternion},t}();e.Camera=r},function(t,e,n){"use strict";function o(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),o(n(15)),o(n(0)),o(n(17)),o(n(7)),o(n(18)),o(n(1)),o(n(19)),o(n(16)),o(n(8));var r=n(32),i=n(15),s=new(n(17).Entity)("scene");s.uuid="0";var a=new i.Engine(s);e.engine=a,n(0).DisposableComponent.engine=a,"undefined"!=typeof dcl&&a.addSystem(new r.DecentralandSynchronizationSystem(dcl),1/0);var p=n(13);a.addSystem(p.uuidEventSystem),a.addSystem(p.pointerEventSystem),a.addSystem(p.raycastEventSystem),o(n(27)),o(n(4)),o(n(13)),o(n(12)),o(n(29)),o(n(5)),o(n(25)),o(n(26)),o(n(41)),o(n(42)),o(n(43)),o(n(44)),o(n(45)),o(n(46)),o(n(28))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.entities=[],this.active=!1,this._requiresNames=[],!t)throw new Error("ComponentGroup: Could not load the requires list");if(!(t instanceof Array))throw new Error("ComponentGroup: requires list is not an Array");Object.defineProperty(this,"requires",{get:function(){return t.slice()}}),Object.defineProperty(this,"requiresNames",{get:function(){return this._requiresNames.slice()}});for(var n=function(e){var n=t[e],i=null;if(!n)throw new Error("ComponentGroup: the required component at location "+e+" is invalid");try{i=o.getComponentName(n)}catch(t){throw new Error("ComponentGroup: the required component at location "+e+" is not registered as a @Component. Remember to provide the class of the component, not the name")}if(r._requiresNames.some(function(t){return t===i}))throw new Error("ComponentGroup: the required component list has a repeated name "+i);r._requiresNames.push(i)},r=this,i=0;i<t.length;i++)n(i)}return t.prototype.hasEntity=function(t){return!!t.isAddedToEngine()&&-1!==this.entities.indexOf(t)},t.prototype.addEntity=function(t){if(!t.isAddedToEngine())throw new TypeError("ComponentGroup: Cannot add a entity that is not added to the engine");-1===this.entities.indexOf(t)&&this.entities.push(t)},t.prototype.removeEntity=function(t){var e=this.entities.indexOf(t);-1!==e&&this.entities.splice(e,1)},t.prototype.componentRemoved=function(t,e){-1!==this._requiresNames.indexOf(e)&&this.removeEntity(t)},t.prototype.meetsRequirements=function(t){for(var e=0;e<this._requiresNames.length;e++){if(!(this._requiresNames[e]in t.components))return!1}return!0},t}();e.ComponentGroup=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(7),r=n(12),i=n(0),s=function(){function t(t){this.dcl=t,this.cachedComponents={}}return t.prototype.activate=function(t){var e=this;this.engine=t,t.eventManager.addListener(o.ComponentAdded,this,this.componentAdded),t.eventManager.addListener(o.ComponentRemoved,this,this.componentRemoved),t.eventManager.addListener(i.DisposableComponentCreated,this,this.disposableComponentCreated),t.eventManager.addListener(i.DisposableComponentRemoved,this,this.disposableComponentRemoved),t.eventManager.addListener(i.DisposableComponentUpdated,this,this.disposableComponentUpdated),t.eventManager.addListener(o.ParentChanged,this,this.parentChanged);var n=t.rootEntity.uuid;this.dcl.addEntity(n),this.dcl.onUpdate(function(n){t.update(n),e.presentEntities()}),this.dcl.onEvent(function(e){var n=e.data;switch(e.type){case"uuidEvent":t.eventManager.fireEvent(new r.UUIDEvent(n.uuid,n.payload));break;case"raycastResponse":"HitFirst"===n.queryType?t.eventManager.fireEvent(new r.RaycastResponse(n)):"HitAll"===n.queryType&&t.eventManager.fireEvent(new r.RaycastResponse(n));break;case"pointerEvent":t.eventManager.fireEvent(new r.PointerEvent(n.payload))}})},t.prototype.onAddEntity=function(t){if(t&&t.isAddedToEngine()){var e=t.uuid,n=t.getParent();for(var o in this.dcl.addEntity(e),n&&this.dcl.setParent(e,n.uuid),this.cachedComponents[e]={},t.components){var r=t.components[o],s=i.getComponentClassId(r);if(null!==s)if(i.isDisposableComponent(r))this.dcl.attachEntityComponent(t.uuid,o,i.getComponentId(r));else{var a=JSON.stringify(r);this.dcl.updateEntityComponent(e,o,s,a),this.cachedComponents[e][o]=a}}}},t.prototype.onRemoveEntity=function(t){if(t.isAddedToEngine()){var e=t.uuid;this.dcl.removeEntity(e),delete this.cachedComponents[e]}},t.prototype.presentEntities=function(){for(var t in this.engine.entities){var e=this.engine.entities[t],n=e.uuid;for(var o in e.components){var r=e.components[o],s=i.getComponentClassId(r);if(null!==s&&!i.isDisposableComponent(r)){var a=JSON.stringify(r);this.cachedComponents[n][o]!==a&&(this.dcl.updateEntityComponent(e.uuid,o,s,a),this.cachedComponents[n][o]=a)}}}for(var p in this.engine.disposableComponents){(r=this.engine.disposableComponents[p])instanceof i.ObservableComponent&&r.dirty&&(this.dcl.componentUpdated(p,JSON.stringify(r)),r.dirty=!1)}},t.prototype.componentAdded=function(t){if(t.entity.isAddedToEngine()){var e=t.entity.components[t.componentName];if(i.isDisposableComponent(e))this.dcl.attachEntityComponent(t.entity.uuid,t.componentName,i.getComponentId(e));else if(null!==t.classId){var n=JSON.stringify(e);this.dcl.updateEntityComponent(t.entity.uuid,t.componentName,t.classId,n),this.cachedComponents[t.entity.uuid][t.componentName]=n}}},t.prototype.componentRemoved=function(t){t.entity.isAddedToEngine()&&(this.dcl.removeEntityComponent(t.entity.uuid,t.componentName),delete this.cachedComponents[t.entity.uuid][t.componentName])},t.prototype.disposableComponentCreated=function(t){this.dcl.componentCreated(t.componentId,t.componentName,t.classId)},t.prototype.disposableComponentRemoved=function(t){this.dcl.componentDisposed(t.componentId)},t.prototype.disposableComponentUpdated=function(t){this.dcl.componentUpdated(t.componentId,JSON.stringify(t.component))},t.prototype.parentChanged=function(t){this.dcl.setParent(t.entity.uuid,t.parent?t.parent.uuid:"0")},t}();e.DecentralandSynchronizationSystem=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=function(){function t(){}return t.X=new o.Vector3(1,0,0),t.Y=new o.Vector3(0,1,0),t.Z=new o.Vector3(0,0,1),t}();e.Axis=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.Interpolate=function(t,e,n,o,r){for(var i=1-3*o+3*e,s=3*o-6*e,a=3*e,p=t,u=0;u<5;u++){var c=p*p;p-=(i*(c*p)+s*c+a*p-t)*(1/(3*i*c+2*s*p+a)),p=Math.min(1,Math.max(0,p))}return 3*Math.pow(1-p,2)*p*n+3*(1-p)*Math.pow(p,2)*r+Math.pow(p,3)},t}();e.BezierCurve=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=n(23),i=n(6),s=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.r=t,this.g=e,this.b=n}return t.FromHexString=function(e){if("#"!==e.substring(0,1)||7!==e.length)return new t(0,0,0);var n=parseInt(e.substring(1,3),16),o=parseInt(e.substring(3,5),16),r=parseInt(e.substring(5,7),16);return t.FromInts(n,o,r)},t.FromArray=function(e,n){return void 0===n&&(n=0),new t(e[n],e[n+1],e[n+2])},t.FromInts=function(e,n,o){return new t(e/255,n/255,o/255)},t.Lerp=function(e,n,o){var r=new t(0,0,0);return t.LerpToRef(e,n,o,r),r},t.LerpToRef=function(t,e,n,o){o.r=t.r+(e.r-t.r)*n,o.g=t.g+(e.g-t.g)*n,o.b=t.b+(e.b-t.b)*n},t.Red=function(){return new t(1,0,0)},t.Green=function(){return new t(0,1,0)},t.Blue=function(){return new t(0,0,1)},t.Black=function(){return new t(0,0,0)},t.White=function(){return new t(1,1,1)},t.Purple=function(){return new t(.5,0,.5)},t.Magenta=function(){return new t(1,0,1)},t.Yellow=function(){return new t(1,1,0)},t.Gray=function(){return new t(.5,.5,.5)},t.Teal=function(){return new t(0,1,1)},t.Random=function(){return new t(Math.random(),Math.random(),Math.random())},t.prototype.toString=function(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+"}"},t.prototype.getClassName=function(){return"Color3"},t.prototype.getHashCode=function(){var t=this.r||0;return t=397*(t=397*t^(this.g||0))^(this.b||0)},t.prototype.toArray=function(t,e){return void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,this},t.prototype.toColor4=function(t){return void 0===t&&(t=1),new r.Color4(this.r,this.g,this.b,t)},t.prototype.asArray=function(){var t=new Array;return this.toArray(t,0),t},t.prototype.toLuminance=function(){return.3*this.r+.59*this.g+.11*this.b},t.prototype.multiply=function(e){return new t(this.r*e.r,this.g*e.g,this.b*e.b)},t.prototype.multiplyToRef=function(t,e){return e.r=this.r*t.r,e.g=this.g*t.g,e.b=this.b*t.b,this},t.prototype.equals=function(t){return t&&this.r===t.r&&this.g===t.g&&this.b===t.b},t.prototype.equalsFloats=function(t,e,n){return this.r===t&&this.g===e&&this.b===n},t.prototype.scale=function(e){return new t(this.r*e,this.g*e,this.b*e)},t.prototype.scaleToRef=function(t,e){return e.r=this.r*t,e.g=this.g*t,e.b=this.b*t,this},t.prototype.scaleAndAddToRef=function(t,e){return e.r+=this.r*t,e.g+=this.g*t,e.b+=this.b*t,this},t.prototype.clampToRef=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=1),n.r=i.Scalar.Clamp(this.r,t,e),n.g=i.Scalar.Clamp(this.g,t,e),n.b=i.Scalar.Clamp(this.b,t,e),this},t.prototype.add=function(e){return new t(this.r+e.r,this.g+e.g,this.b+e.b)},t.prototype.addToRef=function(t,e){return e.r=this.r+t.r,e.g=this.g+t.g,e.b=this.b+t.b,this},t.prototype.subtract=function(e){return new t(this.r-e.r,this.g-e.g,this.b-e.b)},t.prototype.subtractToRef=function(t,e){return e.r=this.r-t.r,e.g=this.g-t.g,e.b=this.b-t.b,this},t.prototype.clone=function(){return new t(this.r,this.g,this.b)},t.prototype.copyFrom=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},t.prototype.copyFromFloats=function(t,e,n){return this.r=t,this.g=e,this.b=n,this},t.prototype.set=function(t,e,n){return this.copyFromFloats(t,e,n)},t.prototype.toHexString=function(){var t=255*this.r|0,e=255*this.g|0,n=255*this.b|0;return"#"+i.Scalar.ToHex(t)+i.Scalar.ToHex(e)+i.Scalar.ToHex(n)},t.prototype.toLinearSpace=function(){var e=new t;return this.toLinearSpaceToRef(e),e},t.prototype.toLinearSpaceToRef=function(t){return t.r=Math.pow(this.r,o.ToLinearSpace),t.g=Math.pow(this.g,o.ToLinearSpace),t.b=Math.pow(this.b,o.ToLinearSpace),this},t.prototype.toGammaSpace=function(){var e=new t;return this.toGammaSpaceToRef(e),e},t.prototype.toGammaSpaceToRef=function(t){return t.r=Math.pow(this.r,o.ToGammaSpace),t.g=Math.pow(this.g,o.ToGammaSpace),t.b=Math.pow(this.b,o.ToGammaSpace),this},t.prototype.toJSON=function(){return{r:this.r,g:this.g,b:this.b}},t}();e.Color3=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=function(){function t(t){this._length=0,this._points=t,this._length=this._computeLength(t)}return t.CreateQuadraticBezier=function(e,n,r,i){i=i>2?i:3;for(var s=new Array,a=function(t,e,n,o){return(1-t)*(1-t)*e+2*t*(1-t)*n+t*t*o},p=0;p<=i;p++)s.push(new o.Vector3(a(p/i,e.x,n.x,r.x),a(p/i,e.y,n.y,r.y),a(p/i,e.z,n.z,r.z)));return new t(s)},t.CreateCubicBezier=function(e,n,r,i,s){s=s>3?s:4;for(var a=new Array,p=function(t,e,n,o,r){return(1-t)*(1-t)*(1-t)*e+3*t*(1-t)*(1-t)*n+3*t*t*(1-t)*o+t*t*t*r},u=0;u<=s;u++)a.push(new o.Vector3(p(u/s,e.x,n.x,r.x,i.x),p(u/s,e.y,n.y,r.y,i.y),p(u/s,e.z,n.z,r.z,i.z)));return new t(a)},t.CreateHermiteSpline=function(e,n,r,i,s){for(var a=new Array,p=1/s,u=0;u<=s;u++)a.push(o.Vector3.Hermite(e,n,r,i,u*p));return new t(a)},t.CreateCatmullRomSpline=function(e,n,r){var i=new Array,s=1/n,a=0;if(r){for(var p=e.length,u=0;u<p;u++){a=0;for(var c=0;c<n;c++)i.push(o.Vector3.CatmullRom(e[u%p],e[(u+1)%p],e[(u+2)%p],e[(u+3)%p],a)),a+=s}i.push(i[0])}else{var l=new Array;l.push(e[0].clone()),Array.prototype.push.apply(l,e),l.push(e[e.length-1].clone());u=0;for(u=0;u<l.length-3;u++){a=0;for(c=0;c<n;c++)i.push(o.Vector3.CatmullRom(l[u],l[u+1],l[u+2],l[u+3],a)),a+=s}u--,i.push(o.Vector3.CatmullRom(l[u],l[u+1],l[u+2],l[u+3],a))}return new t(i)},t.prototype.getPoints=function(){return this._points},t.prototype.length=function(){return this._length},t.prototype.continue=function(e){for(var n=this._points[this._points.length-1],o=this._points.slice(),r=e.getPoints(),i=1;i<r.length;i++)o.push(r[i].subtract(r[0]).add(n));return new t(o)},t.prototype._computeLength=function(t){for(var e=0,n=1;n<t.length;n++)e+=t[n].subtract(t[n-1]).length();return e},t}();e.Curve3=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(24),r=function(){function t(){}return t.GetPlanes=function(e){for(var n=[],r=0;r<6;r++)n.push(new o.Plane(0,0,0,0));return t.GetPlanesToRef(e,n),n},t.GetNearPlaneToRef=function(t,e){var n=t.m;e.normal.x=n[3]+n[2],e.normal.y=n[7]+n[6],e.normal.z=n[11]+n[10],e.d=n[15]+n[14],e.normalize()},t.GetFarPlaneToRef=function(t,e){var n=t.m;e.normal.x=n[3]-n[2],e.normal.y=n[7]-n[6],e.normal.z=n[11]-n[10],e.d=n[15]-n[14],e.normalize()},t.GetLeftPlaneToRef=function(t,e){var n=t.m;e.normal.x=n[3]+n[0],e.normal.y=n[7]+n[4],e.normal.z=n[11]+n[8],e.d=n[15]+n[12],e.normalize()},t.GetRightPlaneToRef=function(t,e){var n=t.m;e.normal.x=n[3]-n[0],e.normal.y=n[7]-n[4],e.normal.z=n[11]-n[8],e.d=n[15]-n[12],e.normalize()},t.GetTopPlaneToRef=function(t,e){var n=t.m;e.normal.x=n[3]-n[1],e.normal.y=n[7]-n[5],e.normal.z=n[11]-n[9],e.d=n[15]-n[13],e.normalize()},t.GetBottomPlaneToRef=function(t,e){var n=t.m;e.normal.x=n[3]+n[1],e.normal.y=n[7]+n[5],e.normal.z=n[11]+n[9],e.d=n[15]+n[13],e.normalize()},t.GetPlanesToRef=function(e,n){t.GetNearPlaneToRef(e,n[0]),t.GetFarPlaneToRef(e,n[1]),t.GetLeftPlaneToRef(e,n[2]),t.GetRightPlaneToRef(e,n[3]),t.GetTopPlaneToRef(e,n[4]),t.GetBottomPlaneToRef(e,n[5])},t}();e.Frustum=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(14),r=n(22),i=n(2),s=function(){function t(t,e){this.closed=!1,this._points=new Array,this._length=0,this._points.push(new o.Vector2(t,e))}return t.StartingAt=function(e,n){return new t(e,n)},t.prototype.addLineTo=function(t,e){if(this.closed)return this;var n=new o.Vector2(t,e),r=this._points[this._points.length-1];return this._points.push(n),this._length+=n.subtract(r).length(),this},t.prototype.addArcTo=function(t,e,n,s,a){if(void 0===a&&(a=36),this.closed)return this;var p=this._points[this._points.length-1],u=new o.Vector2(t,e),c=new o.Vector2(n,s),l=new r.Arc2(p,u,c),h=l.angle.radians()/a;l.orientation===i.Orientation.CW&&(h*=-1);for(var f=l.startAngle.radians()+h,d=0;d<a;d++){var y=Math.cos(f)*l.radius+l.centerPoint.x,v=Math.sin(f)*l.radius+l.centerPoint.y;this.addLineTo(y,v),f+=h}return this},t.prototype.close=function(){return this.closed=!0,this},t.prototype.length=function(){var t=this._length;if(!this.closed){var e=this._points[this._points.length-1];t+=this._points[0].subtract(e).length()}return t},t.prototype.getPoints=function(){return this._points},t.prototype.getPointAtLengthPosition=function(t){if(t<0||t>1)return o.Vector2.Zero();for(var e=t*this.length(),n=0,r=0;r<this._points.length;r++){var i=(r+1)%this._points.length,s=this._points[r],a=this._points[i].subtract(s),p=a.length()+n;if(e>=n&&e<=p){var u=a.normalize(),c=e-n;return new o.Vector2(s.x+u.x*c,s.y+u.y*c)}n=p}return o.Vector2.Zero()},t}();e.Path2=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=n(2),i=n(6),s=function(){function t(t,e,n){void 0===e&&(e=null),this.path=t,this._curve=new Array,this._distances=new Array,this._tangents=new Array,this._normals=new Array,this._binormals=new Array;for(var o=0;o<t.length;o++)this._curve[o]=t[o].clone();this._raw=n||!1,this._compute(e)}return t.prototype.getCurve=function(){return this._curve},t.prototype.getTangents=function(){return this._tangents},t.prototype.getNormals=function(){return this._normals},t.prototype.getBinormals=function(){return this._binormals},t.prototype.getDistances=function(){return this._distances},t.prototype.update=function(t,e){void 0===e&&(e=null);for(var n=0;n<t.length;n++)this._curve[n].x=t[n].x,this._curve[n].y=t[n].y,this._curve[n].z=t[n].z;return this._compute(e),this},t.prototype._compute=function(t){var e=this._curve.length;this._tangents[0]=this._getFirstNonNullVector(0),this._raw||this._tangents[0].normalize(),this._tangents[e-1]=this._curve[e-1].subtract(this._curve[e-2]),this._raw||this._tangents[e-1].normalize();var n,r,i,s,a=this._tangents[0],p=this._normalVector(this._curve[0],a,t);this._normals[0]=p,this._raw||this._normals[0].normalize(),this._binormals[0]=o.Vector3.Cross(a,this._normals[0]),this._raw||this._binormals[0].normalize(),this._distances[0]=0;for(var u=1;u<e;u++)n=this._getLastNonNullVector(u),u<e-1&&(r=this._getFirstNonNullVector(u),this._tangents[u]=n.add(r),this._tangents[u].normalize()),this._distances[u]=this._distances[u-1]+n.length(),i=this._tangents[u],s=this._binormals[u-1],this._normals[u]=o.Vector3.Cross(s,i),this._raw||this._normals[u].normalize(),this._binormals[u]=o.Vector3.Cross(i,this._normals[u]),this._raw||this._binormals[u].normalize()},t.prototype._getFirstNonNullVector=function(t){for(var e=1,n=this._curve[t+e].subtract(this._curve[t]);0===n.length()&&t+e+1<this._curve.length;)e++,n=this._curve[t+e].subtract(this._curve[t]);return n},t.prototype._getLastNonNullVector=function(t){for(var e=1,n=this._curve[t].subtract(this._curve[t-e]);0===n.length()&&t>e+1;)e++,n=this._curve[t].subtract(this._curve[t-e]);return n},t.prototype._normalVector=function(t,e,n){var s,a=e.length();if(0===a&&(a=1),null==n){var p=void 0;p=i.Scalar.WithinEpsilon(Math.abs(e.y)/a,1,r.Epsilon)?i.Scalar.WithinEpsilon(Math.abs(e.x)/a,1,r.Epsilon)?i.Scalar.WithinEpsilon(Math.abs(e.z)/a,1,r.Epsilon)?o.Vector3.Zero():new o.Vector3(0,0,1):new o.Vector3(1,0,0):new o.Vector3(0,-1,0),s=o.Vector3.Cross(e,p)}else s=o.Vector3.Cross(e,n),o.Vector3.CrossToRef(s,e,s);return s.normalize(),s},t}();e.Path3D=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){this.width=t,this.height=e}return Object.defineProperty(t.prototype,"surface",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),t.Zero=function(){return new t(0,0)},t.Lerp=function(e,n,o){return new t(e.width+(n.width-e.width)*o,e.height+(n.height-e.height)*o)},t.prototype.toString=function(){return"{W: "+this.width+", H: "+this.height+"}"},t.prototype.getClassName=function(){return"Size"},t.prototype.getHashCode=function(){var t=this.width||0;return t=397*t^(this.height||0)},t.prototype.copyFrom=function(t){this.width=t.width,this.height=t.height},t.prototype.copyFromFloats=function(t,e){return this.width=t,this.height=e,this},t.prototype.set=function(t,e){return this.copyFromFloats(t,e)},t.prototype.multiplyByFloats=function(e,n){return new t(this.width*e,this.height*n)},t.prototype.clone=function(){return new t(this.width,this.height)},t.prototype.equals=function(t){return!!t&&(this.width===t.width&&this.height===t.height)},t.prototype.add=function(e){return new t(this.width+e.width,this.height+e.height)},t.prototype.subtract=function(e){return new t(this.width-e.width,this.height-e.height)},t}();e.Size=o},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),a=n(4),p=function(t){function e(e){var n=t.call(this)||this;return n.loop=!1,n.volume=1,n.url=e,n}return r(e,t),i([s.ObservableComponent.readonly],e.prototype,"url",void 0),i([s.ObservableComponent.field],e.prototype,"loop",void 0),i([s.ObservableComponent.field],e.prototype,"loadingCompleteEventId",void 0),i([s.ObservableComponent.field],e.prototype,"volume",void 0),e=i([s.DisposableComponent("engine.AudioClip",a.CLASS_ID.AUDIO_CLIP)],e)}(s.ObservableComponent);e.AudioClip=p;var u=function(t){function e(e){var n=t.call(this)||this;if(n.audioClip=e,n.loop=!1,n.volume=1,n.playing=!1,n.pitch=1,!(e instanceof p))throw new Error("Trying to create AudioSource(AudioClip) with an invalid AudioClip");return n.audioClipId=s.getComponentId(e),n}return r(e,t),e.prototype.playOnce=function(){return this.playing=!0,this.dirty=!0,this.data.nonce=Math.random(),this},i([s.ObservableComponent.readonly],e.prototype,"audioClipId",void 0),i([s.ObservableComponent.field],e.prototype,"loop",void 0),i([s.ObservableComponent.field],e.prototype,"volume",void 0),i([s.ObservableComponent.field],e.prototype,"playing",void 0),i([s.ObservableComponent.field],e.prototype,"pitch",void 0),e=i([s.Component("engine.AudioSource",a.CLASS_ID.AUDIO_SOURCE)],e)}(s.ObservableComponent);e.AudioSource=u},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),a=n(4);!function(t){t.MOVE="MOVE",t.ROTATE="ROTATE",t.SCALE="SCALE",t.NONE="NONE"}(e.Gizmo||(e.Gizmo={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="gizmoEvent",e}return r(e,t),i([s.ObservableComponent.readonly],e.prototype,"type",void 0),e=i([s.Component("engine.gizmoEvent",a.CLASS_ID.UUID_CALLBACK)],e)}(a.OnUUIDEvent);e.OnGizmoEvent=p;var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.position=!0,e.rotation=!0,e.scale=!0,e.cycle=!0,e.localReference=!1,e}return r(e,t),i([s.ObservableComponent.field],e.prototype,"position",void 0),i([s.ObservableComponent.field],e.prototype,"rotation",void 0),i([s.ObservableComponent.field],e.prototype,"scale",void 0),i([s.ObservableComponent.field],e.prototype,"cycle",void 0),i([s.ObservableComponent.field],e.prototype,"selectedGizmo",void 0),i([s.ObservableComponent.field],e.prototype,"localReference",void 0),e=i([s.Component("engine.gizmos",a.CLASS_ID.GIZMOS)],e)}(s.ObservableComponent);e.Gizmos=u},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),a=n(4),p=n(5),u=function(t){function e(e){var n=t.call(this)||this;return n.name=null,n.visible=!0,n.opacity=1,n.hAlign="center",n.vAlign="center",n.width="100px",n.height="50px",n.positionX="0px",n.positionY="0px",n.isPointerBlocker=!0,e&&(n._parent=e,n.data.parentComponent=s.getComponentId(e)),n}return r(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentComponent",{get:function(){return this.data.parentComponent},enumerable:!0,configurable:!0}),i([s.ObservableComponent.field],e.prototype,"name",void 0),i([s.ObservableComponent.field],e.prototype,"visible",void 0),i([s.ObservableComponent.field],e.prototype,"opacity",void 0),i([s.ObservableComponent.field],e.prototype,"hAlign",void 0),i([s.ObservableComponent.field],e.prototype,"vAlign",void 0),i([s.ObservableComponent.uiValue],e.prototype,"width",void 0),i([s.ObservableComponent.uiValue],e.prototype,"height",void 0),i([s.ObservableComponent.uiValue],e.prototype,"positionX",void 0),i([s.ObservableComponent.uiValue],e.prototype,"positionY",void 0),i([s.ObservableComponent.field],e.prototype,"isPointerBlocker",void 0),e}(s.ObservableComponent);e.UIShape=u;var c=function(t){function e(){return t.call(this,null)||this}return r(e,t),e=i([s.DisposableComponent("engine.shape",a.CLASS_ID.UI_FULLSCREEN_SHAPE)],e)}(u);e.UIFullScreen=c;var l=function(t){function e(){return t.call(this,null)||this}return r(e,t),e=i([s.DisposableComponent("engine.shape",a.CLASS_ID.UI_WORLD_SPACE_SHAPE)],e)}(u);e.UIWorldSpace=l;var h=function(t){function e(){return t.call(this,null)||this}return r(e,t),e=i([s.DisposableComponent("engine.shape",a.CLASS_ID.UI_SCREEN_SPACE_SHAPE)],e)}(u);e.UICanvas=h;var f,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.adaptWidth=!1,e.adaptHeight=!1,e.thickness=0,e.color=p.Color4.Clear(),e.alignmentUsesSize=!0,e}return r(e,t),i([s.ObservableComponent.field],e.prototype,"adaptWidth",void 0),i([s.ObservableComponent.field],e.prototype,"adaptHeight",void 0),i([s.ObservableComponent.field],e.prototype,"thickness",void 0),i([s.ObservableComponent.field],e.prototype,"color",void 0),i([s.ObservableComponent.field],e.prototype,"alignmentUsesSize",void 0),e=i([s.DisposableComponent("engine.shape",a.CLASS_ID.UI_CONTAINER_RECT)],e)}(u);e.UIContainerRect=d,function(t){t[t.VERTICAL=0]="VERTICAL",t[t.HORIZONTAL=1]="HORIZONTAL"}(f=e.UIStackOrientation||(e.UIStackOrientation={}));var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.adaptWidth=!0,e.adaptHeight=!0,e.color=p.Color4.Clear(),e.stackOrientation=f.VERTICAL,e.spacing=0,e}return r(e,t),i([s.ObservableComponent.field],e.prototype,"adaptWidth",void 0),i([s.ObservableComponent.field],e.prototype,"adaptHeight",void 0),i([s.ObservableComponent.field],e.prototype,"color",void 0),i([s.ObservableComponent.field],e.prototype,"stackOrientation",void 0),i([s.ObservableComponent.field],e.prototype,"spacing",void 0),e=i([s.DisposableComponent("engine.shape",a.CLASS_ID.UI_CONTAINER_STACK)],e)}(u);e.UIContainerStack=y;var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fontSize=10,e.fontWeight="normal",e.thickness=0,e.cornerRadius=0,e.color=p.Color4.White(),e.background=p.Color4.White(),e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.paddingLeft=0,e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowColor=p.Color4.Black(),e.text="button",e}return r(e,t),i([s.ObservableComponent.field],e.prototype,"fontSize",void 0),i([s.ObservableComponent.field],e.prototype,"fontWeight",void 0),i([s.ObservableComponent.field],e.prototype,"thickness",void 0),i([s.ObservableComponent.field],e.prototype,"cornerRadius",void 0),i([s.ObservableComponent.field],e.prototype,"color",void 0),i([s.ObservableComponent.field],e.prototype,"background",void 0),i([s.ObservableComponent.field],e.prototype,"paddingTop",void 0),i([s.ObservableComponent.field],e.prototype,"paddingRight",void 0),i([s.ObservableComponent.field],e.prototype,"paddingBottom",void 0),i([s.ObservableComponent.field],e.prototype,"paddingLeft",void 0),i([s.ObservableComponent.field],e.prototype,"shadowBlur",void 0),i([s.ObservableComponent.field],e.prototype,"shadowOffsetX",void 0),i([s.ObservableComponent.field],e.prototype,"shadowOffsetY",void 0),i([s.ObservableComponent.field],e.prototype,"shadowColor",void 0),i([s.ObservableComponent.field],e.prototype,"text",void 0),e=i([s.DisposableComponent("engine.shape",a.CLASS_ID.UI_BUTTON_SHAPE)],e)}(u);e.UIButton=v;var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.outlineWidth=0,e.outlineColor=p.Color4.White(),e.color=p.Color4.White(),e.fontSize=10,e.fontAutoSize=!1,e.fontWeight="normal",e.value="",e.lineSpacing=0,e.lineCount=0,e.adaptWidth=!1,e.adaptHeight=!1,e.textWrapping=!1,e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowColor=p.Color4.Black(),e.hTextAlign="left",e.vTextAlign="bottom",e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.paddingLeft=0,e}return r(e,t),i([s.ObservableComponent.field],e.prototype,"outlineWidth",void 0),i([s.ObservableComponent.field],e.prototype,"outlineColor",void 0),i([s.ObservableComponent.field],e.prototype,"color",void 0),i([s.ObservableComponent.field],e.prototype,"fontSize",void 0),i([s.ObservableComponent.field],e.prototype,"fontAutoSize",void 0),i([s.ObservableComponent.field],e.prototype,"fontWeight",void 0),i([s.ObservableComponent.field],e.prototype,"value",void 0),i([s.ObservableComponent.field],e.prototype,"lineSpacing",void 0),i([s.ObservableComponent.field],e.prototype,"lineCount",void 0),i([s.ObservableComponent.field],e.prototype,"adaptWidth",void 0),i([s.ObservableComponent.field],e.prototype,"adaptHeight",void 0),i([s.ObservableComponent.field],e.prototype,"textWrapping",void 0),i([s.ObservableComponent.field],e.prototype,"shadowBlur",void 0),i([s.ObservableComponent.field],e.prototype,"shadowOffsetX",void 0),i([s.ObservableComponent.field],e.prototype,"shadowOffsetY",void 0),i([s.ObservableComponent.field],e.prototype,"shadowColor",void 0),i([s.ObservableComponent.field],e.prototype,"hTextAlign",void 0),i([s.ObservableComponent.field],e.prototype,"vTextAlign",void 0),i([s.ObservableComponent.field],e.prototype,"paddingTop",void 0),i([s.ObservableComponent.field],e.prototype,"paddingRight",void 0),i([s.ObservableComponent.field],e.prototype,"paddingBottom",void 0),i([s.ObservableComponent.field],e.prototype,"paddingLeft",void 0),e=i([s.DisposableComponent("engine.shape",a.CLASS_ID.UI_TEXT_SHAPE)],e)}(u);e.UIText=m;var b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.outlineWidth=0,e.outlineColor=p.Color4.Black(),e.color=p.Color4.Clear(),e.thickness=1,e.fontSize=10,e.fontWeight="normal",e.value="",e.placeholderColor=p.Color4.White(),e.placeholder="",e.margin=10,e.maxWidth=100,e.hTextAlign="left",e.vTextAlign="bottom",e.autoStretchWidth=!0,e.background=p.Color4.Black(),e.focusedBackground=p.Color4.Black(),e.textWrapping=!1,e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowColor=p.Color4.White(),e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.paddingLeft=0,e.onTextSubmit=null,e.onChanged=null,e.onFocus=null,e.onBlur=null,e}return r(e,t),i([s.ObservableComponent.field],e.prototype,"outlineWidth",void 0),i([s.ObservableComponent.field],e.prototype,"outlineColor",void 0),i([s.ObservableComponent.field],e.prototype,"color",void 0),i([s.ObservableComponent.field],e.prototype,"thickness",void 0),i([s.ObservableComponent.field],e.prototype,"fontSize",void 0),i([s.ObservableComponent.field],e.prototype,"fontWeight",void 0),i([s.ObservableComponent.field],e.prototype,"value",void 0),i([s.ObservableComponent.field],e.prototype,"placeholderColor",void 0),i([s.ObservableComponent.field],e.prototype,"placeholder",void 0),i([s.ObservableComponent.field],e.prototype,"margin",void 0),i([s.ObservableComponent.field],e.prototype,"maxWidth",void 0),i([s.ObservableComponent.field],e.prototype,"hTextAlign",void 0),i([s.ObservableComponent.field],e.prototype,"vTextAlign",void 0),i([s.ObservableComponent.field],e.prototype,"autoStretchWidth",void 0),i([s.ObservableComponent.field],e.prototype,"background",void 0),i([s.ObservableComponent.field],e.prototype,"focusedBackground",void 0),i([s.ObservableComponent.field],e.prototype,"textWrapping",void 0),i([s.ObservableComponent.field],e.prototype,"shadowBlur",void 0),i([s.ObservableComponent.field],e.prototype,"shadowOffsetX",void 0),i([s.ObservableComponent.field],e.prototype,"shadowOffsetY",void 0),i([s.ObservableComponent.field],e.prototype,"shadowColor",void 0),i([s.ObservableComponent.field],e.prototype,"paddingTop",void 0),i([s.ObservableComponent.field],e.prototype,"paddingRight",void 0),i([s.ObservableComponent.field],e.prototype,"paddingBottom",void 0),i([s.ObservableComponent.field],e.prototype,"paddingLeft",void 0),i([a.OnUUIDEvent.uuidEvent],e.prototype,"onTextSubmit",void 0),i([a.OnUUIDEvent.uuidEvent],e.prototype,"onChanged",void 0),i([a.OnUUIDEvent.uuidEvent],e.prototype,"onFocus",void 0),i([a.OnUUIDEvent.uuidEvent],e.prototype,"onBlur",void 0),e=i([s.DisposableComponent("engine.shape",a.CLASS_ID.UI_INPUT_TEXT_SHAPE)],e)}(u);e.UIInputText=b;var g=function(t){function e(e,n){var o=t.call(this,e)||this;return o.sourceLeft=0,o.sourceTop=0,o.sourceWidth=1,o.sourceHeight=1,o.paddingTop=0,o.paddingRight=0,o.paddingBottom=0,o.paddingLeft=0,o.sizeInPixels=!0,o.onClick=null,o.source=n,o}return r(e,t),i([s.ObservableComponent.field],e.prototype,"sourceLeft",void 0),i([s.ObservableComponent.field],e.prototype,"sourceTop",void 0),i([s.ObservableComponent.field],e.prototype,"sourceWidth",void 0),i([s.ObservableComponent.field],e.prototype,"sourceHeight",void 0),i([s.ObservableComponent.component],e.prototype,"source",void 0),i([s.ObservableComponent.field],e.prototype,"paddingTop",void 0),i([s.ObservableComponent.field],e.prototype,"paddingRight",void 0),i([s.ObservableComponent.field],e.prototype,"paddingBottom",void 0),i([s.ObservableComponent.field],e.prototype,"paddingLeft",void 0),i([s.ObservableComponent.field],e.prototype,"sizeInPixels",void 0),i([a.OnUUIDEvent.uuidEvent],e.prototype,"onClick",void 0),e=i([s.DisposableComponent("engine.shape",a.CLASS_ID.UI_IMAGE_SHAPE)],e)}(u);e.UIImage=g;var _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.valueX=0,e.valueY=0,e.borderColor=p.Color4.White(),e.backgroundColor=p.Color4.Clear(),e.isHorizontal=!1,e.isVertical=!1,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.paddingLeft=0,e.onChanged=null,e}return r(e,t),i([s.ObservableComponent.field],e.prototype,"valueX",void 0),i([s.ObservableComponent.field],e.prototype,"valueY",void 0),i([s.ObservableComponent.field],e.prototype,"borderColor",void 0),i([s.ObservableComponent.field],e.prototype,"backgroundColor",void 0),i([s.ObservableComponent.field],e.prototype,"isHorizontal",void 0),i([s.ObservableComponent.field],e.prototype,"isVertical",void 0),i([s.ObservableComponent.field],e.prototype,"paddingTop",void 0),i([s.ObservableComponent.field],e.prototype,"paddingRight",void 0),i([s.ObservableComponent.field],e.prototype,"paddingBottom",void 0),i([s.ObservableComponent.field],e.prototype,"paddingLeft",void 0),i([a.OnUUIDEvent.uuidEvent],e.prototype,"onChanged",void 0),e=i([s.DisposableComponent("engine.shape",a.CLASS_ID.UI_SLIDER_SHAPE)],e)}(u);e.UIScrollRect=_},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),a=n(4),p=function(t,e,n){void 0===n&&(n=[]),this.category=t,this.contentName=e,this.contents=n};e.Wearable=p;var u=function(t){this.color=t};e.Skin=u;var c=function(t){this.color=t};e.Hair=c;var l=function(t){this.texture=t};e.Face=l;var h=function(t,e,n){this.texture=t,this.mask=e,this.color=n};e.Eyes=h;var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.useDummyModel=!1,e}var n;return r(e,t),n=e,e.Dummy=function(){var t=new n;return t.useDummyModel=!0,t},i([s.ObservableComponent.field],e.prototype,"id",void 0),i([s.ObservableComponent.field],e.prototype,"baseUrl",void 0),i([s.ObservableComponent.field],e.prototype,"name",void 0),i([s.ObservableComponent.field],e.prototype,"bodyShape",void 0),i([s.ObservableComponent.field],e.prototype,"wearables",void 0),i([s.ObservableComponent.field],e.prototype,"skin",void 0),i([s.ObservableComponent.field],e.prototype,"hair",void 0),i([s.ObservableComponent.field],e.prototype,"eyes",void 0),i([s.ObservableComponent.field],e.prototype,"eyebrows",void 0),i([s.ObservableComponent.field],e.prototype,"mouth",void 0),i([s.ObservableComponent.field],e.prototype,"useDummyModel",void 0),e=n=i([s.Component("engine.avatarShape",a.CLASS_ID.AVATAR_SHAPE)],e)}(s.ObservableComponent);e.AvatarShape=f},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),a=n(13),p=n(4),u=function(t){function e(e){var n=t.call(this,e)||this;return n.type="onFocus",a.uuidEventSystem.handlerMap[n.uuid]=n,n}return r(e,t),i([s.ObservableComponent.readonly],e.prototype,"type",void 0),e=i([s.Component("engine.onFocus",p.CLASS_ID.UUID_CALLBACK)],e)}(p.OnUUIDEvent);e.OnFocus=u;var c=function(t){function e(e){var n=t.call(this,e)||this;return n.type="onTextSubmit",a.uuidEventSystem.handlerMap[n.uuid]=n,n}return r(e,t),i([s.ObservableComponent.readonly],e.prototype,"type",void 0),e=i([s.Component("engine.onTextSubmit",p.CLASS_ID.UUID_CALLBACK)],e)}(p.OnUUIDEvent);e.OnTextSubmit=c;var l=function(t){function e(e){var n=t.call(this,e)||this;return n.type="onBlur",a.uuidEventSystem.handlerMap[n.uuid]=n,n}return r(e,t),i([s.ObservableComponent.readonly],e.prototype,"type",void 0),e=i([s.Component("engine.onBlur",p.CLASS_ID.UUID_CALLBACK)],e)}(p.OnUUIDEvent);e.OnBlur=l;var h=function(t){function e(e){var n=t.call(this,e)||this;return n.type="onClick",a.uuidEventSystem.handlerMap[n.uuid]=n,n}return r(e,t),i([s.ObservableComponent.readonly],e.prototype,"type",void 0),e=i([s.Component("engine.onClick",p.CLASS_ID.UUID_CALLBACK)],e)}(p.OnUUIDEvent);e.OnClick=h;var f=function(t){function e(e){var n=t.call(this,e)||this;return n.type="onEnter",a.uuidEventSystem.handlerMap[n.uuid]=n,n}return r(e,t),i([s.ObservableComponent.readonly],e.prototype,"type",void 0),e=i([s.Component("engine.onEnter",p.CLASS_ID.UUID_CALLBACK)],e)}(p.OnUUIDEvent);e.OnEnter=f;var d=function(t){function e(e){var n=t.call(this,e)||this;return n.type="onChange",a.uuidEventSystem.handlerMap[n.uuid]=n,n}return r(e,t),i([s.ObservableComponent.readonly],e.prototype,"type",void 0),e=i([s.Component("engine.onChange",p.CLASS_ID.UUID_CALLBACK)],e)}(p.OnUUIDEvent);e.OnChanged=d;var y=function(t){function e(e){var n=t.call(this,e)||this;return n.type="pointerDown",a.uuidEventSystem.handlerMap[n.uuid]=n,n}return r(e,t),i([s.ObservableComponent.readonly],e.prototype,"type",void 0),e=i([s.Component("engine.pointerDown",p.CLASS_ID.UUID_CALLBACK)],e)}(p.OnUUIDEvent);e.OnPointerDown=y;var v=function(t){function e(e){var n=t.call(this,e)||this;return n.type="pointerUp",a.uuidEventSystem.handlerMap[n.uuid]=n,n}return r(e,t),i([s.ObservableComponent.readonly],e.prototype,"type",void 0),e=i([s.Component("engine.pointerUp",p.CLASS_ID.UUID_CALLBACK)],e)}(p.OnUUIDEvent);e.OnPointerUp=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(19),r=n(1),i=null,s=null,a=null;function p(){return a||(a=new o.Observable),a}e.getMessageObserver=p;var u=function(){function t(){var t=this;this.messageQueue=[],this.connected=!1,this.flushing=!1,function(){if(!s){(s=dcl.loadModule("@decentraland/CommunicationsController")).then(function(t){i=t});var t=p();dcl.subscribe("comms"),dcl.onEvent(function(e){"comms"===e.type&&(dcl.log("Receiving comms message ",e.data),t.notifyObservers(e.data))})}return s}().then(function(e){t.connected=!0,t.flush()})}return t.prototype.on=function(t,e){return p().add(function(n){try{var o=JSON.parse(n.message);o.message===t&&e(o.payload,n.sender)}catch(n){dcl.error("Error parsing comms message "+n.message,n)}})},t.prototype.sendRaw=function(t){this.messageQueue.push(t),this.connected&&this.flush()},t.prototype.emit=function(t,e){var n=JSON.stringify({message:t,payload:e});this.sendRaw(n),p().notifyObservers({message:n,sender:"self"})},t.prototype.flush=function(){var t=this;if(0!==this.messageQueue.length&&this.connected&&i&&!this.flushing){var e=this.messageQueue.shift();this.flushing=!0,dcl.callRpc(i.rpcHandle,"send",[e]).then(function(e){t.flushing=!1,t.flush()},function(e){t.flushing=!1,r.error("Error flushing MessageBus",e)})}},t}();e.MessageBus=u}]));var loader;(function(e){"use strict";var r=1;var d=2;var i=[];var f={baseUrl:""};var c={};function n(e){if(typeof e==="object"){for(var n in e){if(e.hasOwnProperty(n)){f[n]=e[n]}}}}e.config=n;function l(t,e,o){var n=arguments.length;if(n===1){o=t;e=["require","exports","module"];t=null}else if(n===2){if(f.toString.call(t)==="[object Array]"){o=e;e=t;t=null}else{o=e;e=["require","exports","module"]}}if(!t){i.push([e,o]);return}function r(){var e,n;if(c[t]){e=c[t].handlers;n=c[t].context}var r=c[t]=typeof o==="function"?o.apply(null,i.slice.call(arguments,0))||c[t]||{}:o;r.dclamd=d;r.context=n;for(var l=0,a=e?e.length:0;l<a;l++){e[l](r)}}u(e,r,t)}e.define=l;(function(e){e.amd={}})(l=e.define||(e.define={}));function u(r,l,a){var t=[];var o=0;var i=false;if(typeof r==="string"){if(c[r]&&c[r].dclamd===d){return c[r]}throw new Error(r+" has not been defined. Please include it as a dependency in "+a+"'s define()")}var f=r.length;var e=function(n){switch(r[n]){case"require":var e=function(e,n){return u(e,n,a)};e.toUrl=function(e){return p(e,a)};t[n]=e;o++;break;case"exports":t[n]=c[a]||(c[a]={});o++;break;case"module":t[n]={id:a,uri:p(a)};o++;break;case c[a]?c[a].context:"":t[n]=c[c[a].context];o++;break;default:s(r[n],function(e){t[n]=e;o++;if(o===f&&l){i=true;l.apply(null,t)}if(c[r[n]]){c[r[n]].dclamd=d}},a)}};for(var n=0;n<f;n++){e(n)}if(!i&&o===f&&l){l.apply(null,t)}}e.require=u;function t(e,n){return function(){return dcl.callRpc(e,n.name,i.slice.call(arguments,0))}}function s(e,a,n){e=n?p(e,n):e;if(c[e]){if(c[e].dclamd===r){a&&c[e].handlers.push(a)}else{a&&a(c[e])}return}else{c[e]={name:e,dclamd:r,handlers:[a],context:n}}if(e.indexOf("@")===0){if(typeof dcl!=="undefined"){dcl.loadModule(e).then(function(e){var n={};for(var r in e.methods){var l=e.methods[r];n[l.name]=t(e.rpcHandle,l)}a(n)})}}}if(typeof dcl!=="undefined"){dcl.onStart(function(){var e=[];for(var n in c){if(c[n]&&c[n].dclamd===r){e.push(c[n])}}if(e.length){throw new Error("These modules didn't load: "+e.map(function(e){return e.name}).join(", "))}})}function p(e,n){var r=false;switch(e){case"require":case"exports":case"module":return e}var l=(n||f.baseUrl).split("/");l.pop();var a=e.split("/");var t=a.length;while(--t){switch(e[0]){case"..":l.pop();case".":case"":a.shift();r=true}}return(l.length&&r?l.join("/")+"/":"")+a.join("/")}u.toUrl=p})(loader||(loader={}));global=typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof this!=="undefined"?this:null;if(!global)throw new Error("unknown global context");global.define=loader.define;global.dclamd=loader;eval('var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === "number") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);\r\n};\r\ndefine("src/modules/entity_wrapper", ["require", "exports"], function (require, exports) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var EntityWrapper = /** @class */ (function () {\r\n        function EntityWrapper(log, transform, parent) {\r\n            this.log = log;\r\n            this.entity = new Entity();\r\n            this.entity.addComponent(transform);\r\n            var shape = this.getShape();\r\n            if (shape)\r\n                this.entity.addComponent(shape);\r\n            var material = this.getMaterial();\r\n            if (material)\r\n                this.entity.addComponent(material);\r\n            if (parent) {\r\n                this.entity.setParent(parent);\r\n                // } else {\r\n                //     engine.addEntity(this.entity);\r\n            }\r\n        }\r\n        EntityWrapper.prototype.getEntity = function () {\r\n            return this.entity;\r\n        };\r\n        return EntityWrapper;\r\n    }());\r\n    exports.EntityWrapper = EntityWrapper;\r\n});\r\ndefine("src/modules/land", ["require", "exports", "src/modules/entity_wrapper"], function (require, exports, entity_wrapper_1) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var modelFile = \'models/land1.gltf\';\r\n    var Land = /** @class */ (function (_super) {\r\n        __extends(Land, _super);\r\n        function Land(log, transform) {\r\n            return _super.call(this, log, transform) || this;\r\n        }\r\n        Land.prototype.getMaterial = function () {\r\n            return null;\r\n        };\r\n        Land.prototype.getShape = function () {\r\n            return new GLTFShape(modelFile);\r\n        };\r\n        return Land;\r\n    }(entity_wrapper_1.EntityWrapper));\r\n    exports.Land = Land;\r\n});\r\ndefine("src/modules/soundhub/soundhub", ["require", "exports"], function (require, exports) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var SoundHub = /** @class */ (function () {\r\n        function SoundHub(log) {\r\n            // emit the event when a note is played (key pressed, etc..)\r\n            // may have several controllers for the same note/instrument\r\n            this._notes = {};\r\n            // store an array of \'onPlayedNote()\' callbacks, per instrument\r\n            this._recorders = {};\r\n            this.log = log;\r\n        }\r\n        /// Method called by an instrument to register its notes, allowing the hub to be warned when the note is played (for recording)\r\n        /// and make them playing (for replaying)\r\n        SoundHub.prototype.registerNoteController = function (noteController) {\r\n            var _this = this;\r\n            // register to the onPlayedNote event of the note\r\n            noteController.registerOnPlayedNote(function (instrument, note) { _this.onPlayedNote(instrument, note); });\r\n        };\r\n        SoundHub.prototype.registerNotePlayer = function (notePlayer) {\r\n            var note = notePlayer.getNote();\r\n            var instrument = notePlayer.getInstrument();\r\n            this.log("SoundHub: registering note player for " + note + " for instrument " + instrument);\r\n            // store the callback to the play() method of the note\r\n            if (!this._notes[instrument])\r\n                this._notes[instrument] = {};\r\n            this._notes[instrument][note] = (function () { notePlayer.play(); });\r\n        };\r\n        /// Method called by a client to be notified when a note is played\r\n        SoundHub.prototype.registerRecorder = function (recorder) {\r\n            var instrument = recorder.getInstrument();\r\n            this.log("SoundHub: registering recorder for instrument " + instrument);\r\n            if (!this._recorders[instrument])\r\n                this._recorders[instrument] = [];\r\n            this._recorders[instrument].push((function (note) { recorder.onPlayedNote(note); }));\r\n        };\r\n        /// Method called to ask the instrument to play a note\r\n        SoundHub.prototype.onPlayNote = function (instrument, note) {\r\n            this.log("SoundHub: note " + note + " has to be played on instrument " + instrument);\r\n            var play = this._notes[instrument][note];\r\n            if (play)\r\n                play();\r\n        };\r\n        // called back when a note is played on the instrument\r\n        SoundHub.prototype.onPlayedNote = function (instrument, note) {\r\n            this.log("SoundHub: onPlayedNote() : " + note + " is playing on instrument " + instrument);\r\n            // warn all recorders for this instrument\r\n            var instrumentRecorders = this._recorders[instrument];\r\n            if (instrumentRecorders) {\r\n                instrumentRecorders.forEach(function (callback) {\r\n                    callback(note);\r\n                });\r\n            }\r\n        };\r\n        return SoundHub;\r\n    }());\r\n    exports.SoundHub = SoundHub;\r\n    var RecorderForTest = /** @class */ (function () {\r\n        function RecorderForTest(log, instrument, soundHub) {\r\n            var _this = this;\r\n            this.onPlayedNote = function (note) {\r\n                _this.log("recorder for instrument " + _this.instrument + " is recording note " + note);\r\n            };\r\n            this.log = log;\r\n            this.instrument = instrument;\r\n            this.setSoundHub(soundHub);\r\n        }\r\n        RecorderForTest.prototype.setSoundHub = function (soundHub) {\r\n            soundHub.registerRecorder(this);\r\n        };\r\n        RecorderForTest.prototype.getInstrument = function () {\r\n            return this.instrument;\r\n        };\r\n        return RecorderForTest;\r\n    }());\r\n    var NoteControllerForTest = /** @class */ (function () {\r\n        function NoteControllerForTest(log, instrument, note, soundHub) {\r\n            this._onPlayedNoteCallbacks = [];\r\n            this.log = log;\r\n            this.instrument = instrument;\r\n            this.note = note;\r\n            this.setSoundHub(soundHub);\r\n        }\r\n        NoteControllerForTest.prototype.setSoundHub = function (soundHub) {\r\n            soundHub.registerNoteController(this);\r\n        };\r\n        NoteControllerForTest.prototype.registerOnPlayedNote = function (onPlayNote) {\r\n            this._onPlayedNoteCallbacks.push(onPlayNote);\r\n        };\r\n        NoteControllerForTest.prototype.getInstrument = function () {\r\n            return this.instrument;\r\n        };\r\n        NoteControllerForTest.prototype.getNote = function () {\r\n            return this.note;\r\n        };\r\n        NoteControllerForTest.prototype.playAndNotify = function () {\r\n            var _this = this;\r\n            this.log("Note " + this.note + " is playing on instrument " + this.instrument);\r\n            // Warn listeners\r\n            this._onPlayedNoteCallbacks.forEach(function (onPlayNote) {\r\n                onPlayNote.call(_this, _this.instrument, _this.note);\r\n            });\r\n        };\r\n        return NoteControllerForTest;\r\n    }());\r\n    var NotePlayerForTest = /** @class */ (function () {\r\n        function NotePlayerForTest(log, instrument, note, soundHub) {\r\n            this._onPlayedNoteCallbacks = [];\r\n            this.log = log;\r\n            this.instrument = instrument;\r\n            this.note = note;\r\n            this.setSoundHub(soundHub);\r\n        }\r\n        NotePlayerForTest.prototype.setSoundHub = function (soundHub) {\r\n            soundHub.registerNotePlayer(this);\r\n        };\r\n        NotePlayerForTest.prototype.play = function () {\r\n            this.log("Note " + this.note + " is to be played on instrument " + this.instrument);\r\n        };\r\n        NotePlayerForTest.prototype.getInstrument = function () {\r\n            return this.instrument;\r\n        };\r\n        NotePlayerForTest.prototype.getNote = function () {\r\n            return this.note;\r\n        };\r\n        return NotePlayerForTest;\r\n    }());\r\n    var SoundHubTest = /** @class */ (function () {\r\n        function SoundHubTest(log) {\r\n            this.steps = [this.step1, this.step2, this.step3, this.step4];\r\n            this.log = log;\r\n            this.soundHub = new SoundHub(log);\r\n            var recorderPiano = new RecorderForTest(this.log, \'piano\', this.soundHub);\r\n            var recorderFlute = new RecorderForTest(this.log, \'flute\', this.soundHub);\r\n            this.noteControllerPianoE2 = new NoteControllerForTest(this.log, \'piano\', \'E2\', this.soundHub);\r\n            this.noteControllerPianoE3 = new NoteControllerForTest(this.log, \'piano\', \'E3\', this.soundHub);\r\n            this.noteControllerPianoE4 = new NoteControllerForTest(this.log, \'piano\', \'E4\', this.soundHub);\r\n            this.noteControllerFluteG5 = new NoteControllerForTest(this.log, \'flute\', \'G5\', this.soundHub);\r\n        }\r\n        SoundHubTest.prototype.start = function () {\r\n            var _this = this;\r\n            this.steps.forEach(function (step) { step.call(_this); });\r\n        };\r\n        SoundHubTest.prototype.step1 = function () {\r\n            this.log("Step 1");\r\n            this.noteControllerPianoE2.playAndNotify();\r\n        };\r\n        SoundHubTest.prototype.step2 = function () {\r\n            this.log("Step 2");\r\n            this.noteControllerPianoE3.playAndNotify();\r\n        };\r\n        SoundHubTest.prototype.step3 = function () {\r\n            this.log("Step 3");\r\n            this.noteControllerPianoE4.playAndNotify();\r\n        };\r\n        SoundHubTest.prototype.step4 = function () {\r\n            this.log("Step 4");\r\n            this.noteControllerFluteG5.playAndNotify();\r\n        };\r\n        return SoundHubTest;\r\n    }());\r\n    exports.SoundHubTest = SoundHubTest;\r\n});\r\ndefine("src/modules/instruments/Instrument", ["require", "exports", "src/modules/entity_wrapper"], function (require, exports, entity_wrapper_2) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var Instrument = /** @class */ (function (_super) {\r\n        __extends(Instrument, _super);\r\n        function Instrument(log, soundHub, transform) {\r\n            var _this = _super.call(this, log, transform) || this;\r\n            _this.soundHub = soundHub;\r\n            return _this;\r\n        }\r\n        Instrument.prototype.createNotes = function (soundHub, note, noteProps) {\r\n            var _this = this;\r\n            noteProps.forEach(function (noteProp) {\r\n                _this.log("create note " + noteProp.note);\r\n                var transform = _this.getTransformForNote(noteProp);\r\n                var n = new note(log, transform, _this.entity, noteProp);\r\n                n.setSoundHub(_this.soundHub);\r\n            });\r\n            // for (let noteProp of noteProps) {\r\n            //     this.log("create note " + noteProp.note);\r\n            //     let transform = this.getTransformForNote(noteProp);\r\n            //     let n = new note(log, transform, this.entity, noteProp);\r\n            // }\r\n        };\r\n        return Instrument;\r\n    }(entity_wrapper_2.EntityWrapper));\r\n    exports.Instrument = Instrument;\r\n});\r\ndefine("src/modules/instruments/note", ["require", "exports", "src/modules/entity_wrapper"], function (require, exports, entity_wrapper_3) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var Note = /** @class */ (function (_super) {\r\n        __extends(Note, _super);\r\n        function Note(log, transform, parent, noteProp) {\r\n            var _this = _super.call(this, log, transform, parent) || this;\r\n            // **** INoteController implementation ****\r\n            _this._onPlayedNoteCallbacks = [];\r\n            _this.note = noteProp.note;\r\n            var noteShape = _this.getNoteShape(noteProp);\r\n            if (noteShape)\r\n                _this.entity.addComponentOrReplace(noteShape);\r\n            _this.entity.addComponent(new OnClick(function (e) { _this.log(JSON.stringify(e)); _this.onPressed(); }));\r\n            _this.setSound(new AudioClip(noteProp.song));\r\n            return _this;\r\n        }\r\n        Note.prototype.setSoundHub = function (soundHub) {\r\n            this.soundHub = soundHub;\r\n            soundHub.registerNotePlayer(this);\r\n            soundHub.registerNoteController(this);\r\n        };\r\n        Note.prototype.registerOnPlayedNote = function (onPlayNote) {\r\n            // allow registering to allow recording from UI\r\n            this._onPlayedNoteCallbacks.push(onPlayNote);\r\n        };\r\n        Note.prototype.getNote = function () {\r\n            return this.note;\r\n        };\r\n        Note.prototype.play = function () {\r\n            this.log("Play note " + this.note + " of instrument " + this.getInstrument());\r\n            this.entity.getComponent(AudioSource).playOnce();\r\n        };\r\n        // ****************************************\r\n        Note.prototype.notifyPlaying = function () {\r\n            var _this = this;\r\n            // Notify listeners\r\n            this._onPlayedNoteCallbacks.forEach(function (onPlayNote) {\r\n                onPlayNote.call(_this, _this.getInstrument(), _this.note);\r\n            });\r\n        };\r\n        Note.prototype.setSound = function (sound) {\r\n            var audioSource = new AudioSource(sound);\r\n            audioSource.playing = false;\r\n            this.entity.addComponentOrReplace(audioSource);\r\n        };\r\n        Note.prototype.onPressed = function () {\r\n            this.log("before play");\r\n            this.play();\r\n            this.log("before notifyPlaying");\r\n            this.notifyPlaying();\r\n            this.log("before animate");\r\n            this.animate();\r\n        };\r\n        return Note;\r\n    }(entity_wrapper_3.EntityWrapper));\r\n    exports.Note = Note;\r\n});\r\ndefine("src/modules/instruments/testInstrument", ["require", "exports", "src/modules/instruments/note", "src/modules/instruments/Instrument"], function (require, exports, note_1, Instrument_1) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var keyProps = [\r\n        { note: "A1", index: 0, song: \'sounds/piano/C4.mp3\', extras: { "type": "white" } },\r\n        { note: "A2", index: 1, song: \'sounds/piano/C4.mp3\', extras: { "type": "black" } }\r\n    ];\r\n    var instrument = \'test\';\r\n    var TestKey = /** @class */ (function (_super) {\r\n        __extends(TestKey, _super);\r\n        function TestKey(log, transform, parent, noteProp) {\r\n            return _super.call(this, log, transform, parent, noteProp) || this;\r\n        }\r\n        TestKey.prototype.getMaterial = function () {\r\n            var mat = new Material();\r\n            mat.albedoColor = Color3.Blue();\r\n            return mat;\r\n        };\r\n        TestKey.prototype.getShape = function () {\r\n            return new BoxShape();\r\n        };\r\n        TestKey.prototype.getNoteShape = function (noteProp) {\r\n            var keyType = noteProp.extras["type"];\r\n            this.log("TestKey::getNoteShape() : keyType " + keyType);\r\n            return new BoxShape();\r\n        };\r\n        TestKey.prototype.getInstrument = function () {\r\n            return instrument;\r\n        };\r\n        TestKey.prototype.animate = function () {\r\n            new TestKeyAnimation(this.log, this.entity);\r\n        };\r\n        return TestKey;\r\n    }(note_1.Note));\r\n    exports.TestKey = TestKey;\r\n    var TestInstrument = /** @class */ (function (_super) {\r\n        __extends(TestInstrument, _super);\r\n        function TestInstrument(log, soundHub, transform) {\r\n            var _this = _super.call(this, log, soundHub, transform) || this;\r\n            _this.createNotes(null, TestKey, keyProps);\r\n            return _this;\r\n        }\r\n        TestInstrument.prototype.getMaterial = function () {\r\n            var mat = new Material();\r\n            mat.albedoColor = Color3.Red();\r\n            return mat;\r\n        };\r\n        TestInstrument.prototype.getShape = function () {\r\n            return new BoxShape();\r\n        };\r\n        TestInstrument.prototype.getTransformForNote = function (noteProp) {\r\n            var index = noteProp.index;\r\n            return new Transform({\r\n                position: new Vector3(1 + index, 0.0, 0.0)\r\n            });\r\n        };\r\n        return TestInstrument;\r\n    }(Instrument_1.Instrument));\r\n    exports.TestInstrument = TestInstrument;\r\n    var TestKeyAnimation = /** @class */ (function () {\r\n        function TestKeyAnimation(log, entity) {\r\n            this.pressed = true;\r\n            this.fraction = 0;\r\n            this.log = log;\r\n            this.entity = entity;\r\n            engine.addSystem(this);\r\n            this.log("Build a new TestKeyAnimation");\r\n        }\r\n        ;\r\n        TestKeyAnimation.prototype.update = function () {\r\n            this.log("TestKeyAnimation::update()");\r\n            var transform = this.entity.getComponent(Transform);\r\n            if ((this.pressed == true) && (this.fraction < 1)) {\r\n                this.fraction += 1 / 4;\r\n            }\r\n            else {\r\n                if ((this.pressed == false) && (this.fraction > 0)) {\r\n                    this.fraction -= 1 / 2;\r\n                }\r\n            }\r\n            if (this.fraction >= 1) {\r\n                this.fraction = 1;\r\n                this.finish();\r\n            }\r\n            if (this.fraction <= 0) {\r\n                this.fraction = 0;\r\n            }\r\n            transform.rotation = Quaternion.Euler(4 * this.fraction, transform.rotation.y, transform.rotation.z);\r\n        };\r\n        TestKeyAnimation.prototype.start = function () {\r\n            this.pressed = true;\r\n        };\r\n        TestKeyAnimation.prototype.finish = function () {\r\n            engine.removeSystem(this);\r\n            this.pressed = false;\r\n        };\r\n        return TestKeyAnimation;\r\n    }());\r\n    exports.TestKeyAnimation = TestKeyAnimation;\r\n});\r\ndefine("src/modules/instruments/piano", ["require", "exports", "src/modules/instruments/Instrument", "src/modules/instruments/note"], function (require, exports, Instrument_2, note_2) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var pianoModelFile = "models/piano.gltf";\r\n    var soundFileExtension = ".mp3";\r\n    var keysModelFile = {\r\n        "WHITE": "models/piano_key_white.gltf",\r\n        "BLACK": "models/piano_key_black.gltf"\r\n    };\r\n    var soundsPath = "sounds/piano/";\r\n    var pianoNotes;\r\n    function getPianoNotes() {\r\n        var e_1, _a, e_2, _b;\r\n        if (!pianoNotes) {\r\n            pianoNotes = [];\r\n            var index = 0;\r\n            var white_index = 0;\r\n            try {\r\n                for (var _c = __values([1, 2, 3, 4, 5, 6]), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var octave = _d.value;\r\n                    try {\r\n                        for (var _e = (e_2 = void 0, __values(["C", "D", "E", "F", "G", "A", "B"])), _f = _e.next(); !_f.done; _f = _e.next()) {\r\n                            var letter = _f.value;\r\n                            var note = letter + octave;\r\n                            var type = "WHITE";\r\n                            pianoNotes.push({\r\n                                note: note, index: index, song: soundsPath + note + soundFileExtension, extras: { "type": type, "white_index": white_index }\r\n                            });\r\n                            index++;\r\n                            white_index++;\r\n                            if ((octave === 6) && (letter === "C"))\r\n                                break; // end with C6\r\n                            if (["A", "C", "D", "F", "G"].indexOf(letter) !== -1) {\r\n                                var note_3 = letter + octave + "_sharp";\r\n                                var type_1 = "BLACK";\r\n                                pianoNotes.push({\r\n                                    note: note_3, index: index, song: soundsPath + note_3 + soundFileExtension, extras: { "type": type_1, "white_index": white_index }\r\n                                });\r\n                                index++;\r\n                            }\r\n                        }\r\n                    }\r\n                    catch (e_2_1) { e_2 = { error: e_2_1 }; }\r\n                    finally {\r\n                        try {\r\n                            if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\r\n                        }\r\n                        finally { if (e_2) throw e_2.error; }\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\r\n                }\r\n                finally { if (e_1) throw e_1.error; }\r\n            }\r\n        }\r\n        return pianoNotes;\r\n    }\r\n    exports.getPianoNotes = getPianoNotes;\r\n    ;\r\n    var PianoKey = /** @class */ (function (_super) {\r\n        __extends(PianoKey, _super);\r\n        function PianoKey() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        PianoKey.prototype.getShape = function () {\r\n            return null;\r\n        };\r\n        PianoKey.prototype.getMaterial = function () {\r\n            return null;\r\n        };\r\n        PianoKey.prototype.getNoteShape = function (noteProp) {\r\n            var type = noteProp.extras["type"];\r\n            return new GLTFShape(keysModelFile[type]);\r\n        };\r\n        PianoKey.prototype.getInstrument = function () {\r\n            return "piano";\r\n        };\r\n        PianoKey.prototype.animate = function () {\r\n            new PianoKeyAnimation(this.log, this.entity);\r\n        };\r\n        return PianoKey;\r\n    }(note_2.Note));\r\n    exports.PianoKey = PianoKey;\r\n    var Piano = /** @class */ (function (_super) {\r\n        __extends(Piano, _super);\r\n        function Piano(log, soundHub, transform) {\r\n            var _this = _super.call(this, log, soundHub, transform) || this;\r\n            _this.createNotes(soundHub, PianoKey, getPianoNotes());\r\n            return _this;\r\n        }\r\n        Piano.prototype.getMaterial = function () {\r\n            return null;\r\n        };\r\n        Piano.prototype.getShape = function () {\r\n            return new GLTFShape(pianoModelFile);\r\n        };\r\n        Piano.prototype.getTransformForNote = function (noteProp) {\r\n            this.log("Piano::getTransformForNote(" + noteProp.note + ", index=" + noteProp.index + ", type=" + noteProp.extras[\'type\'] + ", white_index=" + noteProp.extras[\'white_index\']);\r\n            var white_index = noteProp.extras[\'white_index\'];\r\n            var scaleX = 0.178;\r\n            var posX = 7.4 - 0.398 * white_index;\r\n            var posY = 6.1;\r\n            var posZ = 0.18;\r\n            if (noteProp.extras[\'type\'] === "BLACK") {\r\n                scaleX = 0.16;\r\n                posY += 0.16;\r\n                posZ -= 0.25;\r\n            }\r\n            return new Transform({\r\n                position: new Vector3(posX, posY, posZ),\r\n                rotation: Quaternion.Euler(0, 0, 0),\r\n                scale: new Vector3(scaleX, 0.08, -0.18)\r\n            });\r\n        };\r\n        return Piano;\r\n    }(Instrument_2.Instrument));\r\n    exports.Piano = Piano;\r\n    var PianoKeyAnimation = /** @class */ (function () {\r\n        function PianoKeyAnimation(log, entity) {\r\n            this.pressed = true;\r\n            this.fraction = 0;\r\n            this.log = log;\r\n            this.entity = entity;\r\n            engine.addSystem(this);\r\n            this.log("Build a new PianoKeyAnimation");\r\n        }\r\n        ;\r\n        PianoKeyAnimation.prototype.update = function () {\r\n            this.log("PianoKeyAnimation::update()");\r\n            var transform = this.entity.getComponent(Transform);\r\n            if ((this.pressed == true) && (this.fraction < 1)) {\r\n                this.fraction += 1 / 4;\r\n            }\r\n            else {\r\n                if ((this.pressed == false) && (this.fraction > 0)) {\r\n                    this.fraction -= 1 / 2;\r\n                }\r\n            }\r\n            if (this.fraction >= 1) {\r\n                this.fraction = 1;\r\n                this.finish();\r\n            }\r\n            if (this.fraction <= 0) {\r\n                this.fraction = 0;\r\n            }\r\n            transform.rotation = Quaternion.Euler(4 - 4 * this.fraction, transform.rotation.y, transform.rotation.z);\r\n        };\r\n        PianoKeyAnimation.prototype.start = function () {\r\n            this.pressed = true;\r\n        };\r\n        PianoKeyAnimation.prototype.finish = function () {\r\n            engine.removeSystem(this);\r\n            this.pressed = false;\r\n        };\r\n        return PianoKeyAnimation;\r\n    }());\r\n});\r\ndefine("src/modules/pushbutton", ["require", "exports", "src/modules/entity_wrapper"], function (require, exports, entity_wrapper_4) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var PushButton = /** @class */ (function (_super) {\r\n        __extends(PushButton, _super);\r\n        function PushButton(log, transform, image, onPushed, parent) {\r\n            var _this = _super.call(this, log, transform, parent) || this;\r\n            _this.pressedScaleRatio = 0.3;\r\n            var label = new Entity();\r\n            _this.entity.addComponentOrReplace(_this.getMaterial());\r\n            label.setParent(_this.entity);\r\n            label.addComponent(new BoxShape());\r\n            label.addComponent(new Transform({\r\n                position: new Vector3(0.5, 0, 0),\r\n                rotation: Quaternion.Euler(90, 0, 0),\r\n                scale: new Vector3(0.01, 1.0, 1.0)\r\n            }));\r\n            var materialLabel = new Material();\r\n            materialLabel.albedoTexture = new Texture(image);\r\n            label.addComponent(materialLabel);\r\n            label.addComponent(new OnClick(function (e) {\r\n                var anim = new PushButtonAnimation(_this.log, _this.entity, function (fraction) {\r\n                    var transform = _this.entity.getComponent(Transform);\r\n                    var scaleX = transform.scale.x * (1 - fraction * _this.pressedScaleRatio);\r\n                    transform.scale = new Vector3(scaleX, transform.scale.y, transform.scale.z);\r\n                });\r\n                if (onPushed)\r\n                    onPushed();\r\n            }));\r\n            return _this;\r\n        }\r\n        PushButton.prototype.getShape = function () {\r\n            return new BoxShape();\r\n        };\r\n        PushButton.prototype.getMaterial = function () {\r\n            return null;\r\n        };\r\n        return PushButton;\r\n    }(entity_wrapper_4.EntityWrapper));\r\n    exports.PushButton = PushButton;\r\n    var PushButtonAnimation = /** @class */ (function () {\r\n        function PushButtonAnimation(log, entity, transformFn) {\r\n            this.up = false;\r\n            this.down = false;\r\n            this.fraction = 0;\r\n            this.increment_up = 0.25;\r\n            this.increment_down = 0.25;\r\n            this.log = log;\r\n            this.entity = entity;\r\n            this.transformFn = transformFn;\r\n        }\r\n        ;\r\n        PushButtonAnimation.prototype.update = function () {\r\n            var transform = this.entity.getComponent(Transform);\r\n            if (this.up && (this.fraction < 1)) {\r\n                this.fraction += this.increment_up;\r\n            }\r\n            if (this.down && (this.fraction > 0)) {\r\n                this.fraction -= this.increment_down;\r\n            }\r\n            this.log("PushButtonAnimation() fraction=" + this.fraction);\r\n            if (this.fraction <= 0) { // end now\r\n                this.finish();\r\n                return;\r\n            }\r\n            if (this.fraction >= 1) { // reverse\r\n                this.up = false;\r\n                this.down = true;\r\n            }\r\n            this.transformFn(this.fraction);\r\n        };\r\n        PushButtonAnimation.prototype.start = function () {\r\n            engine.addSystem(this);\r\n            this.up = true;\r\n        };\r\n        PushButtonAnimation.prototype.finish = function () {\r\n            engine.removeSystem(this);\r\n            this.fraction = 0;\r\n            this.up = false;\r\n            this.down = false;\r\n            this.transformFn(this.fraction);\r\n        };\r\n        return PushButtonAnimation;\r\n    }());\r\n});\r\ndefine("src/modules/ui_wrapper", ["require", "exports"], function (require, exports) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var UIWrapper = /** @class */ (function () {\r\n        function UIWrapper(log, parent) {\r\n            this.log = log;\r\n            this.container = new UIContainerRect(parent);\r\n            this.container.width = \'100%\';\r\n            this.container.height = \'33%\';\r\n            this.container.hAlign = \'center\';\r\n            this.container.vAlign = \'top\';\r\n            this.container.isPointerBlocker = true;\r\n            this.container.visible = false;\r\n        }\r\n        UIWrapper.prototype.display = function () {\r\n            this.container.visible = true;\r\n        };\r\n        UIWrapper.prototype.addCloseButton = function () {\r\n            var _this = this;\r\n            var closeIcon = new UIImage(this.container, new Texture(\'images/close-icon3.png\'));\r\n            closeIcon.name = \'clickable-image\';\r\n            closeIcon.width = \'50px\';\r\n            closeIcon.height = \'50px\';\r\n            closeIcon.hAlign = \'right\';\r\n            closeIcon.vAlign = \'top\';\r\n            closeIcon.sourceWidth = 128;\r\n            closeIcon.sourceHeight = 128;\r\n            closeIcon.isPointerBlocker = true;\r\n            closeIcon.onClick = new OnClick(function () {\r\n                _this.hide();\r\n            });\r\n        };\r\n        UIWrapper.prototype.show = function () {\r\n            this.container.visible = true;\r\n            this.container.isPointerBlocker = true;\r\n        };\r\n        UIWrapper.prototype.hide = function () {\r\n            this.container.visible = false;\r\n            this.container.isPointerBlocker = false;\r\n        };\r\n        UIWrapper.prototype.isVisible = function () {\r\n            return this.container.visible;\r\n        };\r\n        return UIWrapper;\r\n    }());\r\n    exports.UIWrapper = UIWrapper;\r\n});\r\ndefine("src/modules/play_it", ["require", "exports", "src/modules/pushbutton"], function (require, exports, pushbutton_1) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var PlayIt = /** @class */ (function (_super) {\r\n        __extends(PlayIt, _super);\r\n        function PlayIt(log, transform, parent, ui) {\r\n            var _this = _super.call(this, log, transform, \'images/playme.jpg\', function () {\r\n                // When the button is pushed, display the UI\r\n                if (!_this.ui.isVisible()) {\r\n                    _this.ui.show();\r\n                }\r\n                else {\r\n                    _this.ui.hide();\r\n                }\r\n            }, parent) || this;\r\n            _this.ui = ui;\r\n            return _this;\r\n            // this.entity.addComponent(new OnClick(e => {\r\n            //     this.log("Click on PlayIt !");\r\n            //     if (this.ui) {\r\n            //         this.ui.show();\r\n            //     }\r\n            // }))\r\n        }\r\n        PlayIt.prototype.getMaterial = function () {\r\n            var materialBox = new Material();\r\n            materialBox.albedoColor = Color3.Black();\r\n            materialBox.hasAlpha = true;\r\n            materialBox.alpha = 0.5;\r\n            materialBox.emissiveColor = Color3.Yellow();\r\n            return materialBox;\r\n        };\r\n        return PlayIt;\r\n    }(pushbutton_1.PushButton));\r\n    exports.PlayIt = PlayIt;\r\n});\r\ndefine("src/modules/ui_instruments/UIInstrument", ["require", "exports", "src/modules/ui_wrapper"], function (require, exports, ui_wrapper_1) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var UIInstrument = /** @class */ (function (_super) {\r\n        __extends(UIInstrument, _super);\r\n        function UIInstrument(log, parent) {\r\n            var _this = _super.call(this, log, parent) || this;\r\n            // **** INoteController implementation ****\r\n            _this._onPlayedNoteCallbacks = [];\r\n            _this.addCloseButton();\r\n            return _this;\r\n        }\r\n        UIInstrument.prototype.display = function () {\r\n            this.container.visible = true;\r\n        };\r\n        UIInstrument.prototype.setSoundHub = function (soundHub) {\r\n            this.soundHub = soundHub;\r\n            soundHub.registerNoteController(this);\r\n        };\r\n        UIInstrument.prototype.registerOnPlayedNote = function (onPlayNote) {\r\n            // allow registering to allow recording from UI\r\n            this._onPlayedNoteCallbacks.push(onPlayNote);\r\n        };\r\n        // ****************************************\r\n        UIInstrument.prototype.notifyPlaying = function (note) {\r\n            var _this = this;\r\n            // Notify listeners to allow recording\r\n            this.log("PianoItemUI : play note " + note);\r\n            this._onPlayedNoteCallbacks.forEach(function (onPlayNote) {\r\n                onPlayNote.call(_this, _this.getInstrument(), note);\r\n            });\r\n        };\r\n        UIInstrument.prototype.onClickCallback = function (note) {\r\n            // relay towards the 3D entity containing the sound Component\r\n            this.soundHub.onPlayNote(this.getInstrument(), note);\r\n            this.notifyPlaying(note);\r\n        };\r\n        return UIInstrument;\r\n    }(ui_wrapper_1.UIWrapper));\r\n    exports.UIInstrument = UIInstrument;\r\n});\r\ndefine("src/modules/instruments/bass", ["require", "exports", "src/modules/instruments/Instrument", "src/modules/instruments/note"], function (require, exports, Instrument_3, note_4) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var bassModelFile = "models/bass_perso_1.gltf";\r\n    var soundsPath = "sounds/bass/";\r\n    var extension = ".mp3";\r\n    var bassNotes;\r\n    function getBassNotes() {\r\n        var e_3, _a, e_4, _b;\r\n        if (!bassNotes) {\r\n            bassNotes = [];\r\n            var index = 0;\r\n            var cord = 1;\r\n            var position = 0;\r\n            try {\r\n                for (var _c = __values([1, 2, 3]), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var octave = _d.value;\r\n                    try {\r\n                        for (var _e = (e_4 = void 0, __values(["C", "D", "E", "F", "G", "A", "B"])), _f = _e.next(); !_f.done; _f = _e.next()) {\r\n                            var letter = _f.value;\r\n                            if ((octave === 1) && (["C", "D"].indexOf(letter) !== -1))\r\n                                continue; // start with E1\r\n                            var note = letter + octave;\r\n                            if (((octave === 1) && (letter === "A")) ||\r\n                                ((octave === 2) && (letter === "D")) ||\r\n                                ((octave === 2) && (letter === "G"))) { // change cord\r\n                                bassNotes.push({\r\n                                    note: note + "_", index: index, song: soundsPath + note + "_" + extension, extras: { "cord": cord, "position": position }\r\n                                });\r\n                                cord++;\r\n                                position = 0;\r\n                            }\r\n                            bassNotes.push({\r\n                                note: note, index: index, song: soundsPath + note + extension, extras: { "cord": cord, "position": position }\r\n                            });\r\n                            index++;\r\n                            position++;\r\n                            if ((octave === 3) && (letter === "C"))\r\n                                break; // end with C3\r\n                            if (["A", "C", "D", "F", "G"].indexOf(letter) !== -1) {\r\n                                var note_5 = letter + octave + "_sharp";\r\n                                bassNotes.push({\r\n                                    note: note_5, index: index, song: soundsPath + note_5 + extension, extras: { "cord": cord, "position": position }\r\n                                });\r\n                                index++;\r\n                                position++;\r\n                            }\r\n                        }\r\n                    }\r\n                    catch (e_4_1) { e_4 = { error: e_4_1 }; }\r\n                    finally {\r\n                        try {\r\n                            if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\r\n                        }\r\n                        finally { if (e_4) throw e_4.error; }\r\n                    }\r\n                }\r\n            }\r\n            catch (e_3_1) { e_3 = { error: e_3_1 }; }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\r\n                }\r\n                finally { if (e_3) throw e_3.error; }\r\n            }\r\n        }\r\n        return bassNotes;\r\n    }\r\n    exports.getBassNotes = getBassNotes;\r\n    ;\r\n    var BassNote = /** @class */ (function (_super) {\r\n        __extends(BassNote, _super);\r\n        function BassNote() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        BassNote.prototype.getShape = function () {\r\n            return new PlaneShape();\r\n        };\r\n        BassNote.prototype.getMaterial = function () {\r\n            var material = new Material();\r\n            material.albedoTexture = new Texture("images/fingerprint.png", { hasAlpha: true });\r\n            material.hasAlpha = true;\r\n            return material;\r\n        };\r\n        BassNote.prototype.getNoteShape = function (noteProp) {\r\n            return null;\r\n        };\r\n        BassNote.prototype.getInstrument = function () {\r\n            return "bass";\r\n        };\r\n        BassNote.prototype.animate = function () {\r\n        };\r\n        return BassNote;\r\n    }(note_4.Note));\r\n    exports.BassNote = BassNote;\r\n    var Bass = /** @class */ (function (_super) {\r\n        __extends(Bass, _super);\r\n        function Bass(log, soundHub, transform) {\r\n            var _this = _super.call(this, log, soundHub, transform) || this;\r\n            _this.createNotes(soundHub, BassNote, getBassNotes());\r\n            return _this;\r\n        }\r\n        Bass.prototype.getMaterial = function () {\r\n            return null;\r\n        };\r\n        Bass.prototype.getShape = function () {\r\n            return new GLTFShape(bassModelFile);\r\n        };\r\n        Bass.prototype.getTransformForNote = function (noteProp) {\r\n            var posX = 0.4;\r\n            var posY = 0.8;\r\n            var posZ = -13.0;\r\n            var noteCord = noteProp.extras[\'cord\'];\r\n            var notePosition = noteProp.extras[\'position\'];\r\n            return new Transform({\r\n                position: new Vector3(posX - (0.2 * noteCord), posY, posZ + 1.2 * notePosition - 0.1 * noteCord),\r\n                rotation: Quaternion.Euler(90, 0, 0),\r\n                scale: new Vector3(0.4, 1.0, 0.8),\r\n            });\r\n        };\r\n        return Bass;\r\n    }(Instrument_3.Instrument));\r\n    exports.Bass = Bass;\r\n});\r\ndefine("src/modules/ui_instruments/bass_ui", ["require", "exports", "src/modules/ui_instruments/UIInstrument", "src/modules/instruments/bass"], function (require, exports, UIInstrument_1, bass_1) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var instrument = "bass";\r\n    var imageTexture = new Texture(\'images/bass_guitar.png\');\r\n    var BassUI = /** @class */ (function (_super) {\r\n        __extends(BassUI, _super);\r\n        function BassUI(log, parent) {\r\n            var _this = _super.call(this, log, parent) || this;\r\n            _this.image = new UIImage(_this.container, imageTexture);\r\n            _this.image.hAlign = \'center\';\r\n            _this.image.positionY = \'30%\';\r\n            _this.image.paddingTop = 50; // under the close button\r\n            _this.image.sourceWidth = 417;\r\n            _this.image.sourceHeight = 178;\r\n            _this.image.width = "100%";\r\n            _this.image.height = "180%";\r\n            _this.image.isPointerBlocker = true;\r\n            _this.image.opacity = 1.0;\r\n            var toolName = new UIText(_this.container);\r\n            toolName.value = "Bass Guitar";\r\n            toolName.fontSize = 20;\r\n            toolName.vAlign = \'top\';\r\n            toolName.width = \'150px\';\r\n            toolName.height = \'35px\';\r\n            toolName.positionX = 20;\r\n            toolName.paddingTop = -10;\r\n            toolName.color = Color4.FromHexString(\'#0F1217ff\');\r\n            return _this;\r\n        }\r\n        BassUI.prototype.setSoundHub = function (soundHub) {\r\n            _super.prototype.setSoundHub.call(this, soundHub);\r\n            this.createNotes(soundHub, bass_1.getBassNotes());\r\n        };\r\n        BassUI.prototype.createNotes = function (soundHub, noteProps) {\r\n            var e_5, _a;\r\n            var tabPositionX = [\'32.5%\', \'25%\', \'18.7%\', \'12.6%\', \'6.7%\', \'1.0%\'];\r\n            var cordPositionY = [\'7%\', \'3%\', \'-1%\', \'-5%\'];\r\n            try {\r\n                for (var noteProps_1 = __values(noteProps), noteProps_1_1 = noteProps_1.next(); !noteProps_1_1.done; noteProps_1_1 = noteProps_1.next()) {\r\n                    var noteProp = noteProps_1_1.value;\r\n                    var noteCord = noteProp.extras[\'cord\'];\r\n                    var notePosition = noteProp.extras[\'position\'];\r\n                    var item = new BassItemUI(this.log, this.image, noteProp.note, tabPositionX[notePosition], cordPositionY[noteCord - 1]);\r\n                    item.setSoundHub(soundHub);\r\n                }\r\n            }\r\n            catch (e_5_1) { e_5 = { error: e_5_1 }; }\r\n            finally {\r\n                try {\r\n                    if (noteProps_1_1 && !noteProps_1_1.done && (_a = noteProps_1.return)) _a.call(noteProps_1);\r\n                }\r\n                finally { if (e_5) throw e_5.error; }\r\n            }\r\n        };\r\n        BassUI.prototype.getInstrument = function () {\r\n            return instrument;\r\n        };\r\n        return BassUI;\r\n    }(UIInstrument_1.UIInstrument));\r\n    exports.BassUI = BassUI;\r\n    var imageItem = new Texture("images/bassItemUI.png", { hasAlpha: true });\r\n    var BassItemUI = /** @class */ (function () {\r\n        function BassItemUI(log, parent, note, posX, posY) {\r\n            var _this = this;\r\n            // **** INoteController implementation ****\r\n            this._onPlayedNoteCallbacks = [];\r\n            this.log = log;\r\n            this.image = new UIImage(parent, imageItem);\r\n            this.image.positionX = posX;\r\n            this.image.positionY = posY;\r\n            this.image.sourceWidth = 680;\r\n            this.image.sourceHeight = 518;\r\n            this.image.width = 30;\r\n            this.image.height = 14;\r\n            this.note = note;\r\n            this.image.isPointerBlocker = true;\r\n            this.image.onClick = new OnClick(function (event) { _this.onClickCallback(); });\r\n        }\r\n        BassItemUI.prototype.setSoundHub = function (soundHub) {\r\n            this.soundHub = soundHub;\r\n            this.soundHub.registerNoteController(this);\r\n        };\r\n        BassItemUI.prototype.registerOnPlayedNote = function (onPlayNote) {\r\n            // allow registering to allow recording from UI\r\n            this._onPlayedNoteCallbacks.push(onPlayNote);\r\n        };\r\n        BassItemUI.prototype.getInstrument = function () {\r\n            return instrument;\r\n        };\r\n        BassItemUI.prototype.getNote = function () {\r\n            return this.note;\r\n        };\r\n        // ****************************************\r\n        BassItemUI.prototype.notifyPlaying = function () {\r\n            var _this = this;\r\n            // Notify listeners to allow recording\r\n            this.log("BassItemUI : play note " + this.note);\r\n            this._onPlayedNoteCallbacks.forEach(function (onPlayNote) {\r\n                onPlayNote.call(_this, _this.getInstrument(), _this.note);\r\n            });\r\n        };\r\n        BassItemUI.prototype.onClickCallback = function () {\r\n            // relay towards the 3D entity containing the sound Component\r\n            this.soundHub.onPlayNote(this.getInstrument(), this.note);\r\n            this.notifyPlaying();\r\n        };\r\n        return BassItemUI;\r\n    }());\r\n    exports.BassItemUI = BassItemUI;\r\n});\r\ndefine("src/modules/image_container", ["require", "exports"], function (require, exports) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var ImageContainer = /** @class */ (function () {\r\n        function ImageContainer(parent) {\r\n            this._images = {};\r\n            this._container = new UIContainerRect(parent);\r\n        }\r\n        ImageContainer.prototype.container = function () {\r\n            return this._container;\r\n        };\r\n        ImageContainer.prototype.registerImage = function (key, source, sourceWidth, sourceHeight) {\r\n            var image = new UIImage(this._container, new Texture(source));\r\n            image.width = \'100%\';\r\n            image.height = \'100%\';\r\n            image.sourceWidth = sourceWidth;\r\n            image.sourceHeight = sourceHeight;\r\n            image.visible = false;\r\n            this._images[key] = image;\r\n        };\r\n        ImageContainer.prototype.makeOneVisible = function (key) {\r\n            this.makeAllInvisible();\r\n            this._images[key].visible = true;\r\n        };\r\n        ImageContainer.prototype.makeAllInvisible = function () {\r\n            for (var key in this._images) {\r\n                this._images[key].visible = false;\r\n            }\r\n        };\r\n        ImageContainer.prototype.registerOnClickImage = function (key, callback) {\r\n            this._images[key].onClick = callback;\r\n        };\r\n        return ImageContainer;\r\n    }());\r\n    exports.ImageContainer = ImageContainer;\r\n});\r\ndefine("src/modules/ui_instruments/piano_ui", ["require", "exports", "src/modules/ui_instruments/UIInstrument", "src/modules/image_container", "src/modules/instruments/piano"], function (require, exports, UIInstrument_2, image_container_1, piano_1) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var instrument = "piano";\r\n    var PianoUI = /** @class */ (function (_super) {\r\n        __extends(PianoUI, _super);\r\n        function PianoUI(log, parent) {\r\n            return _super.call(this, log, parent) || this;\r\n        }\r\n        PianoUI.prototype.setSoundHub = function (soundHub) {\r\n            _super.prototype.setSoundHub.call(this, soundHub);\r\n            this.createNotes(soundHub, piano_1.getPianoNotes());\r\n        };\r\n        PianoUI.prototype.createNotes = function (soundHub, noteProps) {\r\n            var e_6, _a, e_7, _b;\r\n            var _this = this;\r\n            var offsetX = 19.5;\r\n            var posX = -300;\r\n            var posY = \'20%\';\r\n            var blackKeys = [];\r\n            var _loop_1 = function (noteProp) {\r\n                var noteType = noteProp.extras[\'type\'];\r\n                if (noteType === "WHITE") {\r\n                    var imageContainer = new image_container_1.ImageContainer(this_1.container);\r\n                    imageContainer.container().width = offsetX - 0.8;\r\n                    imageContainer.container().positionX = posX;\r\n                    imageContainer.container().positionY = posY;\r\n                    // Specific to white key\r\n                    imageContainer.registerImage(\'released\', "images/white_key.png", 23, 117);\r\n                    imageContainer.registerImage(\'pressed\', "images/green_key.png", 24, 117);\r\n                    imageContainer.container().height = \'100%\';\r\n                    posX += offsetX;\r\n                    // End specific\r\n                    imageContainer.registerOnClickImage(\'released\', new OnClick(function (event) {\r\n                        _this.log("PianoUI : Press on key " + noteProp.note);\r\n                        _this.onClickCallback(noteProp.note);\r\n                    }));\r\n                    imageContainer.makeOneVisible(\'released\');\r\n                }\r\n                else if (noteType === "BLACK") {\r\n                    // Differ the black keys to get them on top of white ones\r\n                    blackKeys.push({ key: noteProp.note, posX: posX - 0.5 * offsetX });\r\n                }\r\n            };\r\n            var this_1 = this;\r\n            try {\r\n                for (var noteProps_2 = __values(noteProps), noteProps_2_1 = noteProps_2.next(); !noteProps_2_1.done; noteProps_2_1 = noteProps_2.next()) {\r\n                    var noteProp = noteProps_2_1.value;\r\n                    _loop_1(noteProp);\r\n                }\r\n            }\r\n            catch (e_6_1) { e_6 = { error: e_6_1 }; }\r\n            finally {\r\n                try {\r\n                    if (noteProps_2_1 && !noteProps_2_1.done && (_a = noteProps_2.return)) _a.call(noteProps_2);\r\n                }\r\n                finally { if (e_6) throw e_6.error; }\r\n            }\r\n            var _loop_2 = function (blackKey) {\r\n                var imageContainer = new image_container_1.ImageContainer(this_2.container);\r\n                imageContainer.container().width = offsetX - 1.0;\r\n                imageContainer.container().positionX = blackKey.posX;\r\n                imageContainer.container().positionY = posY;\r\n                // Specific to black key\r\n                imageContainer.registerImage(\'released\', "images/black_key.png", 24, 117);\r\n                imageContainer.registerImage(\'pressed\', "images/black_key_pressed.png", 24, 117);\r\n                imageContainer.container().height = \'75%\';\r\n                // End specific\r\n                imageContainer.registerOnClickImage(\'released\', new OnClick(function (event) {\r\n                    _this.log("PianoUI : Press on key " + blackKey.key);\r\n                    _this.onClickCallback(blackKey.key);\r\n                }));\r\n                imageContainer.makeOneVisible(\'released\');\r\n            };\r\n            var this_2 = this;\r\n            try {\r\n                for (var blackKeys_1 = __values(blackKeys), blackKeys_1_1 = blackKeys_1.next(); !blackKeys_1_1.done; blackKeys_1_1 = blackKeys_1.next()) {\r\n                    var blackKey = blackKeys_1_1.value;\r\n                    _loop_2(blackKey);\r\n                }\r\n            }\r\n            catch (e_7_1) { e_7 = { error: e_7_1 }; }\r\n            finally {\r\n                try {\r\n                    if (blackKeys_1_1 && !blackKeys_1_1.done && (_b = blackKeys_1.return)) _b.call(blackKeys_1);\r\n                }\r\n                finally { if (e_7) throw e_7.error; }\r\n            }\r\n        };\r\n        PianoUI.prototype.getInstrument = function () {\r\n            return instrument;\r\n        };\r\n        return PianoUI;\r\n    }(UIInstrument_2.UIInstrument));\r\n    exports.PianoUI = PianoUI;\r\n});\r\ndefine("src/modules/ui_instruments/tempoUI", ["require", "exports", "src/modules/image_container"], function (require, exports, image_container_2) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var indicatorPositionX = [\'-47%\', \'-40.5%\', \'-34.5%\', \'-28.2%\', \'-22.1%\', \'-15.9%\', \'-9.7%\', \'-3.4%\', \'3.3%\', \'9.6%\', \'15.8%\', \'22.0%\', \'28.2%\', \'34.5%\', \'40.5%\', \'47%\'];\r\n    var TempoUI = /** @class */ (function () {\r\n        function TempoUI(log, parent) {\r\n            var _this = this;\r\n            this.log = log;\r\n            this.container = new UIContainerRect(parent);\r\n            this.container.width = 100;\r\n            this.container.height = 36;\r\n            this.container.hAlign = \'center\';\r\n            // this.container.vAlign = \'top\';\r\n            this.container.positionY = \'38%\';\r\n            this.container.visible = true;\r\n            this.container.isPointerBlocker = true;\r\n            this.container.visible = true;\r\n            var imageTexture = new Texture(\'images/beat_indicator_background.png\');\r\n            this.image = new UIImage(this.container, imageTexture);\r\n            this.image.positionX = 32;\r\n            this.image.positionY = \'0%\';\r\n            this.image.sourceWidth = 3345;\r\n            this.image.sourceHeight = 172;\r\n            this.image.width = 240;\r\n            this.image.height = 24;\r\n            this.image.onClick = new OnClick(function (event) { _this.log("onClick Background Recorder"); });\r\n            // this.image.isPointerBlocker = true;\r\n            var indicatorTexture = new Texture(\'images/beat_indicator_lampon.png\');\r\n            this.indicator = new UIImage(this.image, indicatorTexture);\r\n            // this.indicator.vAlign = \'center\';\r\n            // this.indicator.positionX = \'-47%\';\r\n            this.indicator.positionX = indicatorPositionX[0];\r\n            this.indicator.positionY = \'0%\';\r\n            this.indicator.sourceWidth = 212;\r\n            this.indicator.sourceHeight = 172;\r\n            this.indicator.width = "6%";\r\n            this.indicator.height = "100%";\r\n            // this.indicator.isPointerBlocker = true;\r\n            this.indicator.visible = false;\r\n            this.play_pause = new image_container_2.ImageContainer(this.container);\r\n            this.play_pause.container().positionX = -78;\r\n            this.play_pause.container().positionY = \'0%\';\r\n            this.play_pause.container().width = 32;\r\n            this.play_pause.container().height = 32;\r\n            this.play_pause.registerImage(\'play\', \'images/play_silver.png\', 404, 403);\r\n            this.play_pause.registerOnClickImage(\'play\', new OnClick(function (event) {\r\n                _this.log(\'onclick Play\');\r\n                _this.play_pause.makeOneVisible(\'pause\');\r\n                _this.notifyListener(true, false);\r\n            }));\r\n            this.play_pause.registerImage(\'pause\', \'images/pause_silver.png\', 403, 402);\r\n            this.play_pause.registerOnClickImage(\'pause\', new OnClick(function (event) {\r\n                _this.log(\'onclick Pause\');\r\n                _this.play_pause.makeOneVisible(\'play\');\r\n                _this.notifyListener(false, true);\r\n            }));\r\n            this.play_pause.makeOneVisible(\'play\');\r\n            // this.img_play = new UIImage(this.container, new Texture(\'images/play_silver.png\'));\r\n            // this.img_play.positionX = -78;\r\n            // this.img_play.positionY = \'0%\';\r\n            // this.img_play.sourceWidth = 404;\r\n            // this.img_play.sourceHeight = 403;\r\n            // this.img_play.width = 32;\r\n            // this.img_play.height = 32;\r\n            // // this.img_play.isPointerBlocker = true;\r\n            // this.img_play.visible = true;\r\n            // this.img_play.onClick = new OnClick(event => {\r\n            //     this.log(\'onclick Play\');\r\n            //     this.swapPlayPause(true);\r\n            //     this.notifyListener(true, false);\r\n            // });\r\n            // this.img_pause = new UIImage(this.container, new Texture(\'images/pause_silver.png\'));\r\n            // this.img_pause.positionX = -78;\r\n            // this.img_pause.positionY = \'0%\';\r\n            // this.img_pause.sourceWidth = 403;\r\n            // this.img_pause.sourceHeight = 402;\r\n            // this.img_pause.width = 32;\r\n            // this.img_pause.height = 32;\r\n            // // this.img_pause.isPointerBlocker = true;\r\n            // this.img_pause.visible = false;\r\n            // this.img_pause.onClick = new OnClick(event => {\r\n            //     this.log(\'onclick Pause\');\r\n            //     this.swapPlayPause(false);\r\n            //     this.notifyListener(false, true);\r\n            // });\r\n            this.img_stop = new UIImage(this.container, new Texture(\'images/stop_silver.png\'));\r\n            this.img_stop.positionX = -42;\r\n            this.img_stop.positionY = \'0%\';\r\n            this.img_stop.sourceWidth = 406;\r\n            this.img_stop.sourceHeight = 404;\r\n            this.img_stop.width = 32;\r\n            this.img_stop.height = 32;\r\n            // this.img_stop.isPointerBlocker = true;\r\n            this.img_stop.onClick = new OnClick(function (event) {\r\n                _this.log(\'onclick Stop\');\r\n                _this.play_pause.makeOneVisible(\'play\');\r\n                _this.notifyListener(false, false);\r\n            });\r\n        }\r\n        TempoUI.prototype.setPosition = function (posX, posY) {\r\n            this.container.positionX = posX;\r\n            this.container.positionY = posY;\r\n        };\r\n        TempoUI.prototype.setBeat = function (beat) {\r\n            this.indicator.visible = false;\r\n            if (!isNaN(beat) && (beat > 0) && (beat <= indicatorPositionX.length)) {\r\n                this.indicator.positionX = indicatorPositionX[beat - 1];\r\n                this.indicator.visible = true;\r\n            }\r\n            else {\r\n                this.log("INVALID REQUEST beat=" + beat);\r\n            }\r\n        };\r\n        TempoUI.prototype.registerOnTempoChanged = function (callback) {\r\n            this._callbackStartTempo = callback;\r\n        };\r\n        TempoUI.prototype.notifyListener = function (isStarted, isFrozen) {\r\n            if (this._callbackStartTempo)\r\n                this._callbackStartTempo(isStarted, isFrozen);\r\n        };\r\n        return TempoUI;\r\n    }());\r\n    exports.TempoUI = TempoUI;\r\n});\r\ndefine("node_modules/decentraland-ecs-utils/timer/component/itimercomponent", ["require", "exports"], function (require, exports) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n});\r\ndefine("node_modules/decentraland-ecs-utils/timer/component/delay", ["require", "exports", "node_modules/decentraland-ecs-utils/timer/system/timerSystem"], function (require, exports, timerSystem_1) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    /**\r\n     * Execute once after X milliseconds\r\n     */\r\n    var Delay = /** @class */ (function () {\r\n        /**\r\n         * @param millisecs amount of time in milliseconds\r\n         * @param onTimeReachedCallback callback for when time is reached\r\n         */\r\n        function Delay(millisecs, onTimeReachedCallback) {\r\n            var _this = this;\r\n            timerSystem_1.TimerSystem.createAndAddToEngine();\r\n            this.elapsedTime = 0;\r\n            this.targetTime = millisecs / 1000;\r\n            this.onTimeReachedCallback = onTimeReachedCallback;\r\n            this.onTargetTimeReached = function (entity) {\r\n                if (_this.onTimeReachedCallback)\r\n                    _this.onTimeReachedCallback();\r\n                entity.removeComponent(_this);\r\n            };\r\n        }\r\n        Delay.prototype.setCallback = function (onTimeReachedCallback) {\r\n            this.onTimeReachedCallback = onTimeReachedCallback;\r\n        };\r\n        Delay = __decorate([\r\n            Component("timerDelay"),\r\n            __metadata("design:paramtypes", [Number, Function])\r\n        ], Delay);\r\n        return Delay;\r\n    }());\r\n    exports.Delay = Delay;\r\n});\r\ndefine("node_modules/decentraland-ecs-utils/timer/component/expire", ["require", "exports", "node_modules/decentraland-ecs-utils/timer/system/timerSystem"], function (require, exports, timerSystem_2) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    /**\r\n     * Remove entity after X milliseconds\r\n     */\r\n    var ExpireIn = /** @class */ (function () {\r\n        /**\r\n         * @param millisecs amount of time in milliseconds\r\n         * @param onTimeReachedCallback callback for when time is reached\r\n         */\r\n        function ExpireIn(millisecs, onTimeReachedCallback) {\r\n            var _this = this;\r\n            timerSystem_2.TimerSystem.createAndAddToEngine();\r\n            this.elapsedTime = 0;\r\n            this.targetTime = millisecs / 1000;\r\n            this.onTimeReachedCallback = onTimeReachedCallback;\r\n            this.onTargetTimeReached = function (entity) {\r\n                if (_this.onTimeReachedCallback)\r\n                    _this.onTimeReachedCallback();\r\n                entity.removeComponent(_this);\r\n                engine.removeEntity(entity);\r\n            };\r\n        }\r\n        ExpireIn.prototype.setCallback = function (onTimeReachedCallback) {\r\n            this.onTimeReachedCallback = onTimeReachedCallback;\r\n        };\r\n        ExpireIn = __decorate([\r\n            Component("timerExpireIn"),\r\n            __metadata("design:paramtypes", [Number, Function])\r\n        ], ExpireIn);\r\n        return ExpireIn;\r\n    }());\r\n    exports.ExpireIn = ExpireIn;\r\n});\r\ndefine("node_modules/decentraland-ecs-utils/timer/system/timerSystem", ["require", "exports", "node_modules/decentraland-ecs-utils/timer/component/interval", "node_modules/decentraland-ecs-utils/timer/component/delay", "node_modules/decentraland-ecs-utils/timer/component/expire"], function (require, exports, interval_1, delay_1, expire_1) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var TimerSystem = /** @class */ (function () {\r\n        function TimerSystem() {\r\n            this._components = [];\r\n            TimerSystem._instance = this;\r\n            this._components.push(interval_1.Interval);\r\n            this._components.push(delay_1.Delay);\r\n            this._components.push(expire_1.ExpireIn);\r\n        }\r\n        TimerSystem.createAndAddToEngine = function () {\r\n            if (this._instance == null) {\r\n                this._instance = new TimerSystem();\r\n                engine.addSystem(this._instance);\r\n            }\r\n            return this._instance;\r\n        };\r\n        TimerSystem.registerCustomComponent = function (component) {\r\n            this.createAndAddToEngine()._components.push(component);\r\n        };\r\n        TimerSystem.prototype.update = function (dt) {\r\n            var _this = this;\r\n            this._components.forEach(function (component) {\r\n                _this.updateComponent(dt, component);\r\n            });\r\n        };\r\n        TimerSystem.prototype.updateComponent = function (dt, component) {\r\n            var record = engine.getEntitiesWithComponent(component);\r\n            for (var key in record) {\r\n                if (record.hasOwnProperty(key)) {\r\n                    var entity = record[key];\r\n                    var timerComponent = entity.getComponent(component);\r\n                    timerComponent.elapsedTime += dt;\r\n                    if (timerComponent.elapsedTime >= timerComponent.targetTime) {\r\n                        timerComponent.onTargetTimeReached(entity);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        TimerSystem._instance = null;\r\n        return TimerSystem;\r\n    }());\r\n    exports.TimerSystem = TimerSystem;\r\n});\r\ndefine("node_modules/decentraland-ecs-utils/timer/component/interval", ["require", "exports", "node_modules/decentraland-ecs-utils/timer/system/timerSystem"], function (require, exports, timerSystem_3) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    /**\r\n     * Execute every X milliseconds\r\n     */\r\n    var Interval = /** @class */ (function () {\r\n        /**\r\n         * @param millisecs amount of time in milliseconds\r\n         * @param onTimeReachedCallback callback for when time is reached\r\n         */\r\n        function Interval(millisecs, onTimeReachedCallback) {\r\n            var _this = this;\r\n            timerSystem_3.TimerSystem.createAndAddToEngine();\r\n            this.elapsedTime = 0;\r\n            this.targetTime = millisecs / 1000;\r\n            this.onTimeReachedCallback = onTimeReachedCallback;\r\n            this.onTargetTimeReached = function () {\r\n                _this.elapsedTime = 0;\r\n                if (_this.onTimeReachedCallback)\r\n                    _this.onTimeReachedCallback();\r\n            };\r\n        }\r\n        Interval.prototype.setCallback = function (onTimeReachedCallback) {\r\n            this.onTimeReachedCallback = onTimeReachedCallback;\r\n        };\r\n        Interval = __decorate([\r\n            Component("timerInterval"),\r\n            __metadata("design:paramtypes", [Number, Function])\r\n        ], Interval);\r\n        return Interval;\r\n    }());\r\n    exports.Interval = Interval;\r\n});\r\ndefine("src/modules/recorder/tempo", ["require", "exports", "node_modules/decentraland-ecs-utils/timer/component/interval"], function (require, exports, interval_2) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var Tempo = /** @class */ (function () {\r\n        function Tempo(log, tempoBPM, nbBeatsPerBar, nbBarPerPhrase) {\r\n            this.upBeatRatio = 12; // convenient for ternary and 4-beat rythme (if tempo 180 bpm, timer period is set to 28 msec)\r\n            this.shallStopAtEndOfBar = false;\r\n            this.isStarted = false;\r\n            this.isFrozen = false;\r\n            this._callbacksUpBeat = [];\r\n            this._callbacksBeat = [];\r\n            this._callbacksBar = [];\r\n            this.log = log;\r\n            this.tempoBPM = tempoBPM;\r\n            this.nbBeatsPerBar = nbBeatsPerBar;\r\n            this.nbBarPerPhrase = nbBarPerPhrase;\r\n            this.timerEntity = new Entity();\r\n            engine.addEntity(this.timerEntity);\r\n        }\r\n        Tempo.prototype.getNominalPeriodMS = function () {\r\n            return 60 * 1000 / this.tempoBPM;\r\n        };\r\n        Tempo.prototype.reinit = function () {\r\n            this.shallStopAtEndOfBar = false;\r\n            this.currentTime = 0;\r\n            this.isFrozen = false;\r\n            this.isStarted = false;\r\n        };\r\n        Tempo.prototype.start = function () {\r\n            // same as resume with reinit before\r\n            this.reinit();\r\n            this.resume();\r\n        };\r\n        Tempo.prototype.freeze = function () {\r\n            // same as stop\r\n            this.stop();\r\n            this.isFrozen = true;\r\n        };\r\n        Tempo.prototype.resume = function () {\r\n            var _this = this;\r\n            this.isFrozen = false;\r\n            // same as start, without reinit\r\n            this.timer = new interval_2.Interval(this.getNominalPeriodMS() / this.upBeatRatio, function () {\r\n                _this.currentTime += 1;\r\n                _this.onUpBeat();\r\n            });\r\n            this.onUpBeat();\r\n            this.timerEntity.addComponent(this.timer);\r\n            this.isStarted = true;\r\n        };\r\n        Tempo.prototype.stop = function () {\r\n            this.timerEntity.removeComponent(this.timer);\r\n            this.timer = null;\r\n            this.isFrozen = false;\r\n            this.isStarted = false;\r\n        };\r\n        Tempo.prototype.stopAtEndOfBar = function () {\r\n            this.shallStopAtEndOfBar = true;\r\n        };\r\n        Tempo.prototype.getTempoBPM = function () {\r\n            return this.tempoBPM;\r\n        };\r\n        Tempo.prototype.getCurrentTime = function () {\r\n            return this.currentTime;\r\n        };\r\n        Tempo.prototype.getCurrentUpBeat = function () {\r\n            return this.currentTime % this.upBeatRatio;\r\n        };\r\n        Tempo.prototype.getCurrentBeat = function () {\r\n            return Math.floor(this.currentTime / this.upBeatRatio) % this.nbBeatsPerBar;\r\n        };\r\n        Tempo.prototype.getCurrentBeatInPhrase = function () {\r\n            return Math.floor(this.currentTime / this.upBeatRatio) % (this.nbBeatsPerBar * this.nbBarPerPhrase);\r\n        };\r\n        Tempo.prototype.getCurrentBar = function () {\r\n            return Math.floor(this.currentTime / (this.upBeatRatio * this.nbBeatsPerBar)) % this.nbBarPerPhrase;\r\n        };\r\n        Tempo.prototype.getCurrentPhrase = function () {\r\n            return Math.floor(this.currentTime / (this.upBeatRatio * this.nbBeatsPerBar * this.nbBarPerPhrase));\r\n        };\r\n        ;\r\n        Tempo.prototype.registerOnUpBeat = function (callback) {\r\n            this._callbacksUpBeat.push(callback);\r\n        };\r\n        ;\r\n        Tempo.prototype.registerOnBeat = function (callback) {\r\n            this._callbacksBeat.push(callback);\r\n        };\r\n        ;\r\n        Tempo.prototype.registerOnBar = function (callback) {\r\n            this._callbacksBar.push(callback);\r\n        };\r\n        Tempo.prototype.onUpBeat = function () {\r\n            var _this = this;\r\n            this._callbacksUpBeat.forEach(function (callback) {\r\n                callback(_this.currentTime);\r\n            });\r\n            if (this.getCurrentUpBeat() == 0) {\r\n                this._callbacksBeat.forEach(function (callback) {\r\n                    callback(_this.getCurrentPhrase(), _this.getCurrentBar(), _this.getCurrentBeat(), _this.getCurrentBeatInPhrase());\r\n                });\r\n                if (this.getCurrentBeat() == 0) {\r\n                    this._callbacksBar.forEach(function (callback) {\r\n                        callback(_this.getCurrentPhrase(), _this.getCurrentBar());\r\n                    });\r\n                }\r\n            }\r\n        };\r\n        return Tempo;\r\n    }());\r\n    exports.Tempo = Tempo;\r\n    var TempoTest = /** @class */ (function () {\r\n        function TempoTest(log) {\r\n            var _this = this;\r\n            this.nbUpBeatinBeat = 0;\r\n            this.log = log;\r\n            this.tempo = new Tempo(log, 90, 4, 4);\r\n            this.tempo.registerOnBar(function (currentPhrase, currentBar) {\r\n                _this.log("onBar->" + currentPhrase + "," + currentBar);\r\n                if (currentPhrase >= 5)\r\n                    _this.tempo.freeze();\r\n            });\r\n            this.tempo.registerOnBeat(function (currentPhrase, currentBar, currentBeat, currentBeatInPhrase) {\r\n                _this.log("onBeat->" + currentPhrase + "," + currentBar + "," + currentBeat + ", nbUpBeat = " + _this.nbUpBeatinBeat);\r\n                _this.nbUpBeatinBeat = 0;\r\n            });\r\n            this.tempo.registerOnUpBeat(function (currentTime) {\r\n                _this.nbUpBeatinBeat += 1;\r\n            });\r\n        }\r\n        TempoTest.prototype.start = function () {\r\n            this.tempo.start();\r\n        };\r\n        return TempoTest;\r\n    }());\r\n    exports.TempoTest = TempoTest;\r\n});\r\ndefine("src/modules/recorder/trackRecorder", ["require", "exports"], function (require, exports) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var TrackRecorder = /** @class */ (function () {\r\n        function TrackRecorder(log, instrument, soundHub, tempo) {\r\n            var _this = this;\r\n            this.isRecording = false;\r\n            this.isPlaying = false;\r\n            this._record = {};\r\n            this.startTime = 0;\r\n            this.recLength = 0;\r\n            this.onPlayedNote = function (note) {\r\n                _this.log("recorder for instrument " + _this.instrument + " is recording note " + note);\r\n                if (_this.isRecording) {\r\n                    var recTime = _this.tempo.getCurrentTime() - _this.startTime;\r\n                    _this._record[recTime] = note;\r\n                    _this.recLength = recTime;\r\n                    _this.log("Recording instrument " + _this.instrument + " note " + note + " at time " + recTime);\r\n                }\r\n            };\r\n            this.log = log;\r\n            this.instrument = instrument;\r\n            this.soundHub = soundHub;\r\n            this.tempo = tempo;\r\n            this.setSoundHub(soundHub);\r\n        }\r\n        TrackRecorder.prototype.setSoundHub = function (soundHub) {\r\n            soundHub.registerRecorder(this);\r\n        };\r\n        TrackRecorder.prototype.getInstrument = function () {\r\n            this.log("getInstrument() -> " + this.instrument);\r\n            return this.instrument;\r\n        };\r\n        TrackRecorder.prototype.startRecording = function () {\r\n            if (!this.isRecording && !this.isPlaying) {\r\n                this._record = {};\r\n                this.log("START RECORDING !!!");\r\n                this.startTime = this.tempo.getCurrentTime();\r\n                this.recLength = 0;\r\n                this.isRecording = true;\r\n            }\r\n        };\r\n        TrackRecorder.prototype.stop = function () {\r\n            if (this.isRecording) {\r\n                this.log("STOP RECORDING !!!");\r\n                this.isRecording = false;\r\n            }\r\n            if (this.isPlaying) {\r\n                this.log("STOP PLAYING !!!");\r\n                this.isPlaying = false;\r\n            }\r\n        };\r\n        TrackRecorder.prototype.startPlaying = function (endOfPlaying) {\r\n            var _this = this;\r\n            if (!this.isPlaying && !this.isRecording) {\r\n                this.log("START PLAYING !!!");\r\n                this.startTime = this.tempo.getCurrentTime();\r\n                this.isPlaying = true;\r\n                this.tempo.registerOnUpBeat(function (currentTime) {\r\n                    if (_this.isPlaying) {\r\n                        var recTime = currentTime - _this.startTime;\r\n                        if (recTime in _this._record) {\r\n                            var note = _this._record[recTime];\r\n                            _this.log("Play " + _this.instrument + " note " + note + " at time " + recTime);\r\n                            _this.soundHub.onPlayNote(_this.instrument, note);\r\n                        }\r\n                        if (recTime >= _this.recLength) {\r\n                            _this.stop();\r\n                            endOfPlaying();\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        };\r\n        return TrackRecorder;\r\n    }());\r\n    exports.TrackRecorder = TrackRecorder;\r\n});\r\ndefine("src/modules/ui_instruments/trackUI", ["require", "exports", "src/modules/image_container"], function (require, exports, image_container_3) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var eTrackStatus;\r\n    (function (eTrackStatus) {\r\n        eTrackStatus[eTrackStatus["DISABLED"] = 0] = "DISABLED";\r\n        eTrackStatus[eTrackStatus["EMPTY"] = 1] = "EMPTY";\r\n        eTrackStatus[eTrackStatus["RECORDING"] = 2] = "RECORDING";\r\n        eTrackStatus[eTrackStatus["READY"] = 3] = "READY";\r\n        eTrackStatus[eTrackStatus["PLAYING"] = 4] = "PLAYING";\r\n    })(eTrackStatus = exports.eTrackStatus || (exports.eTrackStatus = {}));\r\n    var TrackUI = /** @class */ (function () {\r\n        function TrackUI(log, parent) {\r\n            var _this = this;\r\n            this.status = eTrackStatus.DISABLED;\r\n            this.trackRecorder = null;\r\n            this.log = log;\r\n            this.container = new UIContainerRect(parent);\r\n            this.container.width = 160;\r\n            this.container.height = 40;\r\n            this.container.hAlign = \'center\';\r\n            // this.indicator.vAlign = \'top\';\r\n            this.container.positionY = 56;\r\n            this.container.visible = true;\r\n            this.container.isPointerBlocker = true;\r\n            this.container.visible = true;\r\n            this.container.opacity = 1.0;\r\n            this.play_stop_rec = new image_container_3.ImageContainer(this.container);\r\n            this.play_stop_rec.container().isPointerBlocker = true;\r\n            this.play_stop_rec.container().positionX = -100;\r\n            this.play_stop_rec.container().positionY = 0;\r\n            this.play_stop_rec.container().width = 28;\r\n            this.play_stop_rec.container().height = 28;\r\n            this.play_stop_rec.registerImage(\'play\', \'images/play.png\', 70, 70);\r\n            this.play_stop_rec.registerOnClickImage(\'play\', new OnClick(function (event) {\r\n                _this.log(\'onclick Play\');\r\n                if (_this.status == eTrackStatus.DISABLED)\r\n                    return;\r\n                if (_this.status == eTrackStatus.READY) {\r\n                    _this.changeStatus(eTrackStatus.PLAYING);\r\n                }\r\n            }));\r\n            this.play_stop_rec.registerImage(\'stop\', \'images/stop.png\', 70, 70);\r\n            this.play_stop_rec.registerOnClickImage(\'stop\', new OnClick(function (event) {\r\n                _this.log(\'onclick Stop\');\r\n                if (_this.status == eTrackStatus.DISABLED)\r\n                    return;\r\n                if ((_this.status == eTrackStatus.PLAYING) || (_this.status == eTrackStatus.RECORDING)) {\r\n                    _this.changeStatus(eTrackStatus.READY);\r\n                }\r\n            }));\r\n            this.play_stop_rec.registerImage(\'record\', \'images/record.png\', 70, 71);\r\n            this.play_stop_rec.registerOnClickImage(\'record\', new OnClick(function (event) {\r\n                _this.log(\'onclick Rec\');\r\n                if (_this.status == eTrackStatus.DISABLED)\r\n                    return;\r\n                if (_this.status == eTrackStatus.EMPTY) {\r\n                    _this.changeStatus(eTrackStatus.RECORDING);\r\n                }\r\n            }));\r\n            this.play_stop_rec.registerImage(\'disabled\', \'images/record_off.png\', 70, 70);\r\n            // this.img_play = new UIImage(this.container, new Texture(\'images/play.png\'));\r\n            // this.img_play.sourceWidth = 70;\r\n            // this.img_play.sourceHeight = 70;\r\n            // this.setButtonGeometry(this.img_play);\r\n            // this.img_play.onClick = new OnClick(event => {\r\n            //     this.log(\'onclick Play\');\r\n            //     if (this.status == eTrackStatus.READY) {\r\n            //         this.status = eTrackStatus.PLAYING;\r\n            //         this.swapButtonsAndTexts();\r\n            //     }\r\n            // });\r\n            // this.img_stop = new UIImage(this.container, new Texture(\'images/stop.png\'));\r\n            // this.img_stop.sourceWidth = 70;\r\n            // this.img_stop.sourceHeight = 70;\r\n            // this.setButtonGeometry(this.img_stop);\r\n            // this.img_stop.onClick = new OnClick(event => {\r\n            //     this.log(\'onclick Stop\');\r\n            //     if ((this.status == eTrackStatus.PLAYING) || (this.status == eTrackStatus.RECORDING)) {\r\n            //         this.status = eTrackStatus.READY;\r\n            //         this.swapButtonsAndTexts();\r\n            //     }\r\n            // });\r\n            // this.img_rec = new UIImage(this.container, new Texture(\'images/record.png\'));\r\n            // this.img_rec.sourceWidth = 70;\r\n            // this.img_rec.sourceHeight = 71;\r\n            // this.setButtonGeometry(this.img_rec);\r\n            // this.img_rec.onClick = new OnClick(event => {\r\n            //     this.log(\'onclick Rec\');\r\n            //     if (this.status == eTrackStatus.EMPTY) {\r\n            //         this.status = eTrackStatus.RECORDING;\r\n            //         this.swapButtonsAndTexts();\r\n            //     }\r\n            // });\r\n            this.delete = new image_container_3.ImageContainer(this.container);\r\n            this.delete.container().positionX = 15;\r\n            this.delete.container().positionY = \'0%\';\r\n            this.delete.container().width = 24;\r\n            this.delete.container().height = 24;\r\n            this.delete.registerImage(\'active\', \'images/cross_active.png\', 81, 84);\r\n            this.delete.registerOnClickImage(\'active\', new OnClick(function (event) {\r\n                _this.log(\'onclick Delete\');\r\n                if (_this.status == eTrackStatus.READY) {\r\n                    _this.changeStatus(eTrackStatus.EMPTY);\r\n                }\r\n            }));\r\n            this.delete.registerImage(\'inactive\', \'images/cross.png\', 81, 84);\r\n            // this.img_delete = new UIImage(this.container, new Texture(\'images/cross_active.png\'));\r\n            // this.img_delete.sourceWidth = 81;\r\n            // this.img_delete.sourceHeight = 84;\r\n            // this.img_delete.positionX = 70;\r\n            // this.img_delete.positionY = \'0%\';\r\n            // this.img_delete.width = 32;\r\n            // this.img_delete.height = 32;\r\n            // this.img_delete.onClick = new OnClick(event => {\r\n            //     this.log(\'onclick Delete\');\r\n            //     if (this.status == eTrackStatus.READY) {\r\n            //         this.status = eTrackStatus.EMPTY;\r\n            //         this.swapButtonsAndTexts();\r\n            //     }\r\n            // });\r\n            this.lcd = new image_container_3.ImageContainer(this.container);\r\n            this.lcd.registerImage(\'inactive\', \'images/LCD_background.png\', 417, 178);\r\n            this.lcd.registerImage(\'active\', \'images/LCD_background_playing.png\', 417, 178);\r\n            this.lcd.container().positionX = \'-15%\';\r\n            this.lcd.container().positionY = \'0%\';\r\n            this.lcd.container().width = 115;\r\n            this.lcd.container().height = \'100%\';\r\n            this.lcd.container().visible = true;\r\n            // let imageLCD = new UIImage(this.container, new Texture(\'images/LCD_background.png\'));\r\n            // imageLCD.positionX = \'-15%\';\r\n            // imageLCD.positionY = \'0%\';\r\n            // imageLCD.sourceWidth = 417;\r\n            // imageLCD.sourceHeight = 178;\r\n            // imageLCD.width = 160;\r\n            // imageLCD.height = \'100%\';\r\n            // imageLCD.visible = true;\r\n            // this.imageLCD_playing = new UIImage(imageLCD, new Texture(\'images/LCD_background_playing.png\'));\r\n            // this.imageLCD_playing.positionX = \'-15%\';\r\n            // this.imageLCD_playing.positionY = \'0%\';\r\n            // this.imageLCD_playing.sourceWidth = 417;\r\n            // this.imageLCD_playing.sourceHeight = 178;\r\n            // this.imageLCD_playing.width = \'100%\';\r\n            // this.imageLCD_playing.height = \'100%\';\r\n            // this.imageLCD_playing.visible = false;\r\n            this.txt_new_track = new UIText(this.lcd.container());\r\n            this.txt_new_track.value = " [+] New track";\r\n            this.txt_new_track.hTextAlign = \'left\';\r\n            this.setTextGeometry(this.txt_new_track);\r\n            this.txt_recording = new UIText(this.lcd.container());\r\n            this.txt_recording.value = "*RECORDING*";\r\n            this.txt_recording.color = Color4.Red();\r\n            this.txt_recording.hTextAlign = \'center\';\r\n            this.setTextGeometry(this.txt_recording);\r\n            this.txt_recording.fontSize = 13;\r\n            this.txt_playing = new UIText(this.lcd.container());\r\n            this.txt_playing.value = "*REPLAY*";\r\n            this.txt_playing.color = Color4.Green();\r\n            this.txt_playing.hTextAlign = \'left\';\r\n            this.setTextGeometry(this.txt_playing);\r\n            this.txt_playing.fontSize = 13;\r\n            this.txt_track = new UIText(this.lcd.container());\r\n            this.txt_track.value = "TRACK_#";\r\n            this.txt_track.hTextAlign = \'left\';\r\n            this.txt_track.textWrapping = true;\r\n            this.txt_track.color = Color4.Teal();\r\n            this.txt_track.shadowBlur = 20;\r\n            this.setTextGeometry(this.txt_track);\r\n            this.swapButtonsAndTexts();\r\n        }\r\n        TrackUI.prototype.setTrackRecorder = function (trackRecorder) {\r\n            this.trackRecorder = trackRecorder;\r\n        };\r\n        TrackUI.prototype.enable = function (enable) {\r\n            var newStatus = eTrackStatus.DISABLED;\r\n            if (enable) {\r\n                newStatus = eTrackStatus.EMPTY;\r\n            }\r\n            this.changeStatus(newStatus, false);\r\n        };\r\n        TrackUI.prototype.setPosition = function (posX, posY) {\r\n            this.container.positionX = posX;\r\n            this.container.positionY = posY;\r\n        };\r\n        TrackUI.prototype.setTextGeometry = function (text) {\r\n            var posX = 0;\r\n            var posY = \'45%\';\r\n            var fontFamily = \'LCD\';\r\n            var fontAutoSize = true;\r\n            var fontWeight = \'bold\';\r\n            text.fontSize = 15;\r\n            text.width = 100;\r\n            text.positionX = posX;\r\n            text.positionY = posY;\r\n            // text.fontFamily = \'LCD\';\r\n            // text.fontAutoSize = fontAutoSize;\r\n            text.fontWeight = fontWeight;\r\n        };\r\n        // setButtonGeometry(button: UIImage) {\r\n        //     let button_posX = -120;\r\n        //     let button_posY = 0;\r\n        //     let button_width = 32;\r\n        //     let button_height = 32;\r\n        //     button.isPointerBlocker = true;\r\n        //     button.positionX = button_posX;\r\n        //     button.positionY = button_posY;\r\n        //     button.width = button_width;\r\n        //     button.height = button_height;\r\n        // }\r\n        TrackUI.prototype.swapButtonsAndTexts = function () {\r\n            switch (this.status) {\r\n                case eTrackStatus.DISABLED: {\r\n                    // this.img_rec.visible = true;\r\n                    // this.img_play.visible = false;\r\n                    // this.img_delete.visible = false;\r\n                    // this.img_stop.visible = false;\r\n                    this.txt_new_track.visible = true;\r\n                    this.txt_new_track.color = Color4.Gray();\r\n                    this.txt_recording.visible = false;\r\n                    this.txt_playing.visible = false;\r\n                    this.txt_track.visible = false;\r\n                    this.play_stop_rec.makeOneVisible(\'disabled\');\r\n                    this.delete.makeAllInvisible();\r\n                    this.lcd.makeOneVisible(\'inactive\');\r\n                    break;\r\n                }\r\n                case eTrackStatus.EMPTY: {\r\n                    // this.img_rec.visible = true;\r\n                    // this.img_play.visible = false;\r\n                    // this.img_delete.visible = false;\r\n                    // this.img_stop.visible = false;\r\n                    this.txt_new_track.visible = true;\r\n                    this.txt_new_track.color = Color4.White();\r\n                    this.txt_recording.visible = false;\r\n                    this.txt_playing.visible = false;\r\n                    this.txt_track.visible = false;\r\n                    this.play_stop_rec.makeOneVisible(\'record\');\r\n                    this.delete.makeAllInvisible();\r\n                    this.lcd.makeOneVisible(\'inactive\');\r\n                    break;\r\n                }\r\n                case eTrackStatus.RECORDING: {\r\n                    // this.img_rec.visible = false;\r\n                    // this.img_play.visible = false;\r\n                    // this.img_delete.visible = false;\r\n                    // this.img_stop.visible = true;\r\n                    this.txt_new_track.visible = false;\r\n                    this.txt_recording.visible = true;\r\n                    this.txt_playing.visible = false;\r\n                    this.txt_track.visible = false;\r\n                    this.play_stop_rec.makeOneVisible(\'stop\');\r\n                    this.delete.makeOneVisible(\'inactive\');\r\n                    this.lcd.makeOneVisible(\'active\');\r\n                    break;\r\n                }\r\n                case eTrackStatus.READY: {\r\n                    // this.img_rec.visible = false;\r\n                    // this.img_play.visible = true;\r\n                    // this.img_delete.visible = true;\r\n                    // this.img_stop.visible = false;\r\n                    this.txt_new_track.visible = false;\r\n                    this.txt_recording.visible = false;\r\n                    this.txt_playing.visible = false;\r\n                    this.txt_track.visible = true;\r\n                    this.play_stop_rec.makeOneVisible(\'play\');\r\n                    this.delete.makeOneVisible(\'active\');\r\n                    this.lcd.makeOneVisible(\'inactive\');\r\n                    break;\r\n                }\r\n                case eTrackStatus.PLAYING: {\r\n                    // this.img_rec.visible = false;\r\n                    // this.img_play.visible = false;\r\n                    // this.img_delete.visible = false;\r\n                    // this.img_stop.visible = true;\r\n                    this.txt_new_track.visible = false;\r\n                    this.txt_recording.visible = false;\r\n                    this.txt_playing.visible = true;\r\n                    this.txt_track.visible = false;\r\n                    this.play_stop_rec.makeOneVisible(\'stop\');\r\n                    this.delete.makeOneVisible(\'inactive\');\r\n                    this.lcd.makeOneVisible(\'active\');\r\n                    break;\r\n                }\r\n            }\r\n        };\r\n        TrackUI.prototype.registerOnStatusChanged = function (callback) {\r\n            this.onChangeCallback = callback;\r\n        };\r\n        TrackUI.prototype.changeStatus = function (newStatus, notify) {\r\n            var _this = this;\r\n            if (notify === void 0) { notify = true; }\r\n            var oldStatus = this.status;\r\n            if (oldStatus == newStatus)\r\n                return;\r\n            this.status = newStatus;\r\n            this.swapButtonsAndTexts();\r\n            if (this.trackRecorder) {\r\n                if (this.status == eTrackStatus.RECORDING) {\r\n                    this.trackRecorder.startRecording();\r\n                }\r\n                if (oldStatus == eTrackStatus.RECORDING) {\r\n                    this.trackRecorder.stop();\r\n                }\r\n                if (this.status == eTrackStatus.PLAYING) {\r\n                    this.trackRecorder.startPlaying(function () {\r\n                        _this.changeStatus(eTrackStatus.READY);\r\n                    });\r\n                }\r\n                if (oldStatus == eTrackStatus.PLAYING) {\r\n                    this.trackRecorder.stop();\r\n                }\r\n            }\r\n            if (notify && this.onChangeCallback)\r\n                this.onChangeCallback(this, newStatus);\r\n        };\r\n        TrackUI.prototype.getStatus = function () {\r\n            return this.status;\r\n        };\r\n        return TrackUI;\r\n    }());\r\n    exports.TrackUI = TrackUI;\r\n});\r\ndefine("src/modules/ui_instruments/recorder_ui", ["require", "exports", "src/modules/ui_instruments/tempoUI", "src/modules/ui_instruments/trackUI", "src/modules/recorder/trackRecorder", "src/modules/ui_wrapper"], function (require, exports, tempoUI_1, trackUI_1, trackRecorder_1, ui_wrapper_2) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var RecorderUI = /** @class */ (function (_super) {\r\n        __extends(RecorderUI, _super);\r\n        function RecorderUI(log, parent, soundHub, tempo) {\r\n            var _this = _super.call(this, log, parent) || this;\r\n            _this.tracks = [];\r\n            _this.soundHub = soundHub;\r\n            _this.tempo = tempo;\r\n            _this.container.width = 360;\r\n            _this.container.height = 230;\r\n            _this.container.hAlign = \'right\';\r\n            _this.container.positionY = -350;\r\n            var imageTexture = new Texture(\'images/audio_device_background_2.png\');\r\n            _this.image = new UIImage(_this.container, imageTexture);\r\n            _this.image.hAlign = \'center\';\r\n            // this.image.positionY = \'0%\';\r\n            _this.image.vAlign = \'top\';\r\n            // this.image.paddingTop = \'50%\';\r\n            _this.image.sourceWidth = 650;\r\n            _this.image.sourceHeight = 416;\r\n            _this.image.width = "100%";\r\n            _this.image.height = "100%";\r\n            _this.image.opacity = 1.0;\r\n            // this.image.isPointerBlocker = true;\r\n            _this.addCloseButton();\r\n            var posXs = [-50, 120];\r\n            // let posYs = [\'-25%\', \'-10%\', \'+5%\', \'+20%\'];\r\n            var posYs = [\'20%\', \'5%\', \'-10%\', \'-25%\'];\r\n            for (var i = 0; i < 2; i++) {\r\n                for (var j = 0; j < 4; j++) {\r\n                    var track = new trackUI_1.TrackUI(_this.log, _this.image);\r\n                    track.setPosition(posXs[i], posYs[j]);\r\n                    track.registerOnStatusChanged(function (theTrack, status) {\r\n                        _this.refreshTrackActivation();\r\n                    });\r\n                    _this.tracks.push(track);\r\n                }\r\n            }\r\n            _this.refreshTrackActivation();\r\n            _this.indicator = new tempoUI_1.TempoUI(_this.log, _this.image);\r\n            _this.indicator.setPosition(-80, \'+38%\');\r\n            _this.indicator.registerOnTempoChanged(function (isStarted, isFrozen) {\r\n                if (isStarted) {\r\n                    if (_this.tempo.isFrozen) {\r\n                        _this.indicator.setBeat(1 + _this.tempo.getCurrentBeatInPhrase());\r\n                        _this.tempo.resume();\r\n                    }\r\n                    else {\r\n                        _this.indicator.setBeat(1 + _this.tempo.getCurrentBeatInPhrase());\r\n                        _this.tempo.start();\r\n                    }\r\n                }\r\n                else if (isFrozen) {\r\n                    _this.tempo.freeze();\r\n                    _this.indicator.setBeat(1 + _this.tempo.getCurrentBeatInPhrase());\r\n                }\r\n                else {\r\n                    _this.indicator.setBeat(0);\r\n                    _this.tempo.stop();\r\n                }\r\n            });\r\n            _this.tempo.registerOnBeat(function (currentPhrase, currentBar, currentBeat, currentBeatInPhrase) {\r\n                _this.indicator.setBeat(1 + currentBeatInPhrase);\r\n            });\r\n            return _this;\r\n        }\r\n        RecorderUI.prototype.refreshTrackActivation = function () {\r\n            var e_8, _a;\r\n            // We want only one track in RECORDING or EMPTY mode, otherwise :\r\n            // - if none of them, then activate the first DISABLED one\r\n            // - or if several of them, disable all except the first one\r\n            var recording = false;\r\n            var firstEmpty = null;\r\n            var firstDisabled = null;\r\n            try {\r\n                for (var _b = __values(this.tracks), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var track = _c.value;\r\n                    if (track.getStatus() == trackUI_1.eTrackStatus.EMPTY) {\r\n                        if (!firstEmpty) {\r\n                            firstEmpty = track;\r\n                        }\r\n                        else {\r\n                            track.enable(false);\r\n                        }\r\n                    }\r\n                    if (track.getStatus() == trackUI_1.eTrackStatus.RECORDING) {\r\n                        recording = true;\r\n                    }\r\n                    if (!firstDisabled && (track.getStatus() == trackUI_1.eTrackStatus.DISABLED)) {\r\n                        firstDisabled = track;\r\n                    }\r\n                }\r\n            }\r\n            catch (e_8_1) { e_8 = { error: e_8_1 }; }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n                }\r\n                finally { if (e_8) throw e_8.error; }\r\n            }\r\n            if (recording && firstEmpty)\r\n                firstEmpty.enable(false);\r\n            if (!recording && !firstEmpty && firstDisabled) {\r\n                var trackRecorder = new trackRecorder_1.TrackRecorder(this.log, this.instrument, this.soundHub, this.tempo);\r\n                firstDisabled.setTrackRecorder(trackRecorder);\r\n                firstDisabled.enable(true);\r\n            }\r\n        };\r\n        RecorderUI.prototype.setActiveInstrument = function (instrument) {\r\n            var _this = this;\r\n            this.instrument = instrument;\r\n            this.tracks.forEach(function (track) {\r\n                track.setTrackRecorder(new trackRecorder_1.TrackRecorder(_this.log, _this.instrument, _this.soundHub, _this.tempo));\r\n            });\r\n        };\r\n        return RecorderUI;\r\n    }(ui_wrapper_2.UIWrapper));\r\n    exports.RecorderUI = RecorderUI;\r\n});\r\ndefine("src/modules/recorder/recorder3D", ["require", "exports", "src/modules/entity_wrapper"], function (require, exports, entity_wrapper_5) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var Recorder3D = /** @class */ (function (_super) {\r\n        __extends(Recorder3D, _super);\r\n        function Recorder3D() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        Recorder3D.prototype.getShape = function () {\r\n            return new GLTFShape(\'models/recorder.gltf\');\r\n        };\r\n        Recorder3D.prototype.getMaterial = function () {\r\n            return null;\r\n        };\r\n        return Recorder3D;\r\n    }(entity_wrapper_5.EntityWrapper));\r\n    exports.Recorder3D = Recorder3D;\r\n});\r\ndefine("src/modules/instruments/drumset", ["require", "exports", "src/modules/instruments/Instrument", "src/modules/instruments/note"], function (require, exports, Instrument_4, note_6) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var modelFile = \'models/drumset_low_poly.gltf\';\r\n    var soundFileExtension = ".wav";\r\n    var drumsModelFile = {\r\n        "cymbal1": "models/cymbal1.gltf",\r\n        "cymbal2": "models/cymbal2.gltf",\r\n        "cymbal3": "models/cymbal3.gltf",\r\n        "snare": "models/snare.gltf",\r\n        "tom1": "models/tom1.gltf",\r\n        "tom2": "models/tom2.gltf",\r\n        "floor": "models/floor.gltf",\r\n        "kick": "models/kick.gltf",\r\n    };\r\n    var drumsUiImages = {\r\n        "cymbal1": { image: "images/drums_ui_cymbal1.png", sourceWidth: 297, sourceHeight: 110, posX: -210, posY: -12 },\r\n        "cymbal2": { image: "images/drums_ui_cymbal2.png", sourceWidth: 282, sourceHeight: 106, posX: -157, posY: 87 },\r\n        "cymbal3": { image: "images/drums_ui_cymbal3.png", sourceWidth: 240, sourceHeight: 180, posX: 225, posY: 63 },\r\n        "snare": { image: "images/drums_ui_snare.png", sourceWidth: 305, sourceHeight: 146, posX: -200, posY: -120 },\r\n        "tom1": { image: "images/drums_ui_tom1.png", sourceWidth: 197, sourceHeight: 105, posX: -53, posY: 38 },\r\n        "tom2": { image: "images/drums_ui_tom2.png", sourceWidth: 206, sourceHeight: 114, posX: 95, posY: 38 },\r\n        "floor": { image: "images/drums_ui_floor.png", sourceWidth: 297, sourceHeight: 161, posX: 210, posY: -95 },\r\n        "kick": { image: "images/drums_ui_kick.png", sourceWidth: 337, sourceHeight: 160, posX: 0, posY: -110 },\r\n    };\r\n    var soundsPath = "sounds/drums/";\r\n    var drumsNotes;\r\n    function getDrumsNotes() {\r\n        if (!drumsNotes) {\r\n            drumsNotes = [];\r\n            var index = 0;\r\n            for (var note in drumsModelFile) {\r\n                var soundFile = soundsPath + note + soundFileExtension;\r\n                drumsNotes.push({\r\n                    note: note, index: index, song: soundFile, extras: {\r\n                        "model": drumsModelFile[note],\r\n                        "ui_image": drumsUiImages[note].image,\r\n                        "ui_posX": drumsUiImages[note].posX,\r\n                        "ui_posY": drumsUiImages[note].posY,\r\n                        "ui_sourceWidth": drumsUiImages[note].sourceWidth,\r\n                        "ui_sourceHeight": drumsUiImages[note].sourceHeight\r\n                    }\r\n                });\r\n                index++;\r\n            }\r\n        }\r\n        return drumsNotes;\r\n    }\r\n    exports.getDrumsNotes = getDrumsNotes;\r\n    var instrument = "drums";\r\n    var DrumSet = /** @class */ (function (_super) {\r\n        __extends(DrumSet, _super);\r\n        function DrumSet(log, soundHub, transform) {\r\n            var _this = _super.call(this, log, soundHub, transform) || this;\r\n            _this.createNotes(soundHub, DrumItem, getDrumsNotes());\r\n            return _this;\r\n        }\r\n        DrumSet.prototype.getMaterial = function () {\r\n            return null;\r\n        };\r\n        DrumSet.prototype.getShape = function () {\r\n            return new GLTFShape(modelFile);\r\n        };\r\n        DrumSet.prototype.getTransformForNote = function (noteProp) {\r\n            return new Transform({\r\n                position: new Vector3(0.0, 0.0, 0.0)\r\n            });\r\n        };\r\n        return DrumSet;\r\n    }(Instrument_4.Instrument));\r\n    exports.DrumSet = DrumSet;\r\n    var DrumItem = /** @class */ (function (_super) {\r\n        __extends(DrumItem, _super);\r\n        function DrumItem() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        // constructor (log: (string )=> void, transform: Transform, parent: Entity, noteProp: INoteProps) {\r\n        //     super(log, transform, parent, noteProp);\r\n        // }\r\n        DrumItem.prototype.getInstrument = function () {\r\n            return instrument;\r\n        };\r\n        DrumItem.prototype.getMaterial = function () {\r\n            return null;\r\n        };\r\n        DrumItem.prototype.getShape = function () {\r\n            return null;\r\n        };\r\n        DrumItem.prototype.getNoteShape = function (noteProp) {\r\n            return new GLTFShape(noteProp.extras["model"]);\r\n        };\r\n        DrumItem.prototype.animate = function () {\r\n        };\r\n        return DrumItem;\r\n    }(note_6.Note));\r\n    exports.DrumItem = DrumItem;\r\n});\r\ndefine("src/modules/ui_instruments/drumset_ui", ["require", "exports", "src/modules/ui_instruments/UIInstrument", "src/modules/image_container", "src/modules/instruments/drumset"], function (require, exports, UIInstrument_3, image_container_4, drumset_1) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var instrument = "drums";\r\n    var imageTexture = new Texture(\'images/drumset_ui.png\');\r\n    var imageSourceWidth = 973;\r\n    var imageSourceHeight = 401;\r\n    var uiWidth = 600;\r\n    var uiHeight = 350;\r\n    var DrumSetUI = /** @class */ (function (_super) {\r\n        __extends(DrumSetUI, _super);\r\n        function DrumSetUI(log, parent) {\r\n            var _this = _super.call(this, log, parent) || this;\r\n            // this.container.width = 640;\r\n            // this.container.hAlign = \'left\';\r\n            _this.image = new UIImage(_this.container, imageTexture);\r\n            _this.image.hAlign = \'center\';\r\n            _this.image.positionY = 0;\r\n            _this.image.paddingTop = 50; // under the close button\r\n            // this.image.paddingLeft = 100;\r\n            _this.image.sourceWidth = imageSourceWidth;\r\n            _this.image.sourceHeight = imageSourceHeight;\r\n            _this.image.width = uiWidth;\r\n            _this.image.height = uiHeight;\r\n            _this.image.isPointerBlocker = true;\r\n            _this.image.opacity = 1.0;\r\n            _this.image.onClick = new OnClick(function () {\r\n                _this.log("On click DrumSet_ui");\r\n            });\r\n            var toolName = new UIText(_this.container);\r\n            toolName.value = "Drums";\r\n            toolName.fontSize = 20;\r\n            toolName.vAlign = \'top\';\r\n            toolName.width = \'150px\';\r\n            toolName.height = \'35px\';\r\n            toolName.positionX = 20;\r\n            toolName.paddingTop = -10;\r\n            toolName.color = Color4.FromHexString(\'#0F1217ff\');\r\n            return _this;\r\n        }\r\n        DrumSetUI.prototype.setSoundHub = function (soundHub) {\r\n            _super.prototype.setSoundHub.call(this, soundHub);\r\n            this.createNotes(soundHub, drumset_1.getDrumsNotes());\r\n        };\r\n        DrumSetUI.prototype.createNotes = function (soundHub, noteProps) {\r\n            var e_9, _a;\r\n            var _this = this;\r\n            var offsetX = 19.5;\r\n            var posX = -300;\r\n            var posY = \'20%\';\r\n            var _loop_3 = function (noteProp) {\r\n                var imageSource = noteProp.extras["ui_image"];\r\n                var posX_1 = noteProp.extras["ui_posX"];\r\n                var posY_1 = noteProp.extras["ui_posY"];\r\n                var sourceWidth = noteProp.extras["ui_sourceWidth"];\r\n                var sourceHeight = noteProp.extras["ui_sourceHeight"];\r\n                this_3.log("DrumSetUI : Add image " + imageSource + " at position " + posX_1 + ", " + posY_1);\r\n                var imageContainer = new image_container_4.ImageContainer(this_3.container);\r\n                var width = Math.round(sourceWidth * uiWidth / imageSourceWidth);\r\n                var height = Math.round(sourceHeight * uiHeight / imageSourceHeight);\r\n                imageContainer.container().width = width;\r\n                imageContainer.container().height = height;\r\n                imageContainer.container().positionX = posX_1;\r\n                imageContainer.container().positionY = posY_1;\r\n                imageContainer.registerImage(\'normal\', imageSource, sourceWidth, sourceHeight);\r\n                // End specific\r\n                imageContainer.registerOnClickImage(\'normal\', new OnClick(function (event) {\r\n                    _this.log("DrumSetUI : Press on key " + noteProp.note);\r\n                    _this.onClickCallback(noteProp.note);\r\n                }));\r\n                imageContainer.makeOneVisible(\'normal\');\r\n            };\r\n            var this_3 = this;\r\n            try {\r\n                for (var noteProps_3 = __values(noteProps), noteProps_3_1 = noteProps_3.next(); !noteProps_3_1.done; noteProps_3_1 = noteProps_3.next()) {\r\n                    var noteProp = noteProps_3_1.value;\r\n                    _loop_3(noteProp);\r\n                }\r\n            }\r\n            catch (e_9_1) { e_9 = { error: e_9_1 }; }\r\n            finally {\r\n                try {\r\n                    if (noteProps_3_1 && !noteProps_3_1.done && (_a = noteProps_3.return)) _a.call(noteProps_3);\r\n                }\r\n                finally { if (e_9) throw e_9.error; }\r\n            }\r\n        };\r\n        DrumSetUI.prototype.getInstrument = function () {\r\n            return instrument;\r\n        };\r\n        return DrumSetUI;\r\n    }(UIInstrument_3.UIInstrument));\r\n    exports.DrumSetUI = DrumSetUI;\r\n});\r\ndefine("src/modules/instruments/guitar_elec", ["require", "exports", "src/modules/instruments/Instrument", "src/modules/instruments/note"], function (require, exports, Instrument_5, note_7) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var guitarElecModelFile = "models/guitar_elec.gltf";\r\n    var soundsPath = "sounds/guitar_elec/";\r\n    var extension = ".wav";\r\n    var guitarElecNotes;\r\n    function getGuitarElecNotes() {\r\n        var e_10, _a, e_11, _b;\r\n        if (!guitarElecNotes) {\r\n            guitarElecNotes = [];\r\n            var index = 0;\r\n            var cord = 1;\r\n            var position = 0;\r\n            try {\r\n                for (var _c = __values([2, 3, 4]), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var octave = _d.value;\r\n                    try {\r\n                        for (var _e = (e_11 = void 0, __values(["C", "D", "E", "F", "G", "A", "B"])), _f = _e.next(); !_f.done; _f = _e.next()) {\r\n                            var letter = _f.value;\r\n                            if ((octave === 2) && (["C", "D"].indexOf(letter) !== -1))\r\n                                continue; // start with E2\r\n                            var note = letter + octave;\r\n                            if (((octave === 2) && (letter === "A")) ||\r\n                                ((octave === 3) && (letter === "D")) ||\r\n                                ((octave === 3) && (letter === "G")) ||\r\n                                ((octave === 3) && (letter === "B")) ||\r\n                                ((octave === 4) && (letter === "E"))) { // change cord\r\n                                guitarElecNotes.push({\r\n                                    note: note + "_", index: index, song: soundsPath + note + extension, extras: { "cord": cord, "position": position }\r\n                                });\r\n                                cord++;\r\n                                position = 0;\r\n                            }\r\n                            guitarElecNotes.push({\r\n                                note: note, index: index, song: soundsPath + note + extension, extras: { "cord": cord, "position": position }\r\n                            });\r\n                            index++;\r\n                            position++;\r\n                            if ((octave === 4) && (letter === "A"))\r\n                                break; // end with A4\r\n                            if (["A", "C", "D", "F", "G"].indexOf(letter) !== -1) {\r\n                                var note_8 = letter + octave + "_sharp";\r\n                                guitarElecNotes.push({\r\n                                    note: note_8, index: index, song: soundsPath + note_8 + extension, extras: { "cord": cord, "position": position }\r\n                                });\r\n                                index++;\r\n                                position++;\r\n                            }\r\n                        }\r\n                    }\r\n                    catch (e_11_1) { e_11 = { error: e_11_1 }; }\r\n                    finally {\r\n                        try {\r\n                            if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\r\n                        }\r\n                        finally { if (e_11) throw e_11.error; }\r\n                    }\r\n                }\r\n            }\r\n            catch (e_10_1) { e_10 = { error: e_10_1 }; }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\r\n                }\r\n                finally { if (e_10) throw e_10.error; }\r\n            }\r\n        }\r\n        return guitarElecNotes;\r\n    }\r\n    exports.getGuitarElecNotes = getGuitarElecNotes;\r\n    var GuitarElecNote = /** @class */ (function (_super) {\r\n        __extends(GuitarElecNote, _super);\r\n        function GuitarElecNote() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        GuitarElecNote.prototype.getShape = function () {\r\n            return new PlaneShape();\r\n        };\r\n        GuitarElecNote.prototype.getMaterial = function () {\r\n            var material = new Material();\r\n            material.albedoTexture = new Texture("images/fingerprint2.png", { hasAlpha: true });\r\n            material.hasAlpha = true;\r\n            return material;\r\n        };\r\n        GuitarElecNote.prototype.getNoteShape = function (noteProp) {\r\n            return null;\r\n        };\r\n        GuitarElecNote.prototype.getInstrument = function () {\r\n            return "guitar_elec";\r\n        };\r\n        GuitarElecNote.prototype.animate = function () {\r\n        };\r\n        return GuitarElecNote;\r\n    }(note_7.Note));\r\n    exports.GuitarElecNote = GuitarElecNote;\r\n    var GuitarElec = /** @class */ (function (_super) {\r\n        __extends(GuitarElec, _super);\r\n        function GuitarElec(log, soundHub, transform) {\r\n            var _this = _super.call(this, log, soundHub, transform) || this;\r\n            _this.createNotes(soundHub, GuitarElecNote, getGuitarElecNotes());\r\n            return _this;\r\n        }\r\n        GuitarElec.prototype.getMaterial = function () {\r\n            return null;\r\n        };\r\n        GuitarElec.prototype.getShape = function () {\r\n            return new GLTFShape(guitarElecModelFile);\r\n        };\r\n        GuitarElec.prototype.getTransformForNote = function (noteProp) {\r\n            var posX = -1.06;\r\n            var posY = 1.1;\r\n            var posZ = -5.7;\r\n            var noteCord = noteProp.extras[\'cord\'];\r\n            var notePosition = noteProp.extras[\'position\'];\r\n            return new Transform({\r\n                position: new Vector3(posX - 0.11 * noteCord + 0.07 * notePosition, posY, posZ + 0.54 * notePosition - 0.04 * noteCord),\r\n                rotation: Quaternion.Euler(90, 0, -10),\r\n                scale: new Vector3(0.12, 0.5, 0.1),\r\n            });\r\n        };\r\n        return GuitarElec;\r\n    }(Instrument_5.Instrument));\r\n    exports.GuitarElec = GuitarElec;\r\n});\r\ndefine("src/modules/ui_instruments/guitar_elec_ui", ["require", "exports", "src/modules/ui_instruments/UIInstrument", "src/modules/instruments/guitar_elec"], function (require, exports, UIInstrument_4, guitar_elec_1) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var instrument = "guitar_elec";\r\n    var imageTexture = new Texture(\'images/guitar_elec.png\');\r\n    var GuitarElecUI = /** @class */ (function (_super) {\r\n        __extends(GuitarElecUI, _super);\r\n        function GuitarElecUI(log, parent) {\r\n            var _this = _super.call(this, log, parent) || this;\r\n            _this.image = new UIImage(_this.container, imageTexture);\r\n            _this.image.hAlign = \'center\';\r\n            _this.image.positionY = \'30%\';\r\n            _this.image.paddingTop = 50; // under the close button\r\n            _this.image.sourceWidth = 417;\r\n            _this.image.sourceHeight = 178;\r\n            _this.image.width = "100%";\r\n            _this.image.height = "180%";\r\n            _this.image.isPointerBlocker = true;\r\n            _this.image.opacity = 1.0;\r\n            var toolName = new UIText(_this.container);\r\n            toolName.value = "Electrical Guitar";\r\n            toolName.fontSize = 20;\r\n            toolName.vAlign = \'top\';\r\n            toolName.width = \'150px\';\r\n            toolName.height = \'35px\';\r\n            toolName.positionX = 20;\r\n            toolName.paddingTop = -10;\r\n            toolName.color = Color4.FromHexString(\'#0F1217ff\');\r\n            return _this;\r\n        }\r\n        GuitarElecUI.prototype.setSoundHub = function (soundHub) {\r\n            _super.prototype.setSoundHub.call(this, soundHub);\r\n            this.createNotes(soundHub, guitar_elec_1.getGuitarElecNotes());\r\n        };\r\n        GuitarElecUI.prototype.createNotes = function (soundHub, noteProps) {\r\n            var e_12, _a;\r\n            // let tabPositionX = [\'32.5%\', \'25%\', \'18.7%\', \'12.6%\', \'6.7%\', \'1.0%\'];\r\n            var tabPositionX = [\'35%\', \'28.5%\', \'22.5%\', \'16.5%\', \'11.5%\', \'7%\'];\r\n            // let cordPositionY = [\'7%\', \'3%\', \'-1%\', \'-5%\'];\r\n            var cordPositionY = [\'-1.5%\', \'-5%\', \'-8.5%\', \'-12%\', \'-15.5%\', \'-19%\'];\r\n            try {\r\n                for (var noteProps_4 = __values(noteProps), noteProps_4_1 = noteProps_4.next(); !noteProps_4_1.done; noteProps_4_1 = noteProps_4.next()) {\r\n                    var noteProp = noteProps_4_1.value;\r\n                    var noteCord = noteProp.extras[\'cord\'];\r\n                    var notePosition = noteProp.extras[\'position\'];\r\n                    var item = new BassItemUI(this.log, this.image, noteProp.note, tabPositionX[notePosition], cordPositionY[noteCord - 1]);\r\n                    item.setSoundHub(soundHub);\r\n                }\r\n            }\r\n            catch (e_12_1) { e_12 = { error: e_12_1 }; }\r\n            finally {\r\n                try {\r\n                    if (noteProps_4_1 && !noteProps_4_1.done && (_a = noteProps_4.return)) _a.call(noteProps_4);\r\n                }\r\n                finally { if (e_12) throw e_12.error; }\r\n            }\r\n        };\r\n        GuitarElecUI.prototype.getInstrument = function () {\r\n            return instrument;\r\n        };\r\n        return GuitarElecUI;\r\n    }(UIInstrument_4.UIInstrument));\r\n    exports.GuitarElecUI = GuitarElecUI;\r\n    var imageItem = new Texture("images/bassItemUI.png", { hasAlpha: true });\r\n    var BassItemUI = /** @class */ (function () {\r\n        function BassItemUI(log, parent, note, posX, posY) {\r\n            var _this = this;\r\n            // **** INoteController implementation ****\r\n            this._onPlayedNoteCallbacks = [];\r\n            this.log = log;\r\n            this.image = new UIImage(parent, imageItem);\r\n            this.image.positionX = posX;\r\n            this.image.positionY = posY;\r\n            this.image.sourceWidth = 680;\r\n            this.image.sourceHeight = 518;\r\n            this.image.width = 30;\r\n            this.image.height = 14;\r\n            this.note = note;\r\n            this.image.isPointerBlocker = true;\r\n            this.image.onClick = new OnClick(function (event) { _this.onClickCallback(); });\r\n        }\r\n        BassItemUI.prototype.setSoundHub = function (soundHub) {\r\n            this.soundHub = soundHub;\r\n            this.soundHub.registerNoteController(this);\r\n        };\r\n        BassItemUI.prototype.registerOnPlayedNote = function (onPlayNote) {\r\n            // allow registering to allow recording from UI\r\n            this._onPlayedNoteCallbacks.push(onPlayNote);\r\n        };\r\n        BassItemUI.prototype.getInstrument = function () {\r\n            return instrument;\r\n        };\r\n        BassItemUI.prototype.getNote = function () {\r\n            return this.note;\r\n        };\r\n        // ****************************************\r\n        BassItemUI.prototype.notifyPlaying = function () {\r\n            var _this = this;\r\n            // Notify listeners to allow recording\r\n            this.log("BassItemUI : play note " + this.note);\r\n            this._onPlayedNoteCallbacks.forEach(function (onPlayNote) {\r\n                onPlayNote.call(_this, _this.getInstrument(), _this.note);\r\n            });\r\n        };\r\n        BassItemUI.prototype.onClickCallback = function () {\r\n            // relay towards the 3D entity containing the sound Component\r\n            this.soundHub.onPlayNote(this.getInstrument(), this.note);\r\n            this.notifyPlaying();\r\n        };\r\n        return BassItemUI;\r\n    }());\r\n    exports.BassItemUI = BassItemUI;\r\n});\r\ndefine("src/game", ["require", "exports", "src/modules/land", "src/modules/soundhub/soundhub", "src/modules/instruments/piano", "src/modules/play_it", "src/modules/ui_instruments/bass_ui", "src/modules/ui_instruments/piano_ui", "src/modules/ui_instruments/recorder_ui", "src/modules/recorder/tempo", "src/modules/recorder/recorder3D", "src/modules/instruments/drumset", "src/modules/ui_instruments/drumset_ui", "src/modules/instruments/guitar_elec", "src/modules/ui_instruments/guitar_elec_ui", "src/modules/instruments/bass", "src/modules/ui_wrapper"], function (require, exports, land_1, soundhub_1, piano_2, play_it_1, bass_ui_1, piano_ui_1, recorder_ui_1, tempo_1, recorder3D_1, drumset_2, drumset_ui_1, guitar_elec_2, guitar_elec_ui_1, bass_2, ui_wrapper_3) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    function trace(message) {\r\n        console.log(message);\r\n    }\r\n    var soundHub = new soundhub_1.SoundHub(trace);\r\n    var gameCanvas = new UICanvas();\r\n    var complete = false;\r\n    var features = {\r\n        \'land\': true,\r\n        \'instrument_test\': false,\r\n        \'piano\': true,\r\n        \'bass\': true,\r\n        \'guitar_elec\': true,\r\n        \'drumset\': true,\r\n        \'recorder\': true\r\n    };\r\n    if (!complete) {\r\n        features = {\r\n            \'land\': false,\r\n            \'instrument_test\': false,\r\n            \'piano\': false,\r\n            \'bass\': false,\r\n            \'guitar_elec\': false,\r\n            \'drumset\': false,\r\n            \'recorder\': false\r\n        };\r\n    }\r\n    if (features.land) {\r\n        var land = new land_1.Land(trace, new Transform({\r\n            position: new Vector3(8.0, 0.0, 15.8),\r\n            rotation: Quaternion.Euler(0, 0, 0),\r\n            scale: new Vector3(0.97, 0.97, 0.97)\r\n        }));\r\n        engine.addEntity(land.getEntity());\r\n    }\r\n    // const instrument = new TestInstrument(trace, soundHub, new Transform({\r\n    //   position: new Vector3(8.0, 0.0, 8.0)\r\n    // }));\r\n    if (features.piano) {\r\n        var piano = new piano_2.Piano(trace, soundHub, new Transform({\r\n            position: new Vector3(2, 0.3, 13.0),\r\n            rotation: Quaternion.Euler(0, -30, 0),\r\n            scale: new Vector3(0.12, 0.15, 0.12)\r\n        }));\r\n        var pianoUI = new piano_ui_1.PianoUI(trace, gameCanvas);\r\n        pianoUI.setSoundHub(soundHub);\r\n        var play_piano = new play_it_1.PlayIt(trace, new Transform({\r\n            position: new Vector3(0.3, 8.0, -1.9),\r\n            rotation: Quaternion.Euler(0, -90, 19),\r\n            scale: new Vector3(0.3, 1.0, 4.5)\r\n        }), piano.getEntity(), pianoUI);\r\n        engine.addEntity(piano.getEntity());\r\n    }\r\n    if (features.bass) {\r\n        var bass = new bass_2.Bass(trace, soundHub, new Transform({\r\n            position: new Vector3(5.5, 1.5, 12.5),\r\n            rotation: Quaternion.Euler(20, 80, 70),\r\n            scale: new Vector3(0.1, 0.1, 0.1)\r\n        }));\r\n        var bassUI = new bass_ui_1.BassUI(trace, gameCanvas);\r\n        bassUI.setSoundHub(soundHub);\r\n        var play_bass = new play_it_1.PlayIt(trace, new Transform({\r\n            position: new Vector3(4.0, 0.0, 0.0),\r\n            rotation: Quaternion.Euler(0, 180, 90),\r\n            scale: new Vector3(1.0, 1.0, 5.0)\r\n        }), bass.getEntity(), bassUI);\r\n        engine.addEntity(bass.getEntity());\r\n    }\r\n    if (features.recorder) {\r\n        var tempo = new tempo_1.Tempo(trace, 100, 4, 4);\r\n        var recorder3d = new recorder3D_1.Recorder3D(trace, new Transform({\r\n            position: new Vector3(13.5, 1.0, 13.0),\r\n            rotation: Quaternion.Euler(0, 65, 0),\r\n            scale: new Vector3(0.2, 0.2, 0.2)\r\n        }));\r\n        var recorderUI = new recorder_ui_1.RecorderUI(trace, gameCanvas, soundHub, tempo);\r\n        var play_recorder = new play_it_1.PlayIt(trace, new Transform({\r\n            position: new Vector3(0.8, 1.2, 0.0),\r\n            rotation: Quaternion.Euler(0, 180, 0),\r\n            scale: new Vector3(0.4, 0.4, 2.0)\r\n        }), recorder3d.getEntity(), recorderUI);\r\n        engine.addEntity(recorder3d.getEntity());\r\n    }\r\n    if (features.drumset) {\r\n        var drumSet = new drumset_2.DrumSet(trace, soundHub, new Transform({\r\n            position: new Vector3(9.0, 0.3, 13.0),\r\n            rotation: Quaternion.Euler(0, 180, 0),\r\n            scale: new Vector3(0.2, 0.2, 0.2)\r\n        }));\r\n        var drumSetUI = new drumset_ui_1.DrumSetUI(trace, gameCanvas);\r\n        drumSetUI.setSoundHub(soundHub);\r\n        var play_drums = new play_it_1.PlayIt(trace, new Transform({\r\n            position: new Vector3(0.0, 9.0, -1.0),\r\n            rotation: Quaternion.Euler(0, 90, 0),\r\n            scale: new Vector3(1.0, 1.0, 5.0)\r\n        }), drumSet.getEntity(), drumSetUI);\r\n        engine.addEntity(drumSet.getEntity());\r\n    }\r\n    if (features.guitar_elec) {\r\n        var guitarElec = new guitar_elec_2.GuitarElec(trace, soundHub, new Transform({\r\n            position: new Vector3(11.5, 1.6, 12.0),\r\n            rotation: Quaternion.Euler(20, 60, 70),\r\n            scale: new Vector3(0.1, 0.1, 0.1)\r\n        }));\r\n        var guitarElecUI = new guitar_elec_ui_1.GuitarElecUI(trace, gameCanvas);\r\n        guitarElecUI.setSoundHub(soundHub);\r\n        var play_guitar_elec = new play_it_1.PlayIt(trace, new Transform({\r\n            position: new Vector3(4.0, 0.0, 2.0),\r\n            rotation: Quaternion.Euler(0, 190, 90),\r\n            scale: new Vector3(1.0, 1.0, 5.0)\r\n        }), guitarElec.getEntity(), guitarElecUI);\r\n        engine.addEntity(guitarElec.getEntity());\r\n    }\r\n    var testUIImput = /** @class */ (function (_super) {\r\n        __extends(testUIImput, _super);\r\n        function testUIImput(log, parent) {\r\n            var _this = _super.call(this, log, parent) || this;\r\n            var input = new UIInputText(_this.container);\r\n            _this.addCloseButton();\r\n            return _this;\r\n        }\r\n        return testUIImput;\r\n    }(ui_wrapper_3.UIWrapper));\r\n});\r\ndefine("src/modules/ui_instruments/tempoIndicatorUI", ["require", "exports"], function (require, exports) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var TempoIndicatorUI = /** @class */ (function () {\r\n        function TempoIndicatorUI(parent) {\r\n            var _this = this;\r\n            // super(parent);\r\n            this.container = new UIContainerRect(parent);\r\n            this.container.height = "50%";\r\n            this.container.width = "50%";\r\n            this.container.hAlign = \'center\';\r\n            this.container.vAlign = \'center\';\r\n            this.container.visible = false;\r\n            this.container.isPointerBlocker = false;\r\n            // let imageTexture = new Texture(\'images/image002.jpg\');\r\n            // const image = new UIImage(this.container, imageTexture);\r\n            // image.hAlign = \'center\'\r\n            // image.vAlign = \'center\'\r\n            // image.sourceLeft = 0\r\n            // image.sourceTop = 0\r\n            // image.sourceWidth = 1000\r\n            // image.sourceHeight = 1000\r\n            // image.width = `200px`\r\n            // image.height = `200px`\r\n            // image.positionX = 20\r\n            // image.positionY = -30\r\n            var closeIcon = new UIImage(this.container, new Texture(\'images/close-icon3.png\'));\r\n            closeIcon.name = \'clickable-image\';\r\n            closeIcon.width = \'50px\';\r\n            closeIcon.height = \'50px\';\r\n            closeIcon.hAlign = \'right\';\r\n            closeIcon.vAlign = \'top\';\r\n            closeIcon.sourceWidth = 128;\r\n            closeIcon.sourceHeight = 128;\r\n            closeIcon.isPointerBlocker = true;\r\n            closeIcon.onClick = new OnClick(function () {\r\n                _this.container.visible = false;\r\n                _this.container.isPointerBlocker = false;\r\n            });\r\n        }\r\n        TempoIndicatorUI.prototype.display = function () {\r\n            this.container.visible = true;\r\n            this.container.isPointerBlocker = true;\r\n        };\r\n        TempoIndicatorUI.prototype.mask = function () {\r\n            this.container.visible = false;\r\n            this.container.isPointerBlocker = false;\r\n        };\r\n        return TempoIndicatorUI;\r\n    }());\r\n    exports.TempoIndicatorUI = TempoIndicatorUI;\r\n});\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2FtZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9tb2R1bGVzL2VudGl0eV93cmFwcGVyLnRzIiwiLi4vc3JjL21vZHVsZXMvbGFuZC50cyIsIi4uL3NyYy9tb2R1bGVzL3NvdW5kaHViL3NvdW5kaHViLnRzIiwiLi4vc3JjL21vZHVsZXMvaW5zdHJ1bWVudHMvSW5zdHJ1bWVudC50cyIsIi4uL3NyYy9tb2R1bGVzL2luc3RydW1lbnRzL25vdGUudHMiLCIuLi9zcmMvbW9kdWxlcy9pbnN0cnVtZW50cy90ZXN0SW5zdHJ1bWVudC50cyIsIi4uL3NyYy9tb2R1bGVzL2luc3RydW1lbnRzL3BpYW5vLnRzIiwiLi4vc3JjL21vZHVsZXMvcHVzaGJ1dHRvbi50cyIsIi4uL3NyYy9tb2R1bGVzL3VpX3dyYXBwZXIudHMiLCIuLi9zcmMvbW9kdWxlcy9wbGF5X2l0LnRzIiwiLi4vc3JjL21vZHVsZXMvdWlfaW5zdHJ1bWVudHMvVUlJbnN0cnVtZW50LnRzIiwiLi4vc3JjL21vZHVsZXMvaW5zdHJ1bWVudHMvYmFzcy50cyIsIi4uL3NyYy9tb2R1bGVzL3VpX2luc3RydW1lbnRzL2Jhc3NfdWkudHMiLCIuLi9zcmMvbW9kdWxlcy9pbWFnZV9jb250YWluZXIudHMiLCIuLi9zcmMvbW9kdWxlcy91aV9pbnN0cnVtZW50cy9waWFub191aS50cyIsIi4uL3NyYy9tb2R1bGVzL3VpX2luc3RydW1lbnRzL3RlbXBvVUkudHMiLCIuLi9ub2RlX21vZHVsZXMvZGVjZW50cmFsYW5kLWVjcy11dGlscy90aW1lci9jb21wb25lbnQvaXRpbWVyY29tcG9uZW50LnRzIiwiLi4vbm9kZV9tb2R1bGVzL2RlY2VudHJhbGFuZC1lY3MtdXRpbHMvdGltZXIvY29tcG9uZW50L2RlbGF5LnRzIiwiLi4vbm9kZV9tb2R1bGVzL2RlY2VudHJhbGFuZC1lY3MtdXRpbHMvdGltZXIvY29tcG9uZW50L2V4cGlyZS50cyIsIi4uL25vZGVfbW9kdWxlcy9kZWNlbnRyYWxhbmQtZWNzLXV0aWxzL3RpbWVyL3N5c3RlbS90aW1lclN5c3RlbS50cyIsIi4uL25vZGVfbW9kdWxlcy9kZWNlbnRyYWxhbmQtZWNzLXV0aWxzL3RpbWVyL2NvbXBvbmVudC9pbnRlcnZhbC50cyIsIi4uL3NyYy9tb2R1bGVzL3JlY29yZGVyL3RlbXBvLnRzIiwiLi4vc3JjL21vZHVsZXMvcmVjb3JkZXIvdHJhY2tSZWNvcmRlci50cyIsIi4uL3NyYy9tb2R1bGVzL3VpX2luc3RydW1lbnRzL3RyYWNrVUkudHMiLCIuLi9zcmMvbW9kdWxlcy91aV9pbnN0cnVtZW50cy9yZWNvcmRlcl91aS50cyIsIi4uL3NyYy9tb2R1bGVzL3JlY29yZGVyL3JlY29yZGVyM0QudHMiLCIuLi9zcmMvbW9kdWxlcy9pbnN0cnVtZW50cy9kcnVtc2V0LnRzIiwiLi4vc3JjL21vZHVsZXMvdWlfaW5zdHJ1bWVudHMvZHJ1bXNldF91aS50cyIsIi4uL3NyYy9tb2R1bGVzL2luc3RydW1lbnRzL2d1aXRhcl9lbGVjLnRzIiwiLi4vc3JjL21vZHVsZXMvdWlfaW5zdHJ1bWVudHMvZ3VpdGFyX2VsZWNfdWkudHMiLCIuLi9zcmMvZ2FtZS50cyIsIi4uL3NyYy9tb2R1bGVzL3VpX2luc3RydW1lbnRzL3RlbXBvSW5kaWNhdG9yVUkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBQUE7UUFHSSx1QkFBYSxHQUFxQixFQUFFLFNBQW9CLEVBQUUsTUFBZTtZQUNyRSxJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUNmLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxNQUFNLEVBQUUsQ0FBQztZQUMzQixJQUFJLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUNwQyxJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDNUIsSUFBSSxLQUFLO2dCQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLEtB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UyxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7WUFDMUIsU0FBUyxDQUFDLE1BQU0sR0FBRyxPQUFPLENBQUM7WUFDM0IsU0FBUyxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7WUFDekIsU0FBUyxDQUFDLFdBQVcsR0FBRyxHQUFHLENBQUM7WUFDNUIsU0FBUyxDQUFDLFlBQVksR0FBRyxHQUFHLENBQUM7WUFDN0IsU0FBUyxDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQztZQUNsQyxTQUFTLENBQUMsT0FBTyxHQUFHLElBQUksT0FBTyxDQUFDO2dCQUM1QixLQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7Z0JBQy9CLEtBQUksQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLEdBQUcsS0FBSyxDQUFDO1lBQzVDLENBQUMsQ0FBQyxDQUFDO1FBQ1AsQ0FBQztRQUVNLGtDQUFPLEdBQWQ7WUFDSSxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7WUFDOUIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUM7UUFDM0MsQ0FBQztRQUNNLCtCQUFJLEdBQVg7WUFDSSxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7WUFDL0IsSUFBSSxDQUFDLFNBQVMsQ0FBQyxnQkFBZ0IsR0FBRyxLQUFLLENBQUM7UUFDNUMsQ0FBQztRQUNMLHVCQUFDO0lBQUQsQ0FBQyxBQWpERCxJQWlEQztJQWpEWSw0Q0FBZ0IiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgYWJzdHJhY3QgY2xhc3MgRW50aXR5V3JhcHBlciB7XHJcbiAgICBwcm90ZWN0ZWQgbG9nOiAoc3RyaW5nICk9PiB2b2lkO1xyXG4gICAgcHJvdGVjdGVkIGVudGl0eTogRW50aXR5O1xyXG4gICAgY29uc3RydWN0b3IgKGxvZzogKHN0cmluZyApPT4gdm9pZCwgdHJhbnNmb3JtOiBUcmFuc2Zvcm0sIHBhcmVudD86IEVudGl0eSkge1xyXG4gICAgICAgIHRoaXMubG9nID0gbG9nO1xyXG4gICAgICAgIHRoaXMuZW50aXR5ID0gbmV3IEVudGl0eSgpO1xyXG4gICAgICAgIHRoaXMuZW50aXR5LmFkZENvbXBvbmVudCh0cmFuc2Zvcm0pO1xyXG4gICAgICAgIGxldCBzaGFwZSA9IHRoaXMuZ2V0U2hhcGUoKTtcclxuICAgICAgICBpZiAoc2hhcGUpIHRoaXMuZW50aXR5LmFkZENvbXBvbmVudChzaGFwZSk7XHJcbiAgICAgICAgbGV0IG1hdGVyaWFsID0gdGhpcy5nZXRNYXRlcmlhbCgpO1xyXG4gICAgICAgIGlmIChtYXRlcmlhbCkgdGhpcy5lbnRpdHkuYWRkQ29tcG9uZW50KG1hdGVyaWFsKTtcclxuICAgICAgICBpZiAocGFyZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW50aXR5LnNldFBhcmVudChwYXJlbnQpO1xyXG4gICAgICAgIC8vIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gICAgIGVuZ2luZS5hZGRFbnRpdHkodGhpcy5lbnRpdHkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBnZXRTaGFwZSgpOiBTaGFwZTtcclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBnZXRNYXRlcmlhbCgpOiBNYXRlcmlhbDtcclxuICAgIHB1YmxpYyBnZXRFbnRpdHkoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW50aXR5O1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgRW50aXR5V3JhcHBlciB9IGZyb20gXCIuL2VudGl0eV93cmFwcGVyXCI7XHJcblxyXG5jb25zdCBtb2RlbEZpbGUgPSAnbW9kZWxzL2xhbmQxLmdsdGYnO1xyXG5cclxuZXhwb3J0IGNsYXNzIExhbmQgZXh0ZW5kcyBFbnRpdHlXcmFwcGVyIHtcclxuICAgIGVudGl0eTogRW50aXR5O1xyXG4gICAgY29uc3RydWN0b3IobG9nOiAoc3RyaW5nICk9PiB2b2lkLCB0cmFuc2Zvcm06IFRyYW5zZm9ybSkge1xyXG4gICAgICAgIHN1cGVyKGxvZywgdHJhbnNmb3JtKTtcclxuICAgIH1cclxuICAgIGdldE1hdGVyaWFsKCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgZ2V0U2hhcGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBHTFRGU2hhcGUobW9kZWxGaWxlKTtcclxuICAgIH1cclxufSIsImV4cG9ydCBpbnRlcmZhY2UgSVNvdW5kSHViIHtcclxuICAgIC8vIG9ubHkgb25lIHBsYXllciBwZXIgbm90ZSBwZXIgaW5zdHJ1bWVudFxyXG4gICAgcmVnaXN0ZXJOb3RlUGxheWVyKG5vdGU6IElOb3RlUGxheWVyKTtcclxuICAgIC8vIG1heSBoYXZlIHNldmVyYWwgY29udHJvbGxlcnMgZm9yIHRoZSBzYW1lIG5vdGUgb2YgdGhlIHNhbWUgaW5zdHJ1bWVudFxyXG4gICAgcmVnaXN0ZXJOb3RlQ29udHJvbGxlcihub3RlOiBJTm90ZUNvbnRyb2xsZXIpO1xyXG4gICAgLy8vIE1ldGhvZCBjYWxsZWQgYnkgYSBjbGllbnQgdG8gYmUgbm90aWZpZWQgd2hlbiBhIG5vdGUgaXMgcGxheWVkXHJcbiAgICByZWdpc3RlclJlY29yZGVyKHJlY29yZGVyOiBJSW5zdHJ1bWVudFJlY29yZGVyKTtcclxuICAgIC8vLyBNZXRob2QgY2FsbGVkIGJ5IHRoZSBub3RlIHdoaWxlIHBsYXlpbmdcclxuICAgIG9uUGxheU5vdGUoaW5zdHJ1bWVudDogc3RyaW5nLCBub3RlOiBzdHJpbmcpO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElJbnN0cnVtZW50UmVjb3JkZXIge1xyXG4gICAgc2V0U291bmRIdWIoc291bmRIdWI6IElTb3VuZEh1Yik7XHJcbiAgICBvblBsYXllZE5vdGUobm90ZTogc3RyaW5nKTtcclxuICAgIGdldEluc3RydW1lbnQoKTogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElOb3RlQ29udHJvbGxlciB7XHJcbiAgICBzZXRTb3VuZEh1Yihzb3VuZEh1YjogSVNvdW5kSHViKTtcclxuICAgIHJlZ2lzdGVyT25QbGF5ZWROb3RlKG9uUGxheU5vdGU6IChpbnN0cnVtZW50OiBzdHJpbmcsIG5vdGU6IHN0cmluZyk9PiB2b2lkKTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJTm90ZVBsYXllciB7XHJcbiAgICBzZXRTb3VuZEh1Yihzb3VuZEh1YjogSVNvdW5kSHViKTtcclxuICAgIHBsYXkoKTtcclxuICAgIGdldEluc3RydW1lbnQoKTogc3RyaW5nO1xyXG4gICAgZ2V0Tm90ZSgpOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTb3VuZEh1YiBpbXBsZW1lbnRzIElTb3VuZEh1YiB7XHJcbiAgICBsb2c6IChzdHJpbmcgKT0+IHZvaWQ7XHJcbiAgICBjb25zdHJ1Y3Rvcihsb2c6IChzdHJpbmcgKT0+IHZvaWQpIHtcclxuICAgICAgICB0aGlzLmxvZyA9IGxvZztcclxuICAgIH1cclxuXHJcbiAgICAvLyBlbWl0IHRoZSBldmVudCB3aGVuIGEgbm90ZSBpcyBwbGF5ZWQgKGtleSBwcmVzc2VkLCBldGMuLilcclxuICAgIC8vIG1heSBoYXZlIHNldmVyYWwgY29udHJvbGxlcnMgZm9yIHRoZSBzYW1lIG5vdGUvaW5zdHJ1bWVudFxyXG4gICAgcHJpdmF0ZSBfbm90ZXM6IFJlY29yZCA8c3RyaW5nLCBSZWNvcmQgPHN0cmluZywgKCkgPT4gdm9pZCA+ID4gPSB7fTtcclxuICAgIC8vIHN0b3JlIGFuIGFycmF5IG9mICdvblBsYXllZE5vdGUoKScgY2FsbGJhY2tzLCBwZXIgaW5zdHJ1bWVudFxyXG4gICAgcHJpdmF0ZSBfcmVjb3JkZXJzOiBSZWNvcmQgPHN0cmluZywgKChub3RlOiBzdHJpbmcpID0+IHZvaWQpW10gPiA9IHt9O1xyXG5cclxuICAgIC8vLyBNZXRob2QgY2FsbGVkIGJ5IGFuIGluc3RydW1lbnQgdG8gcmVnaXN0ZXIgaXRzIG5vdGVzLCBhbGxvd2luZyB0aGUgaHViIHRvIGJlIHdhcm5lZCB3aGVuIHRoZSBub3RlIGlzIHBsYXllZCAoZm9yIHJlY29yZGluZylcclxuICAgIC8vLyBhbmQgbWFrZSB0aGVtIHBsYXlpbmcgKGZvciByZXBsYXlpbmcpXHJcbiAgICBwdWJsaWMgcmVnaXN0ZXJOb3RlQ29udHJvbGxlcihub3RlQ29udHJvbGxlcjogSU5vdGVDb250cm9sbGVyKSB7XHJcbiAgICAgICAgLy8gcmVnaXN0ZXIgdG8gdGhlIG9uUGxheWVkTm90ZSBldmVudCBvZiB0aGUgbm90ZVxyXG4gICAgICAgIG5vdGVDb250cm9sbGVyLnJlZ2lzdGVyT25QbGF5ZWROb3RlKChpbnN0cnVtZW50OnN0cmluZywgbm90ZTpzdHJpbmcpID0+IHt0aGlzLm9uUGxheWVkTm90ZShpbnN0cnVtZW50LCBub3RlKX0pXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlZ2lzdGVyTm90ZVBsYXllcihub3RlUGxheWVyOiBJTm90ZVBsYXllcikge1xyXG4gICAgICAgIGxldCBub3RlID0gbm90ZVBsYXllci5nZXROb3RlKCk7XHJcbiAgICAgICAgbGV0IGluc3RydW1lbnQgPSBub3RlUGxheWVyLmdldEluc3RydW1lbnQoKTtcclxuICAgICAgICB0aGlzLmxvZyhgU291bmRIdWI6IHJlZ2lzdGVyaW5nIG5vdGUgcGxheWVyIGZvciAke25vdGV9IGZvciBpbnN0cnVtZW50ICR7aW5zdHJ1bWVudH1gKTtcclxuICAgICAgICAvLyBzdG9yZSB0aGUgY2FsbGJhY2sgdG8gdGhlIHBsYXkoKSBtZXRob2Qgb2YgdGhlIG5vdGVcclxuICAgICAgICBpZiAoIXRoaXMuX25vdGVzW2luc3RydW1lbnRdKSB0aGlzLl9ub3Rlc1tpbnN0cnVtZW50XSA9IHt9O1xyXG4gICAgICAgIHRoaXMuX25vdGVzW2luc3RydW1lbnRdW25vdGVdID0gKCgpID0+IHtub3RlUGxheWVyLnBsYXkoKX0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vLyBNZXRob2QgY2FsbGVkIGJ5IGEgY2xpZW50IHRvIGJlIG5vdGlmaWVkIHdoZW4gYSBub3RlIGlzIHBsYXllZFxyXG4gICAgcHVibGljIHJlZ2lzdGVyUmVjb3JkZXIocmVjb3JkZXI6IElJbnN0cnVtZW50UmVjb3JkZXIpIHtcclxuICAgICAgICBsZXQgaW5zdHJ1bWVudCA9IHJlY29yZGVyLmdldEluc3RydW1lbnQoKTtcclxuICAgICAgICB0aGlzLmxvZyhgU291bmRIdWI6IHJlZ2lzdGVyaW5nIHJlY29yZGVyIGZvciBpbnN0cnVtZW50ICR7aW5zdHJ1bWVudH1gKTtcclxuICAgICAgICBpZiAoIXRoaXMuX3JlY29yZGVyc1tpbnN0cnVtZW50XSkgdGhpcy5fcmVjb3JkZXJzW2luc3RydW1lbnRdID0gW107XHJcbiAgICAgICAgdGhpcy5fcmVjb3JkZXJzW2luc3RydW1lbnRdLnB1c2goKChub3RlKSA9PiB7cmVjb3JkZXIub25QbGF5ZWROb3RlKG5vdGUpfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vLyBNZXRob2QgY2FsbGVkIHRvIGFzayB0aGUgaW5zdHJ1bWVudCB0byBwbGF5IGEgbm90ZVxyXG4gICAgcHVibGljIG9uUGxheU5vdGUoaW5zdHJ1bWVudDogc3RyaW5nLCBub3RlOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLmxvZyhgU291bmRIdWI6IG5vdGUgJHtub3RlfSBoYXMgdG8gYmUgcGxheWVkIG9uIGluc3RydW1lbnQgJHtpbnN0cnVtZW50fWApO1xyXG4gICAgICAgIGxldCBwbGF5ID0gdGhpcy5fbm90ZXNbaW5zdHJ1bWVudF1bbm90ZV07XHJcbiAgICAgICAgaWYgKHBsYXkpIHBsYXkoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBjYWxsZWQgYmFjayB3aGVuIGEgbm90ZSBpcyBwbGF5ZWQgb24gdGhlIGluc3RydW1lbnRcclxuICAgIG9uUGxheWVkTm90ZShpbnN0cnVtZW50OiBzdHJpbmcsIG5vdGU6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMubG9nKGBTb3VuZEh1Yjogb25QbGF5ZWROb3RlKCkgOiAke25vdGV9IGlzIHBsYXlpbmcgb24gaW5zdHJ1bWVudCAke2luc3RydW1lbnR9YCk7XHJcbiAgICAgICAgLy8gd2FybiBhbGwgcmVjb3JkZXJzIGZvciB0aGlzIGluc3RydW1lbnRcclxuICAgICAgICBsZXQgaW5zdHJ1bWVudFJlY29yZGVycyA9IHRoaXMuX3JlY29yZGVyc1tpbnN0cnVtZW50XTtcclxuICAgICAgICBpZiAoaW5zdHJ1bWVudFJlY29yZGVycykge1xyXG4gICAgICAgICAgICBpbnN0cnVtZW50UmVjb3JkZXJzLmZvckVhY2goY2FsbGJhY2sgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sobm90ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgUmVjb3JkZXJGb3JUZXN0IGltcGxlbWVudHMgSUluc3RydW1lbnRSZWNvcmRlciB7XHJcbiAgICBsb2c7XHJcbiAgICBpbnN0cnVtZW50O1xyXG4gICAgY29uc3RydWN0b3IobG9nOiAoc3RyaW5nICk9PiB2b2lkLCBpbnN0cnVtZW50LCBzb3VuZEh1Yikge1xyXG4gICAgICAgIHRoaXMubG9nID0gbG9nO1xyXG4gICAgICAgIHRoaXMuaW5zdHJ1bWVudCA9IGluc3RydW1lbnQ7XHJcbiAgICAgICAgdGhpcy5zZXRTb3VuZEh1Yihzb3VuZEh1Yik7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0U291bmRIdWIoc291bmRIdWI6IElTb3VuZEh1Yikge1xyXG4gICAgICAgIHNvdW5kSHViLnJlZ2lzdGVyUmVjb3JkZXIodGhpcyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb25QbGF5ZWROb3RlID0gKG5vdGU6IHN0cmluZykgPT4ge1xyXG4gICAgICAgIHRoaXMubG9nKGByZWNvcmRlciBmb3IgaW5zdHJ1bWVudCAke3RoaXMuaW5zdHJ1bWVudH0gaXMgcmVjb3JkaW5nIG5vdGUgJHtub3RlfWApO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGdldEluc3RydW1lbnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdHJ1bWVudDtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgTm90ZUNvbnRyb2xsZXJGb3JUZXN0IGltcGxlbWVudHMgSU5vdGVDb250cm9sbGVyIHtcclxuICAgIGxvZztcclxuICAgIGluc3RydW1lbnQ7XHJcbiAgICBub3RlO1xyXG4gICAgX29uUGxheWVkTm90ZUNhbGxiYWNrczogKChpbnN0cnVtZW50OiBzdHJpbmcsIG5vdGU6IHN0cmluZyk9PnZvaWQpW10gPSBbXTtcclxuICAgIGNvbnN0cnVjdG9yKGxvZzogKHN0cmluZyApPT4gdm9pZCwgaW5zdHJ1bWVudCwgbm90ZSwgc291bmRIdWIpIHtcclxuICAgICAgICB0aGlzLmxvZyA9IGxvZztcclxuICAgICAgICB0aGlzLmluc3RydW1lbnQgPSBpbnN0cnVtZW50O1xyXG4gICAgICAgIHRoaXMubm90ZSA9IG5vdGU7XHJcbiAgICAgICAgdGhpcy5zZXRTb3VuZEh1Yihzb3VuZEh1Yik7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0U291bmRIdWIoc291bmRIdWI6IElTb3VuZEh1Yikge1xyXG4gICAgICAgIHNvdW5kSHViLnJlZ2lzdGVyTm90ZUNvbnRyb2xsZXIodGhpcyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgcmVnaXN0ZXJPblBsYXllZE5vdGUob25QbGF5Tm90ZTogKGluc3RydW1lbnQ6IHN0cmluZywgbm90ZTogc3RyaW5nKT0+IHZvaWQpIHtcclxuICAgICAgICB0aGlzLl9vblBsYXllZE5vdGVDYWxsYmFja3MucHVzaChvblBsYXlOb3RlKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBnZXRJbnN0cnVtZW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RydW1lbnQ7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0Tm90ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ub3RlO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHBsYXlBbmROb3RpZnkoKSB7XHJcbiAgICAgICAgdGhpcy5sb2cgKGBOb3RlICR7dGhpcy5ub3RlfSBpcyBwbGF5aW5nIG9uIGluc3RydW1lbnQgJHt0aGlzLmluc3RydW1lbnR9YCk7XHJcbiAgICAgICAgLy8gV2FybiBsaXN0ZW5lcnNcclxuICAgICAgICB0aGlzLl9vblBsYXllZE5vdGVDYWxsYmFja3MuZm9yRWFjaChvblBsYXlOb3RlID0+IHtcclxuICAgICAgICAgICAgb25QbGF5Tm90ZS5jYWxsKHRoaXMsIHRoaXMuaW5zdHJ1bWVudCwgdGhpcy5ub3RlKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBOb3RlUGxheWVyRm9yVGVzdCBpbXBsZW1lbnRzIElOb3RlUGxheWVyIHtcclxuICAgIGxvZztcclxuICAgIGluc3RydW1lbnQ7XHJcbiAgICBub3RlO1xyXG4gICAgX29uUGxheWVkTm90ZUNhbGxiYWNrczogKChpbnN0cnVtZW50OiBzdHJpbmcsIG5vdGU6IHN0cmluZyk9PnZvaWQpW10gPSBbXTtcclxuICAgIGNvbnN0cnVjdG9yKGxvZzogKHN0cmluZyApPT4gdm9pZCwgaW5zdHJ1bWVudCwgbm90ZSwgc291bmRIdWIpIHtcclxuICAgICAgICB0aGlzLmxvZyA9IGxvZztcclxuICAgICAgICB0aGlzLmluc3RydW1lbnQgPSBpbnN0cnVtZW50O1xyXG4gICAgICAgIHRoaXMubm90ZSA9IG5vdGU7XHJcbiAgICAgICAgdGhpcy5zZXRTb3VuZEh1Yihzb3VuZEh1Yik7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0U291bmRIdWIoc291bmRIdWI6IElTb3VuZEh1Yikge1xyXG4gICAgICAgIHNvdW5kSHViLnJlZ2lzdGVyTm90ZVBsYXllcih0aGlzKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBwbGF5KCkge1xyXG4gICAgICAgIHRoaXMubG9nIChgTm90ZSAke3RoaXMubm90ZX0gaXMgdG8gYmUgcGxheWVkIG9uIGluc3RydW1lbnQgJHt0aGlzLmluc3RydW1lbnR9YCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0SW5zdHJ1bWVudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0cnVtZW50O1xyXG4gICAgfVxyXG4gICAgcHVibGljIGdldE5vdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubm90ZTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgU291bmRIdWJUZXN0IHtcclxuICAgIHNvdW5kSHViOiBTb3VuZEh1YjtcclxuICAgIGxvZzogKHN0cmluZykgPT4gdm9pZDtcclxuICAgIHN0ZXBzID0gW3RoaXMuc3RlcDEsIHRoaXMuc3RlcDIsIHRoaXMuc3RlcDMsIHRoaXMuc3RlcDRdO1xyXG5cclxuICAgIHJlY29yZGVyOiBSZWNvcmRlckZvclRlc3Q7XHJcbiAgICBub3RlQ29udHJvbGxlclBpYW5vRTI6IE5vdGVDb250cm9sbGVyRm9yVGVzdDtcclxuICAgIG5vdGVDb250cm9sbGVyUGlhbm9FMzogTm90ZUNvbnRyb2xsZXJGb3JUZXN0O1xyXG4gICAgbm90ZUNvbnRyb2xsZXJQaWFub0U0OiBOb3RlQ29udHJvbGxlckZvclRlc3Q7XHJcbiAgICBub3RlQ29udHJvbGxlckZsdXRlRzU6IE5vdGVDb250cm9sbGVyRm9yVGVzdDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihsb2c6IChzdHJpbmcgKT0+IHZvaWQpIHtcclxuICAgICAgICB0aGlzLmxvZyA9IGxvZztcclxuICAgICAgICB0aGlzLnNvdW5kSHViID0gbmV3IFNvdW5kSHViKGxvZyk7XHJcbiAgICAgICAgbGV0IHJlY29yZGVyUGlhbm8gPSBuZXcgUmVjb3JkZXJGb3JUZXN0KHRoaXMubG9nLCAncGlhbm8nLCB0aGlzLnNvdW5kSHViKTtcclxuICAgICAgICBsZXQgcmVjb3JkZXJGbHV0ZSA9IG5ldyBSZWNvcmRlckZvclRlc3QodGhpcy5sb2csICdmbHV0ZScsIHRoaXMuc291bmRIdWIpO1xyXG4gICAgICAgIHRoaXMubm90ZUNvbnRyb2xsZXJQaWFub0UyID0gbmV3IE5vdGVDb250cm9sbGVyRm9yVGVzdCh0aGlzLmxvZywgJ3BpYW5vJywgJ0UyJywgdGhpcy5zb3VuZEh1Yik7XHJcbiAgICAgICAgdGhpcy5ub3RlQ29udHJvbGxlclBpYW5vRTMgPSBuZXcgTm90ZUNvbnRyb2xsZXJGb3JUZXN0KHRoaXMubG9nLCAncGlhbm8nLCAnRTMnLCB0aGlzLnNvdW5kSHViKTtcclxuICAgICAgICB0aGlzLm5vdGVDb250cm9sbGVyUGlhbm9FNCA9IG5ldyBOb3RlQ29udHJvbGxlckZvclRlc3QodGhpcy5sb2csICdwaWFubycsICdFNCcsIHRoaXMuc291bmRIdWIpO1xyXG4gICAgICAgIHRoaXMubm90ZUNvbnRyb2xsZXJGbHV0ZUc1ID0gbmV3IE5vdGVDb250cm9sbGVyRm9yVGVzdCh0aGlzLmxvZywgJ2ZsdXRlJywgJ0c1JywgdGhpcy5zb3VuZEh1Yik7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhcnQoKSB7XHJcbiAgICAgICAgdGhpcy5zdGVwcy5mb3JFYWNoKHN0ZXAgPT4ge3N0ZXAuY2FsbCh0aGlzKX0pO1xyXG4gICAgfVxyXG5cclxuICAgIHN0ZXAxKCkge1xyXG4gICAgICAgIHRoaXMubG9nKFwiU3RlcCAxXCIpO1xyXG4gICAgICAgIHRoaXMubm90ZUNvbnRyb2xsZXJQaWFub0UyLnBsYXlBbmROb3RpZnkoKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGVwMigpIHtcclxuICAgICAgICB0aGlzLmxvZyhcIlN0ZXAgMlwiKTtcclxuICAgICAgICB0aGlzLm5vdGVDb250cm9sbGVyUGlhbm9FMy5wbGF5QW5kTm90aWZ5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RlcDMoKSB7XHJcbiAgICAgICAgdGhpcy5sb2coXCJTdGVwIDNcIik7XHJcbiAgICAgICAgdGhpcy5ub3RlQ29udHJvbGxlclBpYW5vRTQucGxheUFuZE5vdGlmeSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0ZXA0KCkge1xyXG4gICAgICAgIHRoaXMubG9nKFwiU3RlcCA0XCIpO1xyXG4gICAgICAgIHRoaXMubm90ZUNvbnRyb2xsZXJGbHV0ZUc1LnBsYXlBbmROb3RpZnkoKTtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBJU291bmRIdWIgfSBmcm9tIFwiLi4vc291bmRodWIvc291bmRodWJcIjtcclxuaW1wb3J0IHsgRW50aXR5V3JhcHBlciB9IGZyb20gXCIuLi9lbnRpdHlfd3JhcHBlclwiO1xyXG5pbXBvcnQgeyBOb3RlIH0gZnJvbSBcIi4vbm90ZVwiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJTm90ZVByb3BzIHtcclxuICAgIG5vdGU6IHN0cmluZyxcclxuICAgIGluZGV4OiBudW1iZXIsXHJcbiAgICBzb25nOiBzdHJpbmcsXHJcbiAgICBleHRyYXM6IHtba2V5OiBzdHJpbmddOiBzdHJpbmcgfCBudW1iZXJ9XHJcbn1cclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBJbnN0cnVtZW50PFQgZXh0ZW5kcyBOb3RlPiBleHRlbmRzIEVudGl0eVdyYXBwZXJ7XHJcbiAgICBzb3VuZEh1YjogSVNvdW5kSHViO1xyXG4gICAgY29uc3RydWN0b3IgKGxvZzogKHN0cmluZyApPT4gdm9pZCwgc291bmRIdWI6IElTb3VuZEh1YiwgdHJhbnNmb3JtOiBUcmFuc2Zvcm0pIHtcclxuICAgICAgICBzdXBlciAobG9nLCB0cmFuc2Zvcm0pO1xyXG4gICAgICAgIHRoaXMuc291bmRIdWIgPSBzb3VuZEh1YjtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgZ2V0VHJhbnNmb3JtRm9yTm90ZShub3RlUHJvcDogSU5vdGVQcm9wcyk6IFRyYW5zZm9ybTtcclxuXHJcbiAgICBwcm90ZWN0ZWQgY3JlYXRlTm90ZXM8VCBleHRlbmRzIE5vdGU+KHNvdW5kSHViOiBJU291bmRIdWIsIG5vdGU6IG5ldyAobG9nOiAoc3RyaW5nKT0+IHZvaWQsIFRyYW5zZm9ybSwgRW50aXR5LCBJTm90ZVByb3BzKSA9PiBULCBub3RlUHJvcHM6IElOb3RlUHJvcHNbXSkge1xyXG4gICAgICAgIG5vdGVQcm9wcy5mb3JFYWNoKG5vdGVQcm9wID0+IHtcclxuICAgICAgICAgICAgdGhpcy5sb2coXCJjcmVhdGUgbm90ZSBcIiArIG5vdGVQcm9wLm5vdGUpO1xyXG4gICAgICAgICAgICBsZXQgdHJhbnNmb3JtID0gdGhpcy5nZXRUcmFuc2Zvcm1Gb3JOb3RlKG5vdGVQcm9wKTtcclxuICAgICAgICAgICAgbGV0IG4gPSBuZXcgbm90ZShsb2csIHRyYW5zZm9ybSwgdGhpcy5lbnRpdHksIG5vdGVQcm9wKTtcclxuICAgICAgICAgICAgbi5zZXRTb3VuZEh1Yih0aGlzLnNvdW5kSHViKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBmb3IgKGxldCBub3RlUHJvcCBvZiBub3RlUHJvcHMpIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5sb2coXCJjcmVhdGUgbm90ZSBcIiArIG5vdGVQcm9wLm5vdGUpO1xyXG4gICAgICAgIC8vICAgICBsZXQgdHJhbnNmb3JtID0gdGhpcy5nZXRUcmFuc2Zvcm1Gb3JOb3RlKG5vdGVQcm9wKTtcclxuICAgICAgICAvLyAgICAgbGV0IG4gPSBuZXcgbm90ZShsb2csIHRyYW5zZm9ybSwgdGhpcy5lbnRpdHksIG5vdGVQcm9wKTtcclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IHsgRW50aXR5V3JhcHBlciB9IGZyb20gXCIuLi9lbnRpdHlfd3JhcHBlclwiO1xyXG5pbXBvcnQgeyBJTm90ZVByb3BzIH0gZnJvbSBcIi4vSW5zdHJ1bWVudFwiO1xyXG5pbXBvcnQgeyBJTm90ZUNvbnRyb2xsZXIsIElOb3RlUGxheWVyLCBJU291bmRIdWIgfSBmcm9tIFwiLi4vc291bmRodWIvc291bmRodWJcIjtcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBOb3RlIGV4dGVuZHMgRW50aXR5V3JhcHBlciBpbXBsZW1lbnRzIElOb3RlQ29udHJvbGxlciwgSU5vdGVQbGF5ZXIge1xyXG4gICAgcHJvdGVjdGVkIG5vdGU7XHJcbiAgICBzb3VuZEh1YjogSVNvdW5kSHViO1xyXG4gICAgLy8gKioqKiBJTm90ZUNvbnRyb2xsZXIgaW1wbGVtZW50YXRpb24gKioqKlxyXG4gICAgX29uUGxheWVkTm90ZUNhbGxiYWNrczogKChpbnN0cnVtZW50OiBzdHJpbmcsIG5vdGU6IHN0cmluZyk9PnZvaWQpW10gPSBbXTtcclxuICAgIHB1YmxpYyBzZXRTb3VuZEh1Yihzb3VuZEh1YjogSVNvdW5kSHViKSB7XHJcbiAgICAgICAgdGhpcy5zb3VuZEh1YiA9IHNvdW5kSHViO1xyXG4gICAgICAgIHNvdW5kSHViLnJlZ2lzdGVyTm90ZVBsYXllcih0aGlzKTtcclxuICAgICAgICBzb3VuZEh1Yi5yZWdpc3Rlck5vdGVDb250cm9sbGVyKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHJlZ2lzdGVyT25QbGF5ZWROb3RlKG9uUGxheU5vdGU6IChpbnN0cnVtZW50OiBzdHJpbmcsIG5vdGU6IHN0cmluZyk9PiB2b2lkKSB7XHJcbiAgICAgICAgLy8gYWxsb3cgcmVnaXN0ZXJpbmcgdG8gYWxsb3cgcmVjb3JkaW5nIGZyb20gVUlcclxuICAgICAgICB0aGlzLl9vblBsYXllZE5vdGVDYWxsYmFja3MucHVzaChvblBsYXlOb3RlKTtcclxuICAgIH1cclxuICAgIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgIC8vICoqKiogSU5vdGVQbGF5ZXIgaW1wbGVtZW50YXRpb24gKioqKlxyXG4gICAgcHVibGljIGFic3RyYWN0IGdldEluc3RydW1lbnQoKTogc3RyaW5nO1xyXG4gICAgcHVibGljIGdldE5vdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubm90ZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBwbGF5KCkge1xyXG4gICAgICAgIHRoaXMubG9nKFwiUGxheSBub3RlIFwiICsgdGhpcy5ub3RlICsgXCIgb2YgaW5zdHJ1bWVudCBcIiArIHRoaXMuZ2V0SW5zdHJ1bWVudCgpKTtcclxuICAgICAgICB0aGlzLmVudGl0eS5nZXRDb21wb25lbnQoQXVkaW9Tb3VyY2UpLnBsYXlPbmNlKCk7XHJcbiAgICB9XHJcbiAgICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICBub3RpZnlQbGF5aW5nKCkge1xyXG4gICAgICAgIC8vIE5vdGlmeSBsaXN0ZW5lcnNcclxuICAgICAgICB0aGlzLl9vblBsYXllZE5vdGVDYWxsYmFja3MuZm9yRWFjaChvblBsYXlOb3RlID0+IHtcclxuICAgICAgICAgICAgb25QbGF5Tm90ZS5jYWxsKHRoaXMsIHRoaXMuZ2V0SW5zdHJ1bWVudCgpLCB0aGlzLm5vdGUpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBjb25zdHJ1Y3RvciAobG9nOiAoc3RyaW5nICk9PiB2b2lkLCB0cmFuc2Zvcm06IFRyYW5zZm9ybSwgcGFyZW50OiBFbnRpdHksIG5vdGVQcm9wOiBJTm90ZVByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIobG9nLCB0cmFuc2Zvcm0sIHBhcmVudCk7XHJcbiAgICAgICAgdGhpcy5ub3RlID0gbm90ZVByb3Aubm90ZTtcclxuICAgICAgICBsZXQgbm90ZVNoYXBlID0gdGhpcy5nZXROb3RlU2hhcGUobm90ZVByb3ApO1xyXG4gICAgICAgIGlmIChub3RlU2hhcGUpIHRoaXMuZW50aXR5LmFkZENvbXBvbmVudE9yUmVwbGFjZShub3RlU2hhcGUpO1xyXG4gICAgICAgIHRoaXMuZW50aXR5LmFkZENvbXBvbmVudCAobmV3IE9uQ2xpY2soZSA9PiB7dGhpcy5sb2coSlNPTi5zdHJpbmdpZnkoZSkpOyB0aGlzLm9uUHJlc3NlZCgpO30pKTtcclxuICAgICAgICB0aGlzLnNldFNvdW5kKG5ldyBBdWRpb0NsaXAobm90ZVByb3Auc29uZykpO1xyXG4gICAgfVxyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGdldE5vdGVTaGFwZShub3RlUHJvcDogSU5vdGVQcm9wcyk7XHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgYW5pbWF0ZSgpXHJcbiAgICBwdWJsaWMgc2V0U291bmQoc291bmQ6IEF1ZGlvQ2xpcCkge1xyXG4gICAgICAgIGxldCBhdWRpb1NvdXJjZSA9IG5ldyBBdWRpb1NvdXJjZShzb3VuZClcclxuICAgICAgICBhdWRpb1NvdXJjZS5wbGF5aW5nID0gZmFsc2VcclxuICAgICAgICB0aGlzLmVudGl0eS5hZGRDb21wb25lbnRPclJlcGxhY2UoYXVkaW9Tb3VyY2UpO1xyXG4gICAgfVxyXG4gICAgb25QcmVzc2VkKCkge1xyXG4gICAgICAgIHRoaXMubG9nKFwiYmVmb3JlIHBsYXlcIik7XHJcbiAgICAgICAgdGhpcy5wbGF5KCk7XHJcbiAgICAgICAgdGhpcy5sb2coXCJiZWZvcmUgbm90aWZ5UGxheWluZ1wiKTtcclxuICAgICAgICB0aGlzLm5vdGlmeVBsYXlpbmcoKTtcclxuICAgICAgICB0aGlzLmxvZyhcImJlZm9yZSBhbmltYXRlXCIpO1xyXG4gICAgICAgIHRoaXMuYW5pbWF0ZSgpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgTm90ZSB9IGZyb20gXCIuL25vdGVcIjtcclxuaW1wb3J0IHsgSW5zdHJ1bWVudCwgSU5vdGVQcm9wcyB9IGZyb20gXCIuL0luc3RydW1lbnRcIjtcclxuaW1wb3J0IHsgSVNvdW5kSHViIH0gZnJvbSBcIi4uL3NvdW5kaHViL3NvdW5kaHViXCI7XHJcblxyXG5jb25zdCBrZXlQcm9wczogSU5vdGVQcm9wc1tdID0gW1xyXG4gICAge25vdGU6IFwiQTFcIiwgaW5kZXg6IDAsIHNvbmcgOiAnc291bmRzL3BpYW5vL0M0Lm1wMycsIGV4dHJhczoge1widHlwZVwiOiBcIndoaXRlXCJ9fSxcclxuICAgIHtub3RlOiBcIkEyXCIsIGluZGV4OiAxLCBzb25nIDogJ3NvdW5kcy9waWFuby9DNC5tcDMnLCBleHRyYXM6IHtcInR5cGVcIjogXCJibGFja1wifX1cclxuXTtcclxuXHJcbmNvbnN0IGluc3RydW1lbnQgPSAndGVzdCc7XHJcblxyXG5leHBvcnQgY2xhc3MgVGVzdEtleSBleHRlbmRzIE5vdGUge1xyXG4gICAgY29uc3RydWN0b3IobG9nOiAoc3RyaW5nICk9PiB2b2lkLCB0cmFuc2Zvcm06IFRyYW5zZm9ybSwgcGFyZW50OiBFbnRpdHksIG5vdGVQcm9wOiBJTm90ZVByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIobG9nLCB0cmFuc2Zvcm0sIHBhcmVudCwgbm90ZVByb3ApO1xyXG4gICAgfVxyXG4gICAgZ2V0TWF0ZXJpYWwoKTogTWF0ZXJpYWwge1xyXG4gICAgICAgIGxldCBtYXQgPSBuZXcgTWF0ZXJpYWwoKTtcclxuICAgICAgICBtYXQuYWxiZWRvQ29sb3IgPSBDb2xvcjMuQmx1ZSgpO1xyXG4gICAgICAgIHJldHVybiBtYXQ7XHJcbiAgICB9XHJcbiAgICBnZXRTaGFwZSgpOiBTaGFwZSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBCb3hTaGFwZSgpO1xyXG4gICAgfVxyXG4gICAgZ2V0Tm90ZVNoYXBlKG5vdGVQcm9wOiBJTm90ZVByb3BzKTogU2hhcGUge1xyXG4gICAgICAgIGxldCBrZXlUeXBlID0gbm90ZVByb3AuZXh0cmFzW1widHlwZVwiXTtcclxuICAgICAgICB0aGlzLmxvZyhcIlRlc3RLZXk6OmdldE5vdGVTaGFwZSgpIDoga2V5VHlwZSBcIiArIGtleVR5cGUpO1xyXG4gICAgICAgIHJldHVybiBuZXcgQm94U2hhcGUoKTtcclxuICAgIH1cclxuICAgIGdldEluc3RydW1lbnQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gaW5zdHJ1bWVudDtcclxuICAgIH1cclxuICAgIGFuaW1hdGUoKSB7XHJcbiAgICAgICAgbmV3IFRlc3RLZXlBbmltYXRpb24odGhpcy5sb2csIHRoaXMuZW50aXR5KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRlc3RJbnN0cnVtZW50IGV4dGVuZHMgSW5zdHJ1bWVudDxUZXN0S2V5PiB7XHJcbiAgICBjb25zdHJ1Y3Rvcihsb2c6IChzdHJpbmcgKT0+IHZvaWQsIHNvdW5kSHViOiBJU291bmRIdWIsIHRyYW5zZm9ybTogVHJhbnNmb3JtKSB7XHJcbiAgICAgICAgc3VwZXIobG9nLCBzb3VuZEh1YiwgdHJhbnNmb3JtKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZU5vdGVzKG51bGwsIFRlc3RLZXksIGtleVByb3BzKTtcclxuICAgIH1cclxuICAgIGdldE1hdGVyaWFsKCkge1xyXG4gICAgICAgIGxldCBtYXQgPSBuZXcgTWF0ZXJpYWwoKTtcclxuICAgICAgICBtYXQuYWxiZWRvQ29sb3IgPSBDb2xvcjMuUmVkKCk7XHJcbiAgICAgICAgcmV0dXJuIG1hdDtcclxuICAgIH1cclxuICAgIGdldFNoYXBlKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgQm94U2hhcGUoKTtcclxuICAgIH1cclxuICAgIGdldFRyYW5zZm9ybUZvck5vdGUobm90ZVByb3A6IElOb3RlUHJvcHMpIHtcclxuICAgICAgICBsZXQgaW5kZXggPSBub3RlUHJvcC5pbmRleDtcclxuICAgICAgICByZXR1cm4gbmV3IFRyYW5zZm9ybSh7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgVmVjdG9yMygxK2luZGV4LCAwLjAsIDAuMClcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRlc3RLZXlBbmltYXRpb24gaW1wbGVtZW50cyBJU3lzdGVtIHtcclxuICBwcmVzc2VkOiBib29sZWFuID0gdHJ1ZVxyXG4gIGZyYWN0aW9uOiBudW1iZXIgPSAwXHJcbiAgZW50aXR5OiBFbnRpdHk7XHJcbiAgbG9nOiAoc3RyaW5nICk9PiB2b2lkO1xyXG4gIGNvbnN0cnVjdG9yKGxvZzogKHN0cmluZyApPT4gdm9pZCwgZW50aXR5OiBFbnRpdHkpIHtcclxuICAgIHRoaXMubG9nID0gbG9nO1xyXG4gICAgdGhpcy5lbnRpdHkgPSBlbnRpdHk7XHJcbiAgICBlbmdpbmUuYWRkU3lzdGVtKHRoaXMpO1xyXG4gICAgdGhpcy5sb2coXCJCdWlsZCBhIG5ldyBUZXN0S2V5QW5pbWF0aW9uXCIpO1xyXG4gIH07XHJcbiAgdXBkYXRlKCkge1xyXG4gICAgICB0aGlzLmxvZyhcIlRlc3RLZXlBbmltYXRpb246OnVwZGF0ZSgpXCIpO1xyXG4gICAgbGV0IHRyYW5zZm9ybSA9IHRoaXMuZW50aXR5LmdldENvbXBvbmVudChUcmFuc2Zvcm0pXHJcbiAgICBpZiAoKHRoaXMucHJlc3NlZCA9PSB0cnVlKSAmJiAodGhpcy5mcmFjdGlvbiA8IDEpKSB7XHJcbiAgICAgICAgdGhpcy5mcmFjdGlvbiArPSAxLzQ7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKCh0aGlzLnByZXNzZWQgPT0gZmFsc2UpICYmICh0aGlzLmZyYWN0aW9uID4gMCkpIHtcclxuICAgICAgICAgICAgdGhpcy5mcmFjdGlvbiAtPSAxLzI7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmZyYWN0aW9uID49IDEpIHtcclxuICAgICAgICB0aGlzLmZyYWN0aW9uID0gMTtcclxuICAgICAgICB0aGlzLmZpbmlzaCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmZyYWN0aW9uIDw9IDApIHtcclxuICAgICAgICB0aGlzLmZyYWN0aW9uID0gMDtcclxuICAgICAgfVxyXG4gICAgICB0cmFuc2Zvcm0ucm90YXRpb24gPSBRdWF0ZXJuaW9uLkV1bGVyKDQgKiB0aGlzLmZyYWN0aW9uLHRyYW5zZm9ybS5yb3RhdGlvbi55LHRyYW5zZm9ybS5yb3RhdGlvbi56KTtcclxuICB9XHJcbiAgcHVibGljIHN0YXJ0KCkge1xyXG4gICAgICB0aGlzLnByZXNzZWQgPSB0cnVlO1xyXG4gIH1cclxuICBwdWJsaWMgZmluaXNoKCkge1xyXG4gICAgICBlbmdpbmUucmVtb3ZlU3lzdGVtKHRoaXMpXHJcbiAgICAgIHRoaXMucHJlc3NlZCA9IGZhbHNlO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJTm90ZVByb3BzLCBJbnN0cnVtZW50IH0gZnJvbSBcIi4vSW5zdHJ1bWVudFwiO1xyXG5pbXBvcnQgeyBOb3RlIH0gZnJvbSBcIi4vbm90ZVwiO1xyXG5pbXBvcnQgeyBJU291bmRIdWIgfSBmcm9tIFwiLi4vc291bmRodWIvc291bmRodWJcIjtcclxuXHJcbmNvbnN0IHBpYW5vTW9kZWxGaWxlID0gXCJtb2RlbHMvcGlhbm8uZ2x0ZlwiO1xyXG5jb25zdCBzb3VuZEZpbGVFeHRlbnNpb24gPSBcIi5tcDNcIjtcclxuY29uc3Qga2V5c01vZGVsRmlsZSA9IHtcclxuICAgIFwiV0hJVEVcIjogXCJtb2RlbHMvcGlhbm9fa2V5X3doaXRlLmdsdGZcIixcclxuICAgIFwiQkxBQ0tcIjogXCJtb2RlbHMvcGlhbm9fa2V5X2JsYWNrLmdsdGZcIlxyXG59XHJcblxyXG5jb25zdCBzb3VuZHNQYXRoID0gXCJzb3VuZHMvcGlhbm8vXCI7XHJcbnZhciBwaWFub05vdGVzOiBJTm90ZVByb3BzW107XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRQaWFub05vdGVzKCk6IElOb3RlUHJvcHNbXSB7XHJcbiAgICBpZiAoIXBpYW5vTm90ZXMpIHtcclxuICAgICAgICBwaWFub05vdGVzID0gW107XHJcbiAgICAgICAgbGV0IGluZGV4ID0gMDtcclxuICAgICAgICBsZXQgd2hpdGVfaW5kZXggPSAwO1xyXG4gICAgICAgIGZvciAobGV0IG9jdGF2ZSBvZiBbMSwyLDMsNCw1LDZdKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGxldHRlciBvZiBbXCJDXCIsIFwiRFwiLCBcIkVcIiwgXCJGXCIsIFwiR1wiLCBcIkFcIiwgXCJCXCJdKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbm90ZSA9IGxldHRlciArIG9jdGF2ZTtcclxuICAgICAgICAgICAgICAgIGxldCB0eXBlID0gXCJXSElURVwiO1xyXG4gICAgICAgICAgICAgICAgcGlhbm9Ob3Rlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBub3RlOiBub3RlLCBpbmRleDogaW5kZXgsIHNvbmcgOiBzb3VuZHNQYXRoICsgbm90ZSArIHNvdW5kRmlsZUV4dGVuc2lvbiwgZXh0cmFzOiB7XCJ0eXBlXCI6IHR5cGUsIFwid2hpdGVfaW5kZXhcIjogd2hpdGVfaW5kZXh9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICB3aGl0ZV9pbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgaWYgKChvY3RhdmUgPT09IDYpICYmIChsZXR0ZXIgPT09IFwiQ1wiKSkgYnJlYWs7IC8vIGVuZCB3aXRoIEM2XHJcbiAgICAgICAgICAgICAgICBpZiAoW1wiQVwiLFwiQ1wiLFwiRFwiLFwiRlwiLFwiR1wiXS5pbmRleE9mKGxldHRlcikgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5vdGUgPSBsZXR0ZXIgKyBvY3RhdmUgKyBcIl9zaGFycFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0eXBlID0gXCJCTEFDS1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIHBpYW5vTm90ZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vdGU6IG5vdGUsIGluZGV4OiBpbmRleCwgc29uZyA6IHNvdW5kc1BhdGggKyBub3RlICsgc291bmRGaWxlRXh0ZW5zaW9uLCBleHRyYXM6IHtcInR5cGVcIjogdHlwZSwgXCJ3aGl0ZV9pbmRleFwiOiB3aGl0ZV9pbmRleH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBpYW5vTm90ZXM7XHJcbn07XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIFBpYW5vS2V5IGV4dGVuZHMgTm90ZSB7XHJcbiAgICBnZXRTaGFwZSgpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGdldE1hdGVyaWFsKCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgZ2V0Tm90ZVNoYXBlKG5vdGVQcm9wOiBJTm90ZVByb3BzKSB7XHJcbiAgICAgICAgbGV0IHR5cGUgPSBub3RlUHJvcC5leHRyYXNbXCJ0eXBlXCJdO1xyXG4gICAgICAgIHJldHVybiBuZXcgR0xURlNoYXBlKGtleXNNb2RlbEZpbGVbdHlwZV0pO1xyXG4gICAgfVxyXG4gICAgZ2V0SW5zdHJ1bWVudCgpIHtcclxuICAgICAgICByZXR1cm4gXCJwaWFub1wiO1xyXG4gICAgfVxyXG4gICAgYW5pbWF0ZSgpIHtcclxuICAgICAgICBuZXcgUGlhbm9LZXlBbmltYXRpb24odGhpcy5sb2csIHRoaXMuZW50aXR5KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFBpYW5vIGV4dGVuZHMgSW5zdHJ1bWVudDxQaWFub0tleT4ge1xyXG4gICAgY29uc3RydWN0b3IobG9nOiAoc3RyaW5nICk9PiB2b2lkLCBzb3VuZEh1YjogSVNvdW5kSHViLCB0cmFuc2Zvcm06IFRyYW5zZm9ybSkge1xyXG4gICAgICAgIHN1cGVyKGxvZywgc291bmRIdWIsIHRyYW5zZm9ybSk7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVOb3Rlcyhzb3VuZEh1YiwgUGlhbm9LZXksIGdldFBpYW5vTm90ZXMoKSk7XHJcbiAgICB9XHJcbiAgICBnZXRNYXRlcmlhbCgpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGdldFNoYXBlKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgR0xURlNoYXBlKHBpYW5vTW9kZWxGaWxlKTtcclxuICAgIH1cclxuICAgIGdldFRyYW5zZm9ybUZvck5vdGUobm90ZVByb3A6IElOb3RlUHJvcHMpOiBUcmFuc2Zvcm0ge1xyXG4gICAgICAgIHRoaXMubG9nKFwiUGlhbm86OmdldFRyYW5zZm9ybUZvck5vdGUoXCIgKyBub3RlUHJvcC5ub3RlICsgXCIsIGluZGV4PVwiICsgbm90ZVByb3AuaW5kZXggKyBcIiwgdHlwZT1cIiArIG5vdGVQcm9wLmV4dHJhc1sndHlwZSddICsgXCIsIHdoaXRlX2luZGV4PVwiICsgbm90ZVByb3AuZXh0cmFzWyd3aGl0ZV9pbmRleCddKTtcclxuICAgICAgICBsZXQgd2hpdGVfaW5kZXggPSBub3RlUHJvcC5leHRyYXNbJ3doaXRlX2luZGV4J10gYXMgbnVtYmVyOyBcclxuICAgICAgICBsZXQgc2NhbGVYID0gMC4xNzg7XHJcbiAgICAgICAgbGV0IHBvc1ggPSA3LjQgLSAwLjM5OCAqIHdoaXRlX2luZGV4O1xyXG4gICAgICAgIGxldCBwb3NZID0gNi4xO1xyXG4gICAgICAgIGxldCBwb3NaID0gMC4xODtcclxuICAgICAgICBpZiAobm90ZVByb3AuZXh0cmFzWyd0eXBlJ10gPT09IFwiQkxBQ0tcIikge1xyXG4gICAgICAgICAgICBzY2FsZVggPSAwLjE2O1xyXG4gICAgICAgICAgICBwb3NZICs9IDAuMTY7XHJcbiAgICAgICAgICAgIHBvc1ogLT0gMC4yNTtcclxuICAgICAgICB9IFxyXG4gICAgICAgIHJldHVybiBuZXcgVHJhbnNmb3JtKHtcclxuICAgICAgICAgICAgcG9zaXRpb246IG5ldyBWZWN0b3IzKHBvc1gsIHBvc1ksIHBvc1opLFxyXG4gICAgICAgICAgICByb3RhdGlvbjogUXVhdGVybmlvbi5FdWxlcigwLDAsMCksXHJcbiAgICAgICAgICAgIHNjYWxlOiBuZXcgVmVjdG9yMyhzY2FsZVgsIDAuMDgsIC0wLjE4KVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFBpYW5vS2V5QW5pbWF0aW9uIGltcGxlbWVudHMgSVN5c3RlbSB7XHJcbiAgICBwcmVzc2VkOiBib29sZWFuID0gdHJ1ZVxyXG4gICAgZnJhY3Rpb246IG51bWJlciA9IDBcclxuICAgIGVudGl0eTogRW50aXR5O1xyXG4gICAgbG9nOiAoc3RyaW5nICk9PiB2b2lkO1xyXG4gICAgY29uc3RydWN0b3IobG9nOiAoc3RyaW5nICk9PiB2b2lkLCBlbnRpdHk6IEVudGl0eSkge1xyXG4gICAgICB0aGlzLmxvZyA9IGxvZztcclxuICAgICAgdGhpcy5lbnRpdHkgPSBlbnRpdHk7XHJcbiAgICAgIGVuZ2luZS5hZGRTeXN0ZW0odGhpcyk7XHJcbiAgICAgIHRoaXMubG9nKFwiQnVpbGQgYSBuZXcgUGlhbm9LZXlBbmltYXRpb25cIik7XHJcbiAgICB9O1xyXG4gICAgdXBkYXRlKCkge1xyXG4gICAgICAgIHRoaXMubG9nKFwiUGlhbm9LZXlBbmltYXRpb246OnVwZGF0ZSgpXCIpO1xyXG4gICAgICBsZXQgdHJhbnNmb3JtID0gdGhpcy5lbnRpdHkuZ2V0Q29tcG9uZW50KFRyYW5zZm9ybSlcclxuICAgICAgaWYgKCh0aGlzLnByZXNzZWQgPT0gdHJ1ZSkgJiYgKHRoaXMuZnJhY3Rpb24gPCAxKSkge1xyXG4gICAgICAgICAgdGhpcy5mcmFjdGlvbiArPSAxLzQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmICgodGhpcy5wcmVzc2VkID09IGZhbHNlKSAmJiAodGhpcy5mcmFjdGlvbiA+IDApKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5mcmFjdGlvbiAtPSAxLzI7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmZyYWN0aW9uID49IDEpIHtcclxuICAgICAgICAgIHRoaXMuZnJhY3Rpb24gPSAxO1xyXG4gICAgICAgICAgdGhpcy5maW5pc2goKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZnJhY3Rpb24gPD0gMCkge1xyXG4gICAgICAgICAgdGhpcy5mcmFjdGlvbiA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyYW5zZm9ybS5yb3RhdGlvbiA9IFF1YXRlcm5pb24uRXVsZXIoNCAtIDQgKiB0aGlzLmZyYWN0aW9uLHRyYW5zZm9ybS5yb3RhdGlvbi55LHRyYW5zZm9ybS5yb3RhdGlvbi56KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGFydCgpIHtcclxuICAgICAgICB0aGlzLnByZXNzZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGZpbmlzaCgpIHtcclxuICAgICAgICBlbmdpbmUucmVtb3ZlU3lzdGVtKHRoaXMpXHJcbiAgICAgICAgdGhpcy5wcmVzc2VkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfSIsImltcG9ydCB7IEVudGl0eVdyYXBwZXIgfSBmcm9tIFwiLi9lbnRpdHlfd3JhcHBlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFB1c2hCdXR0b24gZXh0ZW5kcyBFbnRpdHlXcmFwcGVyIHtcclxuICAgIHByZXNzZWRTY2FsZVJhdGlvID0gMC4zO1xyXG4gICAgY29uc3RydWN0b3IobG9nOiAoc3RyaW5nICk9PiB2b2lkLCB0cmFuc2Zvcm06IFRyYW5zZm9ybSwgaW1hZ2U6IHN0cmluZywgb25QdXNoZWQ6ICgpPT52b2lkLCBwYXJlbnQ/OiBFbnRpdHkpIHtcclxuICAgICAgICBzdXBlcihsb2csIHRyYW5zZm9ybSwgcGFyZW50KTtcclxuICAgICAgICBsZXQgbGFiZWwgPSBuZXcgRW50aXR5KCk7XHJcbiAgICAgICAgdGhpcy5lbnRpdHkuYWRkQ29tcG9uZW50T3JSZXBsYWNlKHRoaXMuZ2V0TWF0ZXJpYWwoKSk7XHJcbiAgICAgICAgbGFiZWwuc2V0UGFyZW50KHRoaXMuZW50aXR5KTtcclxuICAgICAgICBsYWJlbC5hZGRDb21wb25lbnQobmV3IEJveFNoYXBlKCkpO1xyXG4gICAgICAgIGxhYmVsLmFkZENvbXBvbmVudChuZXcgVHJhbnNmb3JtKHtcclxuICAgICAgICAgICAgcG9zaXRpb246IG5ldyBWZWN0b3IzKDAuNSwwLDApLFxyXG4gICAgICAgICAgICByb3RhdGlvbjogUXVhdGVybmlvbi5FdWxlcig5MCwwLDApLFxyXG4gICAgICAgICAgICBzY2FsZTogbmV3IFZlY3RvcjMoMC4wMSwxLjAsMS4wKVxyXG4gICAgICAgIH0pKTtcclxuICAgICAgICBjb25zdCBtYXRlcmlhbExhYmVsID0gbmV3IE1hdGVyaWFsKCk7XHJcbiAgICAgICAgbWF0ZXJpYWxMYWJlbC5hbGJlZG9UZXh0dXJlID0gbmV3IFRleHR1cmUoaW1hZ2UpO1xyXG4gICAgICAgIGxhYmVsLmFkZENvbXBvbmVudChtYXRlcmlhbExhYmVsKTtcclxuICAgICAgICBsYWJlbC5hZGRDb21wb25lbnQobmV3IE9uQ2xpY2soZSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBhbmltID0gbmV3IFB1c2hCdXR0b25BbmltYXRpb24odGhpcy5sb2csIHRoaXMuZW50aXR5LCAoZnJhY3Rpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCB0cmFuc2Zvcm0gPSB0aGlzLmVudGl0eS5nZXRDb21wb25lbnQoVHJhbnNmb3JtKTtcclxuICAgICAgICAgICAgICAgIGxldCBzY2FsZVggPSB0cmFuc2Zvcm0uc2NhbGUueCAqICgxIC0gZnJhY3Rpb24gKiB0aGlzLnByZXNzZWRTY2FsZVJhdGlvKTtcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybS5zY2FsZSA9IG5ldyBWZWN0b3IzKHNjYWxlWCx0cmFuc2Zvcm0uc2NhbGUueSx0cmFuc2Zvcm0uc2NhbGUueilcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChvblB1c2hlZCkgb25QdXNoZWQoKTtcclxuICAgICAgICB9KSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U2hhcGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBCb3hTaGFwZSgpO1xyXG4gICAgfVxyXG4gICAgZ2V0TWF0ZXJpYWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFB1c2hCdXR0b25BbmltYXRpb24gaW1wbGVtZW50cyBJU3lzdGVtIHtcclxuICAgIHVwOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBkb3duOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBmcmFjdGlvbjogbnVtYmVyID0gMDtcclxuICAgIGluY3JlbWVudF91cDogbnVtYmVyID0gMC4yNTtcclxuICAgIGluY3JlbWVudF9kb3duOiBudW1iZXIgPSAwLjI1O1xyXG4gICAgZW50aXR5OiBFbnRpdHk7XHJcbiAgICBsb2c6IChzdHJpbmcgKT0+IHZvaWQ7XHJcbiAgICB0cmFuc2Zvcm1GbjogKG51bWJlcik9PiB2b2lkO1xyXG4gICAgY29uc3RydWN0b3IobG9nOiAoc3RyaW5nKSA9PiB2b2lkLCBlbnRpdHk6IEVudGl0eSwgdHJhbnNmb3JtRm46IChudW1iZXIpID0+IHZvaWQpIHtcclxuICAgICAgdGhpcy5sb2cgPSBsb2c7XHJcbiAgICAgIHRoaXMuZW50aXR5ID0gZW50aXR5O1xyXG4gICAgICB0aGlzLnRyYW5zZm9ybUZuID0gdHJhbnNmb3JtRm47XHJcbiAgICB9O1xyXG4gICAgdXBkYXRlKCkge1xyXG4gICAgICAgIGxldCB0cmFuc2Zvcm0gPSB0aGlzLmVudGl0eS5nZXRDb21wb25lbnQoVHJhbnNmb3JtKVxyXG4gICAgICAgIGlmICh0aGlzLnVwICYmICh0aGlzLmZyYWN0aW9uIDwgMSkpe1xyXG4gICAgICAgICAgICB0aGlzLmZyYWN0aW9uICs9IHRoaXMuaW5jcmVtZW50X3VwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5kb3duICYmICh0aGlzLmZyYWN0aW9uID4gMCkpIHtcclxuICAgICAgICAgICAgdGhpcy5mcmFjdGlvbiAtPSB0aGlzLmluY3JlbWVudF9kb3duO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxvZyhcIlB1c2hCdXR0b25BbmltYXRpb24oKSBmcmFjdGlvbj1cIiArIHRoaXMuZnJhY3Rpb24pO1xyXG4gICAgICAgIGlmICh0aGlzLmZyYWN0aW9uIDw9IDApIHsgLy8gZW5kIG5vd1xyXG4gICAgICAgICAgICB0aGlzLmZpbmlzaCgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmZyYWN0aW9uID49IDEpIHsgLy8gcmV2ZXJzZVxyXG4gICAgICAgICAgICB0aGlzLnVwID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuZG93biA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtRm4odGhpcy5mcmFjdGlvbik7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhcnQoKSB7XHJcbiAgICAgICAgZW5naW5lLmFkZFN5c3RlbSh0aGlzKTtcclxuICAgICAgICB0aGlzLnVwID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBmaW5pc2goKSB7XHJcbiAgICAgICAgZW5naW5lLnJlbW92ZVN5c3RlbSh0aGlzKVxyXG4gICAgICAgIHRoaXMuZnJhY3Rpb24gPSAwO1xyXG4gICAgICAgIHRoaXMudXAgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmRvd24gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybUZuKHRoaXMuZnJhY3Rpb24pO1xyXG4gICAgfVxyXG4gIH0iLCJcclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFVJV3JhcHBlciB7XHJcbiAgICBwdWJsaWMgZGlzcGxheSgpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci52aXNpYmxlID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgY29udGFpbmVyOiBVSUNvbnRhaW5lclJlY3Q7XHJcbiAgICBsb2c6IChzdHJpbmcgKT0+IHZvaWQ7XHJcbiAgICBjb25zdHJ1Y3Rvcihsb2c6IChzdHJpbmcgKT0+IHZvaWQsIHBhcmVudDogVUlTaGFwZSkge1xyXG4gICAgICAgIHRoaXMubG9nID0gbG9nO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gbmV3IFVJQ29udGFpbmVyUmVjdChwYXJlbnQpO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLndpZHRoID0gJzEwMCUnO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmhlaWdodCA9ICczMyUnO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmhBbGlnbiA9ICdjZW50ZXInO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnZBbGlnbiA9ICd0b3AnO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmlzUG9pbnRlckJsb2NrZXIgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnZpc2libGUgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHByb3RlY3RlZCBhZGRDbG9zZUJ1dHRvbigpIHtcclxuICAgICAgICBjb25zdCBjbG9zZUljb24gPSBuZXcgVUlJbWFnZSh0aGlzLmNvbnRhaW5lciwgbmV3IFRleHR1cmUoJ2ltYWdlcy9jbG9zZS1pY29uMy5wbmcnKSlcclxuICAgICAgICBjbG9zZUljb24ubmFtZSA9ICdjbGlja2FibGUtaW1hZ2UnXHJcbiAgICAgICAgY2xvc2VJY29uLndpZHRoID0gJzUwcHgnXHJcbiAgICAgICAgY2xvc2VJY29uLmhlaWdodCA9ICc1MHB4J1xyXG4gICAgICAgIGNsb3NlSWNvbi5oQWxpZ24gPSAncmlnaHQnXHJcbiAgICAgICAgY2xvc2VJY29uLnZBbGlnbiA9ICd0b3AnXHJcbiAgICAgICAgY2xvc2VJY29uLnNvdXJjZVdpZHRoID0gMTI4XHJcbiAgICAgICAgY2xvc2VJY29uLnNvdXJjZUhlaWdodCA9IDEyOFxyXG4gICAgICAgIGNsb3NlSWNvbi5pc1BvaW50ZXJCbG9ja2VyID0gdHJ1ZVxyXG4gICAgICAgIGNsb3NlSWNvbi5vbkNsaWNrID0gbmV3IE9uQ2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmhpZGUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzaG93KCkge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmlzUG9pbnRlckJsb2NrZXIgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGhpZGUoKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmlzUG9pbnRlckJsb2NrZXIgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBpc1Zpc2libGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVyLnZpc2libGU7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBQdXNoQnV0dG9uIH0gZnJvbSBcIi4vcHVzaGJ1dHRvblwiO1xyXG5pbXBvcnQgeyBVSVdyYXBwZXIgfSBmcm9tIFwiLi91aV93cmFwcGVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUGxheUl0IGV4dGVuZHMgUHVzaEJ1dHRvbiB7XHJcbiAgICB1aTogVUlXcmFwcGVyO1xyXG4gICAgY29uc3RydWN0b3IobG9nOiAoc3RyaW5nICk9PiB2b2lkLCB0cmFuc2Zvcm06IFRyYW5zZm9ybSwgcGFyZW50OiBFbnRpdHksIHVpOiBVSVdyYXBwZXIpIHtcclxuICAgICAgICBzdXBlcihsb2csIHRyYW5zZm9ybSwgJ2ltYWdlcy9wbGF5bWUuanBnJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBXaGVuIHRoZSBidXR0b24gaXMgcHVzaGVkLCBkaXNwbGF5IHRoZSBVSVxyXG4gICAgICAgICAgICBpZiAoIXRoaXMudWkuaXNWaXNpYmxlKCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudWkuc2hvdygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51aS5oaWRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBwYXJlbnQpO1xyXG4gICAgICAgIHRoaXMudWkgPSB1aTtcclxuICAgICAgICAvLyB0aGlzLmVudGl0eS5hZGRDb21wb25lbnQobmV3IE9uQ2xpY2soZSA9PiB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMubG9nKFwiQ2xpY2sgb24gUGxheUl0ICFcIik7XHJcbiAgICAgICAgLy8gICAgIGlmICh0aGlzLnVpKSB7XHJcbiAgICAgICAgLy8gICAgICAgICB0aGlzLnVpLnNob3coKTtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vIH0pKVxyXG4gICAgfVxyXG4gICAgZ2V0TWF0ZXJpYWwoKSB7XHJcbiAgICAgICAgY29uc3QgbWF0ZXJpYWxCb3ggPSBuZXcgTWF0ZXJpYWwoKTtcclxuICAgICAgICBtYXRlcmlhbEJveC5hbGJlZG9Db2xvciA9IENvbG9yMy5CbGFjaygpO1xyXG4gICAgICAgIG1hdGVyaWFsQm94Lmhhc0FscGhhID0gdHJ1ZTtcclxuICAgICAgICBtYXRlcmlhbEJveC5hbHBoYSA9IDAuNTtcclxuICAgICAgICBtYXRlcmlhbEJveC5lbWlzc2l2ZUNvbG9yID0gQ29sb3IzLlllbGxvdygpO1xyXG4gICAgICAgIHJldHVybiBtYXRlcmlhbEJveDtcclxuICAgIH1cclxufSIsImltcG9ydCB7IElOb3RlQ29udHJvbGxlciwgSVNvdW5kSHViIH0gZnJvbSBcIi4uL3NvdW5kaHViL3NvdW5kaHViXCI7XHJcbmltcG9ydCB7IElOb3RlUHJvcHMgfSBmcm9tIFwiLi4vaW5zdHJ1bWVudHMvSW5zdHJ1bWVudFwiO1xyXG5pbXBvcnQgeyBVSVdyYXBwZXIgfSBmcm9tIFwiLi4vdWlfd3JhcHBlclwiO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFVJSW5zdHJ1bWVudCBleHRlbmRzIFVJV3JhcHBlciBpbXBsZW1lbnRzIElOb3RlQ29udHJvbGxlciB7XHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0SW5zdHJ1bWVudCgpOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgY3JlYXRlTm90ZXMoc291bmRIdWI6IElTb3VuZEh1Yiwgbm90ZVByb3BzOiBJTm90ZVByb3BzW10pO1xyXG4gICAgcHVibGljIGRpc3BsYXkoKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIudmlzaWJsZSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgc291bmRIdWI6IElTb3VuZEh1YjtcclxuICAgIGNvbnN0cnVjdG9yKGxvZzogKHN0cmluZyApPT4gdm9pZCwgcGFyZW50OiBVSVNoYXBlKSB7XHJcbiAgICAgICAgc3VwZXIobG9nLCBwYXJlbnQpO1xyXG4gICAgICAgIHRoaXMuYWRkQ2xvc2VCdXR0b24oKTtcclxuICAgIH1cclxuICAgIC8vICoqKiogSU5vdGVDb250cm9sbGVyIGltcGxlbWVudGF0aW9uICoqKipcclxuICAgIF9vblBsYXllZE5vdGVDYWxsYmFja3M6ICgoaW5zdHJ1bWVudDogc3RyaW5nLCBub3RlOiBzdHJpbmcpPT52b2lkKVtdID0gW107XHJcbiAgICBwdWJsaWMgc2V0U291bmRIdWIoc291bmRIdWI6IElTb3VuZEh1Yikge1xyXG4gICAgICAgIHRoaXMuc291bmRIdWIgPSBzb3VuZEh1YjtcclxuICAgICAgICBzb3VuZEh1Yi5yZWdpc3Rlck5vdGVDb250cm9sbGVyKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHJlZ2lzdGVyT25QbGF5ZWROb3RlKG9uUGxheU5vdGU6IChpbnN0cnVtZW50OiBzdHJpbmcsIG5vdGU6IHN0cmluZyk9PiB2b2lkKSB7XHJcbiAgICAgICAgLy8gYWxsb3cgcmVnaXN0ZXJpbmcgdG8gYWxsb3cgcmVjb3JkaW5nIGZyb20gVUlcclxuICAgICAgICB0aGlzLl9vblBsYXllZE5vdGVDYWxsYmFja3MucHVzaChvblBsYXlOb3RlKTtcclxuICAgIH1cclxuICAgIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuXHJcbiAgICBub3RpZnlQbGF5aW5nKG5vdGUpIHtcclxuICAgICAgICAvLyBOb3RpZnkgbGlzdGVuZXJzIHRvIGFsbG93IHJlY29yZGluZ1xyXG4gICAgICAgIHRoaXMubG9nKGBQaWFub0l0ZW1VSSA6IHBsYXkgbm90ZSAke25vdGV9YCk7XHJcbiAgICAgICAgdGhpcy5fb25QbGF5ZWROb3RlQ2FsbGJhY2tzLmZvckVhY2gob25QbGF5Tm90ZSA9PiB7XHJcbiAgICAgICAgICAgIG9uUGxheU5vdGUuY2FsbCh0aGlzLCB0aGlzLmdldEluc3RydW1lbnQoKSwgbm90ZSk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIHByb3RlY3RlZCBvbkNsaWNrQ2FsbGJhY2sobm90ZSkge1xyXG4gICAgICAgIC8vIHJlbGF5IHRvd2FyZHMgdGhlIDNEIGVudGl0eSBjb250YWluaW5nIHRoZSBzb3VuZCBDb21wb25lbnRcclxuICAgICAgICB0aGlzLnNvdW5kSHViLm9uUGxheU5vdGUodGhpcy5nZXRJbnN0cnVtZW50KCksIG5vdGUpO1xyXG4gICAgICAgIHRoaXMubm90aWZ5UGxheWluZyhub3RlKTtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBJTm90ZVByb3BzLCBJbnN0cnVtZW50IH0gZnJvbSBcIi4vSW5zdHJ1bWVudFwiO1xyXG5pbXBvcnQgeyBOb3RlIH0gZnJvbSBcIi4vbm90ZVwiO1xyXG5pbXBvcnQgeyBJU291bmRIdWIgfSBmcm9tIFwiLi4vc291bmRodWIvc291bmRodWJcIjtcclxuXHJcbmNvbnN0IGJhc3NNb2RlbEZpbGUgPSBcIm1vZGVscy9iYXNzX3BlcnNvXzEuZ2x0ZlwiO1xyXG5jb25zdCBzb3VuZHNQYXRoID0gXCJzb3VuZHMvYmFzcy9cIjtcclxuY29uc3QgZXh0ZW5zaW9uID0gXCIubXAzXCI7XHJcbnZhciBiYXNzTm90ZXM6IElOb3RlUHJvcHNbXTtcclxuZXhwb3J0IGZ1bmN0aW9uIGdldEJhc3NOb3RlcygpOiBJTm90ZVByb3BzW10ge1xyXG4gICAgaWYgKCFiYXNzTm90ZXMpIHtcclxuICAgICAgICBiYXNzTm90ZXMgPSBbXTtcclxuICAgICAgICBsZXQgaW5kZXggPSAwO1xyXG4gICAgICAgIGxldCBjb3JkID0gMTtcclxuICAgICAgICBsZXQgcG9zaXRpb24gPSAwO1xyXG4gICAgICAgIGZvciAobGV0IG9jdGF2ZSBvZiBbMSwyLDNdKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGxldHRlciBvZiBbXCJDXCIsIFwiRFwiLCBcIkVcIiwgXCJGXCIsIFwiR1wiLCBcIkFcIiwgXCJCXCJdKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoKG9jdGF2ZSA9PT0gMSkgJiYgKFtcIkNcIiwgXCJEXCJdLmluZGV4T2YobGV0dGVyKSAhPT0gLTEpKSBjb250aW51ZTsgLy8gc3RhcnQgd2l0aCBFMVxyXG4gICAgICAgICAgICAgICAgbGV0IG5vdGUgPSBsZXR0ZXIgKyBvY3RhdmU7XHJcbiAgICAgICAgICAgICAgICBpZiAoKChvY3RhdmUgPT09IDEpICYmIChsZXR0ZXIgPT09IFwiQVwiKSkgIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgKChvY3RhdmUgPT09IDIpICYmIChsZXR0ZXIgPT09IFwiRFwiKSkgIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgKChvY3RhdmUgPT09IDIpICYmIChsZXR0ZXIgPT09IFwiR1wiKSlcclxuICAgICAgICAgICAgICAgICkgeyAvLyBjaGFuZ2UgY29yZFxyXG4gICAgICAgICAgICAgICAgICAgIGJhc3NOb3Rlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm90ZTogbm90ZSArIFwiX1wiLCBpbmRleDogaW5kZXgsIHNvbmcgOiBzb3VuZHNQYXRoICsgbm90ZSArIFwiX1wiICsgZXh0ZW5zaW9uLCBleHRyYXM6IHtcImNvcmRcIjogY29yZCwgXCJwb3NpdGlvblwiOiBwb3NpdGlvbn1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjb3JkKys7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYmFzc05vdGVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIG5vdGU6IG5vdGUsIGluZGV4OiBpbmRleCwgc29uZyA6IHNvdW5kc1BhdGggKyBub3RlICsgZXh0ZW5zaW9uLCBleHRyYXM6IHtcImNvcmRcIjogY29yZCwgXCJwb3NpdGlvblwiOiBwb3NpdGlvbn1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uKys7XHJcbiAgICAgICAgICAgICAgICBpZiAoKG9jdGF2ZSA9PT0gMykgJiYgKGxldHRlciA9PT0gXCJDXCIpKSBicmVhazsgLy8gZW5kIHdpdGggQzNcclxuICAgICAgICAgICAgICAgIGlmIChbXCJBXCIsXCJDXCIsXCJEXCIsXCJGXCIsXCJHXCJdLmluZGV4T2YobGV0dGVyKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbm90ZSA9IGxldHRlciArIG9jdGF2ZSArIFwiX3NoYXJwXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzc05vdGVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub3RlOiBub3RlLCBpbmRleDogaW5kZXgsIHNvbmcgOiBzb3VuZHNQYXRoICsgbm90ZSArIGV4dGVuc2lvbiwgZXh0cmFzOiB7XCJjb3JkXCI6IGNvcmQsIFwicG9zaXRpb25cIjogcG9zaXRpb259XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbisrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGJhc3NOb3RlcztcclxufTtcclxuXHJcbmV4cG9ydCBjbGFzcyBCYXNzTm90ZSBleHRlbmRzIE5vdGUge1xyXG4gICAgZ2V0U2hhcGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQbGFuZVNoYXBlKCk7XHJcbiAgICB9XHJcbiAgICBnZXRNYXRlcmlhbCgpIHtcclxuICAgICAgICBjb25zdCBtYXRlcmlhbCA9IG5ldyBNYXRlcmlhbCgpXHJcbiAgICAgICAgbWF0ZXJpYWwuYWxiZWRvVGV4dHVyZSA9IG5ldyBUZXh0dXJlKFwiaW1hZ2VzL2ZpbmdlcnByaW50LnBuZ1wiLHtoYXNBbHBoYTogdHJ1ZX0pO1xyXG4gICAgICAgIG1hdGVyaWFsLmhhc0FscGhhID0gdHJ1ZTtcclxuICAgICAgICByZXR1cm4gbWF0ZXJpYWw7XHJcbiAgICB9XHJcbiAgICBnZXROb3RlU2hhcGUobm90ZVByb3A6IElOb3RlUHJvcHMpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGdldEluc3RydW1lbnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiYmFzc1wiO1xyXG4gICAgfVxyXG4gICAgYW5pbWF0ZSgpIHtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEJhc3MgZXh0ZW5kcyBJbnN0cnVtZW50PEJhc3NOb3RlPiB7XHJcbiAgICBjb25zdHJ1Y3Rvcihsb2c6IChzdHJpbmcgKT0+IHZvaWQsIHNvdW5kSHViOiBJU291bmRIdWIsIHRyYW5zZm9ybTogVHJhbnNmb3JtKSB7XHJcbiAgICAgICAgc3VwZXIobG9nLCBzb3VuZEh1YiwgdHJhbnNmb3JtKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZU5vdGVzKHNvdW5kSHViLCBCYXNzTm90ZSwgZ2V0QmFzc05vdGVzKCkpO1xyXG4gICAgfVxyXG4gICAgZ2V0TWF0ZXJpYWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBnZXRTaGFwZSgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEdMVEZTaGFwZShiYXNzTW9kZWxGaWxlKTtcclxuICAgIH1cclxuICAgIGdldFRyYW5zZm9ybUZvck5vdGUobm90ZVByb3A6IElOb3RlUHJvcHMpOiBUcmFuc2Zvcm0ge1xyXG4gICAgICAgIGxldCBwb3NYID0gMC40O1xyXG4gICAgICAgIGxldCBwb3NZID0gMC44O1xyXG4gICAgICAgIGxldCBwb3NaID0gLTEzLjA7XHJcbiAgICAgICAgbGV0IG5vdGVDb3JkID0gbm90ZVByb3AuZXh0cmFzWydjb3JkJ10gYXMgbnVtYmVyO1xyXG4gICAgICAgIGxldCBub3RlUG9zaXRpb24gPSBub3RlUHJvcC5leHRyYXNbJ3Bvc2l0aW9uJ10gYXMgbnVtYmVyO1xyXG4gICAgICAgIHJldHVybiBuZXcgVHJhbnNmb3JtKHtcclxuICAgICAgICAgICAgcG9zaXRpb246IG5ldyBWZWN0b3IzKHBvc1gtKDAuMiAqIG5vdGVDb3JkKSwgcG9zWSwgcG9zWiArIDEuMipub3RlUG9zaXRpb24gLTAuMSpub3RlQ29yZCksXHJcbiAgICAgICAgICAgIHJvdGF0aW9uOiBRdWF0ZXJuaW9uLkV1bGVyKDkwLDAsMCksXHJcbiAgICAgICAgICAgIHNjYWxlOiBuZXcgVmVjdG9yMygwLjQsIDEuMCwgMC44KSxcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59XHJcblxyXG4iLCJpbXBvcnQgeyBVSUluc3RydW1lbnQgfSBmcm9tIFwiLi9VSUluc3RydW1lbnRcIjtcclxuaW1wb3J0IHsgSVNvdW5kSHViLCBJTm90ZUNvbnRyb2xsZXIgfSBmcm9tIFwiLi4vc291bmRodWIvc291bmRodWJcIjtcclxuaW1wb3J0IHsgSU5vdGVQcm9wcyB9IGZyb20gXCIuLi9pbnN0cnVtZW50cy9JbnN0cnVtZW50XCI7XHJcbmltcG9ydCB7IGdldEJhc3NOb3RlcyB9IGZyb20gXCIuLi9pbnN0cnVtZW50cy9iYXNzXCI7XHJcblxyXG5jb25zdCBpbnN0cnVtZW50ID0gXCJiYXNzXCI7XHJcblxyXG5sZXQgaW1hZ2VUZXh0dXJlID0gbmV3IFRleHR1cmUoJ2ltYWdlcy9iYXNzX2d1aXRhci5wbmcnKTtcclxuXHJcblxyXG5leHBvcnQgY2xhc3MgQmFzc1VJIGV4dGVuZHMgVUlJbnN0cnVtZW50IHtcclxuICAgIGltYWdlOiBVSUltYWdlO1xyXG4gICAgY29uc3RydWN0b3IobG9nOiAoc3RyaW5nICk9PiB2b2lkLCBwYXJlbnQ6IFVJU2hhcGUpIHtcclxuICAgICAgICBzdXBlcihsb2csIHBhcmVudCk7XHJcbiAgICAgICAgdGhpcy5pbWFnZSA9IG5ldyBVSUltYWdlKHRoaXMuY29udGFpbmVyLCBpbWFnZVRleHR1cmUpO1xyXG4gICAgICAgIHRoaXMuaW1hZ2UuaEFsaWduID0gJ2NlbnRlcidcclxuICAgICAgICB0aGlzLmltYWdlLnBvc2l0aW9uWSA9ICczMCUnXHJcbiAgICAgICAgdGhpcy5pbWFnZS5wYWRkaW5nVG9wID0gNTA7IC8vIHVuZGVyIHRoZSBjbG9zZSBidXR0b25cclxuICAgICAgICB0aGlzLmltYWdlLnNvdXJjZVdpZHRoID0gNDE3XHJcbiAgICAgICAgdGhpcy5pbWFnZS5zb3VyY2VIZWlnaHQgPSAxNzhcclxuICAgICAgICB0aGlzLmltYWdlLndpZHRoID0gYDEwMCVgXHJcbiAgICAgICAgdGhpcy5pbWFnZS5oZWlnaHQgPSBgMTgwJWBcclxuICAgICAgICB0aGlzLmltYWdlLmlzUG9pbnRlckJsb2NrZXIgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuaW1hZ2Uub3BhY2l0eSA9IDEuMDtcclxuXHJcbiAgICAgICAgY29uc3QgdG9vbE5hbWUgPSBuZXcgVUlUZXh0KHRoaXMuY29udGFpbmVyKVxyXG4gICAgICAgIHRvb2xOYW1lLnZhbHVlID0gXCJCYXNzIEd1aXRhclwiXHJcbiAgICAgICAgdG9vbE5hbWUuZm9udFNpemUgPSAyMFxyXG4gICAgICAgIHRvb2xOYW1lLnZBbGlnbiA9ICd0b3AnXHJcbiAgICAgICAgdG9vbE5hbWUud2lkdGggPSAnMTUwcHgnXHJcbiAgICAgICAgdG9vbE5hbWUuaGVpZ2h0ID0gJzM1cHgnXHJcbiAgICAgICAgdG9vbE5hbWUucG9zaXRpb25YID0gMjBcclxuICAgICAgICB0b29sTmFtZS5wYWRkaW5nVG9wID0gLTEwXHJcbiAgICAgICAgdG9vbE5hbWUuY29sb3IgPSBDb2xvcjQuRnJvbUhleFN0cmluZygnIzBGMTIxN2ZmJylcclxuXHJcbiAgICAgICAgXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0U291bmRIdWIoc291bmRIdWI6IElTb3VuZEh1Yikge1xyXG4gICAgICAgIHN1cGVyLnNldFNvdW5kSHViKHNvdW5kSHViKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZU5vdGVzKHNvdW5kSHViLCBnZXRCYXNzTm90ZXMoKSk7XHJcbiAgICB9XHJcbiAgICBjcmVhdGVOb3Rlcyhzb3VuZEh1YjogSVNvdW5kSHViLCBub3RlUHJvcHM6IElOb3RlUHJvcHNbXSkge1xyXG4gICAgICAgIGxldCB0YWJQb3NpdGlvblggPSBbJzMyLjUlJywgJzI1JScsICcxOC43JScsICcxMi42JScsICc2LjclJywgJzEuMCUnXTtcclxuICAgICAgICBsZXQgY29yZFBvc2l0aW9uWSA9IFsnNyUnLCAnMyUnLCAnLTElJywgJy01JSddO1xyXG4gICAgICAgIGZvciAobGV0IG5vdGVQcm9wIG9mIG5vdGVQcm9wcykge1xyXG4gICAgICAgICAgICBsZXQgbm90ZUNvcmQgPSBub3RlUHJvcC5leHRyYXNbJ2NvcmQnXSBhcyBudW1iZXI7XHJcbiAgICAgICAgICAgIGxldCBub3RlUG9zaXRpb24gPSBub3RlUHJvcC5leHRyYXNbJ3Bvc2l0aW9uJ10gYXMgbnVtYmVyO1xyXG4gICAgICAgICAgICBsZXQgaXRlbSA9IG5ldyBCYXNzSXRlbVVJKHRoaXMubG9nLCB0aGlzLmltYWdlLCBub3RlUHJvcC5ub3RlLCB0YWJQb3NpdGlvblhbbm90ZVBvc2l0aW9uXSwgY29yZFBvc2l0aW9uWVtub3RlQ29yZC0xXSk7XHJcbiAgICAgICAgICAgIGl0ZW0uc2V0U291bmRIdWIoc291bmRIdWIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgICBnZXRJbnN0cnVtZW50KCkge1xyXG4gICAgICAgIHJldHVybiBpbnN0cnVtZW50O1xyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBpbWFnZUl0ZW0gPSBuZXcgVGV4dHVyZSAoXCJpbWFnZXMvYmFzc0l0ZW1VSS5wbmdcIiwge2hhc0FscGhhOiB0cnVlfSk7XHJcblxyXG5leHBvcnQgY2xhc3MgQmFzc0l0ZW1VSSBpbXBsZW1lbnRzIElOb3RlQ29udHJvbGxlciB7XHJcbiAgICBub3RlOiBzdHJpbmc7XHJcbiAgICBpbWFnZTogVUlJbWFnZTtcclxuICAgIGxvZzogKHN0cmluZyApPT4gdm9pZDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihsb2c6IChzdHJpbmcgKT0+IHZvaWQsIHBhcmVudDogVUlTaGFwZSwgbm90ZTogc3RyaW5nLCBwb3NYLCBwb3NZKSB7XHJcbiAgICAgICAgdGhpcy5sb2cgPSBsb2c7XHJcbiAgICAgICAgdGhpcy5pbWFnZSA9IG5ldyBVSUltYWdlKHBhcmVudCwgaW1hZ2VJdGVtKTtcclxuICAgICAgICB0aGlzLmltYWdlLnBvc2l0aW9uWCA9IHBvc1g7XHJcbiAgICAgICAgdGhpcy5pbWFnZS5wb3NpdGlvblkgPSBwb3NZO1xyXG4gICAgICAgIHRoaXMuaW1hZ2Uuc291cmNlV2lkdGggPSA2ODAgOyAgIFxyXG4gICAgICAgIHRoaXMuaW1hZ2Uuc291cmNlSGVpZ2h0ID0gNTE4O1xyXG4gICAgICAgIHRoaXMuaW1hZ2Uud2lkdGggPSAzMDtcclxuICAgICAgICB0aGlzLmltYWdlLmhlaWdodCA9IDE0O1xyXG4gICAgICAgIHRoaXMubm90ZSA9IG5vdGU7XHJcbiAgICAgICAgdGhpcy5pbWFnZS5pc1BvaW50ZXJCbG9ja2VyID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmltYWdlLm9uQ2xpY2sgPSBuZXcgT25DbGljayhldmVudCA9PiB7dGhpcy5vbkNsaWNrQ2FsbGJhY2soKTt9KTtcclxuICAgIH1cclxuXHJcbiAgICBzb3VuZEh1YjogSVNvdW5kSHViO1xyXG4gICAgLy8gKioqKiBJTm90ZUNvbnRyb2xsZXIgaW1wbGVtZW50YXRpb24gKioqKlxyXG4gICAgX29uUGxheWVkTm90ZUNhbGxiYWNrczogKChpbnN0cnVtZW50OiBzdHJpbmcsIG5vdGU6IHN0cmluZyk9PnZvaWQpW10gPSBbXTtcclxuICAgIHB1YmxpYyBzZXRTb3VuZEh1Yihzb3VuZEh1YjogSVNvdW5kSHViKSB7XHJcbiAgICAgICAgdGhpcy5zb3VuZEh1YiA9IHNvdW5kSHViO1xyXG4gICAgICAgIHRoaXMuc291bmRIdWIucmVnaXN0ZXJOb3RlQ29udHJvbGxlcih0aGlzKTtcclxuICAgIH0gXHJcbiAgICBwdWJsaWMgcmVnaXN0ZXJPblBsYXllZE5vdGUob25QbGF5Tm90ZTogKGluc3RydW1lbnQ6IHN0cmluZywgbm90ZTogc3RyaW5nKT0+IHZvaWQpIHtcclxuICAgICAgICAvLyBhbGxvdyByZWdpc3RlcmluZyB0byBhbGxvdyByZWNvcmRpbmcgZnJvbSBVSVxyXG4gICAgICAgIHRoaXMuX29uUGxheWVkTm90ZUNhbGxiYWNrcy5wdXNoKG9uUGxheU5vdGUpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGdldEluc3RydW1lbnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIGluc3RydW1lbnQ7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0Tm90ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ub3RlO1xyXG4gICAgfVxyXG4gICAgLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5cclxuICAgIG5vdGlmeVBsYXlpbmcoKSB7XHJcbiAgICAgICAgLy8gTm90aWZ5IGxpc3RlbmVycyB0byBhbGxvdyByZWNvcmRpbmdcclxuICAgICAgICB0aGlzLmxvZyhgQmFzc0l0ZW1VSSA6IHBsYXkgbm90ZSAke3RoaXMubm90ZX1gKTtcclxuICAgICAgICB0aGlzLl9vblBsYXllZE5vdGVDYWxsYmFja3MuZm9yRWFjaChvblBsYXlOb3RlID0+IHtcclxuICAgICAgICAgICAgb25QbGF5Tm90ZS5jYWxsKHRoaXMsIHRoaXMuZ2V0SW5zdHJ1bWVudCgpLCB0aGlzLm5vdGUpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvbkNsaWNrQ2FsbGJhY2soKSB7XHJcbiAgICAgICAgLy8gcmVsYXkgdG93YXJkcyB0aGUgM0QgZW50aXR5IGNvbnRhaW5pbmcgdGhlIHNvdW5kIENvbXBvbmVudFxyXG4gICAgICAgIHRoaXMuc291bmRIdWIub25QbGF5Tm90ZSh0aGlzLmdldEluc3RydW1lbnQoKSwgdGhpcy5ub3RlKTtcclxuICAgICAgICB0aGlzLm5vdGlmeVBsYXlpbmcoKTtcclxuICAgIH1cclxuXHJcbn0iLCJleHBvcnQgY2xhc3MgSW1hZ2VDb250YWluZXIge1xyXG4gICAgX2ltYWdlczoge1trZXk6IHN0cmluZ106IFVJSW1hZ2V9ID0ge307XHJcbiAgICBfY29udGFpbmVyOiBVSUNvbnRhaW5lclJlY3Q7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQ6IFVJU2hhcGUpIHtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBuZXcgVUlDb250YWluZXJSZWN0KHBhcmVudCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgY29udGFpbmVyKCkgIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHJlZ2lzdGVySW1hZ2Uoa2V5OiBzdHJpbmcsIHNvdXJjZTogc3RyaW5nLCBzb3VyY2VXaWR0aDogbnVtYmVyLCBzb3VyY2VIZWlnaHQ6IG51bWJlcikge1xyXG4gICAgICAgIGxldCBpbWFnZSA9IG5ldyBVSUltYWdlKHRoaXMuX2NvbnRhaW5lciwgbmV3IFRleHR1cmUoc291cmNlKSk7XHJcbiAgICAgICAgaW1hZ2Uud2lkdGggPSAnMTAwJSc7XHJcbiAgICAgICAgaW1hZ2UuaGVpZ2h0ID0gJzEwMCUnO1xyXG4gICAgICAgIGltYWdlLnNvdXJjZVdpZHRoID0gc291cmNlV2lkdGg7XHJcbiAgICAgICAgaW1hZ2Uuc291cmNlSGVpZ2h0ID0gc291cmNlSGVpZ2h0O1xyXG4gICAgICAgIGltYWdlLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9pbWFnZXNba2V5XSA9IGltYWdlO1xyXG4gICAgfVxyXG4gICAgcHVibGljIG1ha2VPbmVWaXNpYmxlKGtleTpzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLm1ha2VBbGxJbnZpc2libGUoKTtcclxuICAgICAgICB0aGlzLl9pbWFnZXNba2V5XS52aXNpYmxlID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBtYWtlQWxsSW52aXNpYmxlKCkge1xyXG4gICAgICAgIGZvcihsZXQga2V5IGluIHRoaXMuX2ltYWdlcykge1xyXG4gICAgICAgICAgICB0aGlzLl9pbWFnZXNba2V5XS52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIHJlZ2lzdGVyT25DbGlja0ltYWdlKGtleTogc3RyaW5nLCBjYWxsYmFjazogT25DbGljaykge1xyXG4gICAgICAgIHRoaXMuX2ltYWdlc1trZXldLm9uQ2xpY2sgPSBjYWxsYmFjaztcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBVSUluc3RydW1lbnQgfSBmcm9tIFwiLi9VSUluc3RydW1lbnRcIjtcclxuaW1wb3J0IHsgSW1hZ2VDb250YWluZXIgfSBmcm9tIFwiLi4vaW1hZ2VfY29udGFpbmVyXCI7XHJcbmltcG9ydCB7IElTb3VuZEh1YiB9IGZyb20gXCIuLi9zb3VuZGh1Yi9zb3VuZGh1YlwiO1xyXG5pbXBvcnQgeyBnZXRQaWFub05vdGVzIH0gZnJvbSBcIi4uL2luc3RydW1lbnRzL3BpYW5vXCI7XHJcbmltcG9ydCB7IElOb3RlUHJvcHMgfSBmcm9tIFwiLi4vaW5zdHJ1bWVudHMvSW5zdHJ1bWVudFwiO1xyXG5cclxuY29uc3QgaW5zdHJ1bWVudCA9IFwicGlhbm9cIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQaWFub1VJIGV4dGVuZHMgVUlJbnN0cnVtZW50IHtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihsb2c6IChzdHJpbmcgKT0+IHZvaWQsIHBhcmVudDogVUlTaGFwZSkge1xyXG4gICAgICAgIHN1cGVyKGxvZywgcGFyZW50KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXRTb3VuZEh1Yihzb3VuZEh1YjogSVNvdW5kSHViKSB7XHJcbiAgICAgICAgc3VwZXIuc2V0U291bmRIdWIoc291bmRIdWIpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlTm90ZXMoc291bmRIdWIsIGdldFBpYW5vTm90ZXMoKSk7XHJcbiAgICB9XHJcbiAgICBjcmVhdGVOb3Rlcyhzb3VuZEh1YjogSVNvdW5kSHViLCBub3RlUHJvcHM6IElOb3RlUHJvcHNbXSkge1xyXG4gICAgICAgIGxldCBvZmZzZXRYID0gMTkuNTtcclxuICAgICAgICBsZXQgcG9zWCA9IC0zMDA7XHJcbiAgICAgICAgbGV0IHBvc1kgPSAnMjAlJztcclxuICAgICAgICBsZXQgYmxhY2tLZXlzID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgbm90ZVByb3Agb2Ygbm90ZVByb3BzKSB7XHJcbiAgICAgICAgICAgIGxldCBub3RlVHlwZSA9IG5vdGVQcm9wLmV4dHJhc1sndHlwZSddIGFzIHN0cmluZztcclxuICAgICAgICAgICAgaWYgKG5vdGVUeXBlID09PSBcIldISVRFXCIpIHtcclxuICAgICAgICAgICAgICAgIGxldCBpbWFnZUNvbnRhaW5lciA9IG5ldyBJbWFnZUNvbnRhaW5lcih0aGlzLmNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgICAgICBpbWFnZUNvbnRhaW5lci5jb250YWluZXIoKS53aWR0aCA9IG9mZnNldFgtMC44O1xyXG4gICAgICAgICAgICAgICAgaW1hZ2VDb250YWluZXIuY29udGFpbmVyKCkucG9zaXRpb25YID0gcG9zWDtcclxuICAgICAgICAgICAgICAgIGltYWdlQ29udGFpbmVyLmNvbnRhaW5lcigpLnBvc2l0aW9uWSA9IHBvc1k7XHJcbiAgICAgICAgICAgICAgICAvLyBTcGVjaWZpYyB0byB3aGl0ZSBrZXlcclxuICAgICAgICAgICAgICAgIGltYWdlQ29udGFpbmVyLnJlZ2lzdGVySW1hZ2UoJ3JlbGVhc2VkJywgXCJpbWFnZXMvd2hpdGVfa2V5LnBuZ1wiLCAyMywgMTE3KTtcclxuICAgICAgICAgICAgICAgIGltYWdlQ29udGFpbmVyLnJlZ2lzdGVySW1hZ2UoJ3ByZXNzZWQnLCBcImltYWdlcy9ncmVlbl9rZXkucG5nXCIsIDI0LCAxMTcpO1xyXG4gICAgICAgICAgICAgICAgaW1hZ2VDb250YWluZXIuY29udGFpbmVyKCkuaGVpZ2h0ID0gJzEwMCUnO1xyXG4gICAgICAgICAgICAgICAgcG9zWCArPSBvZmZzZXRYO1xyXG4gICAgICAgICAgICAgICAgLy8gRW5kIHNwZWNpZmljXHJcbiAgICAgICAgICAgICAgICBpbWFnZUNvbnRhaW5lci5yZWdpc3Rlck9uQ2xpY2tJbWFnZSgncmVsZWFzZWQnLCBuZXcgT25DbGljayhldmVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2coYFBpYW5vVUkgOiBQcmVzcyBvbiBrZXkgJHtub3RlUHJvcC5ub3RlfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25DbGlja0NhbGxiYWNrKG5vdGVQcm9wLm5vdGUpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgaW1hZ2VDb250YWluZXIubWFrZU9uZVZpc2libGUoJ3JlbGVhc2VkJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobm90ZVR5cGUgPT09IFwiQkxBQ0tcIikge1xyXG4gICAgICAgICAgICAgICAgLy8gRGlmZmVyIHRoZSBibGFjayBrZXlzIHRvIGdldCB0aGVtIG9uIHRvcCBvZiB3aGl0ZSBvbmVzXHJcbiAgICAgICAgICAgICAgICBibGFja0tleXMucHVzaCh7a2V5Om5vdGVQcm9wLm5vdGUsIHBvc1g6cG9zWCAtIDAuNSpvZmZzZXRYfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChsZXQgYmxhY2tLZXkgb2YgYmxhY2tLZXlzKSB7XHJcbiAgICAgICAgICAgIGxldCBpbWFnZUNvbnRhaW5lciA9IG5ldyBJbWFnZUNvbnRhaW5lcih0aGlzLmNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIGltYWdlQ29udGFpbmVyLmNvbnRhaW5lcigpLndpZHRoID0gb2Zmc2V0WC0xLjA7XHJcbiAgICAgICAgICAgIGltYWdlQ29udGFpbmVyLmNvbnRhaW5lcigpLnBvc2l0aW9uWCA9IGJsYWNrS2V5LnBvc1g7XHJcbiAgICAgICAgICAgIGltYWdlQ29udGFpbmVyLmNvbnRhaW5lcigpLnBvc2l0aW9uWSA9IHBvc1k7XHJcbiAgICAgICAgICAgIC8vIFNwZWNpZmljIHRvIGJsYWNrIGtleVxyXG4gICAgICAgICAgICBpbWFnZUNvbnRhaW5lci5yZWdpc3RlckltYWdlKCdyZWxlYXNlZCcsIFwiaW1hZ2VzL2JsYWNrX2tleS5wbmdcIiwgMjQsIDExNyk7XHJcbiAgICAgICAgICAgIGltYWdlQ29udGFpbmVyLnJlZ2lzdGVySW1hZ2UoJ3ByZXNzZWQnLCBcImltYWdlcy9ibGFja19rZXlfcHJlc3NlZC5wbmdcIiwgMjQsIDExNyk7XHJcbiAgICAgICAgICAgIGltYWdlQ29udGFpbmVyLmNvbnRhaW5lcigpLmhlaWdodCA9ICc3NSUnO1xyXG4gICAgICAgICAgICAvLyBFbmQgc3BlY2lmaWNcclxuICAgICAgICAgICAgaW1hZ2VDb250YWluZXIucmVnaXN0ZXJPbkNsaWNrSW1hZ2UoJ3JlbGVhc2VkJywgbmV3IE9uQ2xpY2soZXZlbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2coYFBpYW5vVUkgOiBQcmVzcyBvbiBrZXkgJHtibGFja0tleS5rZXl9YCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uQ2xpY2tDYWxsYmFjayhibGFja0tleS5rZXkpO1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIGltYWdlQ29udGFpbmVyLm1ha2VPbmVWaXNpYmxlKCdyZWxlYXNlZCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldEluc3RydW1lbnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIGluc3RydW1lbnQ7XHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IHsgSW1hZ2VDb250YWluZXIgfSBmcm9tIFwiLi4vaW1hZ2VfY29udGFpbmVyXCI7XHJcblxyXG5jb25zdCBpbmRpY2F0b3JQb3NpdGlvblggPSBbJy00NyUnLCAnLTQwLjUlJywgJy0zNC41JScsICctMjguMiUnLCAnLTIyLjElJywgJy0xNS45JScsICctOS43JScsICctMy40JScsICczLjMlJywgJzkuNiUnLCAnMTUuOCUnLCAnMjIuMCUnLCAnMjguMiUnLCAnMzQuNSUnLCAnNDAuNSUnLCAnNDclJ107XHJcblxyXG5leHBvcnQgY2xhc3MgVGVtcG9VSSB7XHJcbiAgICBjb250YWluZXI6IFVJQ29udGFpbmVyUmVjdDtcclxuICAgIGltYWdlOiBVSUltYWdlO1xyXG4gICAgaW1nX3BsYXk6IFVJSW1hZ2U7XHJcbiAgICBpbWdfcGF1c2U6IFVJSW1hZ2U7XHJcbiAgICBwbGF5X3BhdXNlOiBJbWFnZUNvbnRhaW5lcjtcclxuICAgIGltZ19zdG9wOiBVSUltYWdlO1xyXG4gICAgaW5kaWNhdG9yOiBVSUltYWdlO1xyXG4gICAgbG9nOiAoc3RyaW5nICk9PiB2b2lkO1xyXG4gICAgY29uc3RydWN0b3IobG9nOiAoc3RyaW5nICk9PiB2b2lkLCBwYXJlbnQ6IFVJU2hhcGUpIHtcclxuICAgICAgICB0aGlzLmxvZyA9IGxvZztcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IG5ldyBVSUNvbnRhaW5lclJlY3QocGFyZW50KTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci53aWR0aCA9IDEwMDtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5oZWlnaHQgPSAzNjtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5oQWxpZ24gPSAnY2VudGVyJztcclxuICAgICAgICAvLyB0aGlzLmNvbnRhaW5lci52QWxpZ24gPSAndG9wJztcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5wb3NpdGlvblkgPSAnMzglJztcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5pc1BvaW50ZXJCbG9ja2VyID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci52aXNpYmxlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgbGV0IGltYWdlVGV4dHVyZSA9IG5ldyBUZXh0dXJlKCdpbWFnZXMvYmVhdF9pbmRpY2F0b3JfYmFja2dyb3VuZC5wbmcnKTtcclxuICAgICAgICB0aGlzLmltYWdlID0gbmV3IFVJSW1hZ2UodGhpcy5jb250YWluZXIsIGltYWdlVGV4dHVyZSk7XHJcbiAgICAgICAgdGhpcy5pbWFnZS5wb3NpdGlvblggPSAzMjtcclxuICAgICAgICB0aGlzLmltYWdlLnBvc2l0aW9uWSA9ICcwJSc7XHJcbiAgICAgICAgdGhpcy5pbWFnZS5zb3VyY2VXaWR0aCA9IDMzNDU7XHJcbiAgICAgICAgdGhpcy5pbWFnZS5zb3VyY2VIZWlnaHQgPSAxNzI7XHJcbiAgICAgICAgdGhpcy5pbWFnZS53aWR0aCA9IDI0MDtcclxuICAgICAgICB0aGlzLmltYWdlLmhlaWdodCA9IDI0O1xyXG4gICAgICAgIHRoaXMuaW1hZ2Uub25DbGljayA9IG5ldyBPbkNsaWNrKGV2ZW50ID0+IHt0aGlzLmxvZyhcIm9uQ2xpY2sgQmFja2dyb3VuZCBSZWNvcmRlclwiKTt9KTtcclxuICAgICAgICAvLyB0aGlzLmltYWdlLmlzUG9pbnRlckJsb2NrZXIgPSB0cnVlO1xyXG5cclxuICAgICAgICBsZXQgaW5kaWNhdG9yVGV4dHVyZSA9IG5ldyBUZXh0dXJlKCdpbWFnZXMvYmVhdF9pbmRpY2F0b3JfbGFtcG9uLnBuZycpO1xyXG4gICAgICAgIHRoaXMuaW5kaWNhdG9yID0gbmV3IFVJSW1hZ2UodGhpcy5pbWFnZSwgaW5kaWNhdG9yVGV4dHVyZSk7XHJcbiAgICAgICAgLy8gdGhpcy5pbmRpY2F0b3IudkFsaWduID0gJ2NlbnRlcic7XHJcbiAgICAgICAgLy8gdGhpcy5pbmRpY2F0b3IucG9zaXRpb25YID0gJy00NyUnO1xyXG4gICAgICAgIHRoaXMuaW5kaWNhdG9yLnBvc2l0aW9uWCA9IGluZGljYXRvclBvc2l0aW9uWFswXTtcclxuICAgICAgICB0aGlzLmluZGljYXRvci5wb3NpdGlvblkgPSAnMCUnO1xyXG4gICAgICAgIHRoaXMuaW5kaWNhdG9yLnNvdXJjZVdpZHRoID0gMjEyO1xyXG4gICAgICAgIHRoaXMuaW5kaWNhdG9yLnNvdXJjZUhlaWdodCA9IDE3MjtcclxuICAgICAgICB0aGlzLmluZGljYXRvci53aWR0aCA9IGA2JWA7XHJcbiAgICAgICAgdGhpcy5pbmRpY2F0b3IuaGVpZ2h0ID0gYDEwMCVgO1xyXG4gICAgICAgIC8vIHRoaXMuaW5kaWNhdG9yLmlzUG9pbnRlckJsb2NrZXIgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuaW5kaWNhdG9yLnZpc2libGUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdGhpcy5wbGF5X3BhdXNlID0gbmV3IEltYWdlQ29udGFpbmVyKHRoaXMuY29udGFpbmVyKTtcclxuICAgICAgICB0aGlzLnBsYXlfcGF1c2UuY29udGFpbmVyKCkucG9zaXRpb25YID0gLTc4O1xyXG4gICAgICAgIHRoaXMucGxheV9wYXVzZS5jb250YWluZXIoKS5wb3NpdGlvblkgPSAnMCUnO1xyXG4gICAgICAgIHRoaXMucGxheV9wYXVzZS5jb250YWluZXIoKS53aWR0aCA9IDMyO1xyXG4gICAgICAgIHRoaXMucGxheV9wYXVzZS5jb250YWluZXIoKS5oZWlnaHQgPSAzMjtcclxuICAgICAgICB0aGlzLnBsYXlfcGF1c2UucmVnaXN0ZXJJbWFnZSgncGxheScsICdpbWFnZXMvcGxheV9zaWx2ZXIucG5nJywgNDA0LCA0MDMpO1xyXG4gICAgICAgIHRoaXMucGxheV9wYXVzZS5yZWdpc3Rlck9uQ2xpY2tJbWFnZSgncGxheScsIG5ldyBPbkNsaWNrKGV2ZW50ID0+IHtcclxuICAgICAgICAgICAgdGhpcy5sb2coJ29uY2xpY2sgUGxheScpO1xyXG4gICAgICAgICAgICB0aGlzLnBsYXlfcGF1c2UubWFrZU9uZVZpc2libGUoJ3BhdXNlJyk7XHJcbiAgICAgICAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXIodHJ1ZSwgZmFsc2UpO1xyXG4gICAgICAgIH0pKTtcclxuICAgICAgICB0aGlzLnBsYXlfcGF1c2UucmVnaXN0ZXJJbWFnZSgncGF1c2UnLCAnaW1hZ2VzL3BhdXNlX3NpbHZlci5wbmcnLCA0MDMsIDQwMik7XHJcbiAgICAgICAgdGhpcy5wbGF5X3BhdXNlLnJlZ2lzdGVyT25DbGlja0ltYWdlKCdwYXVzZScsIG5ldyBPbkNsaWNrKGV2ZW50ID0+IHtcclxuICAgICAgICAgICAgdGhpcy5sb2coJ29uY2xpY2sgUGF1c2UnKTtcclxuICAgICAgICAgICAgdGhpcy5wbGF5X3BhdXNlLm1ha2VPbmVWaXNpYmxlKCdwbGF5Jyk7XHJcbiAgICAgICAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXIoZmFsc2UsIHRydWUpO1xyXG4gICAgICAgIH0pKTtcclxuICAgICAgICB0aGlzLnBsYXlfcGF1c2UubWFrZU9uZVZpc2libGUoJ3BsYXknKTtcclxuXHJcblxyXG4gICAgICAgIC8vIHRoaXMuaW1nX3BsYXkgPSBuZXcgVUlJbWFnZSh0aGlzLmNvbnRhaW5lciwgbmV3IFRleHR1cmUoJ2ltYWdlcy9wbGF5X3NpbHZlci5wbmcnKSk7XHJcbiAgICAgICAgLy8gdGhpcy5pbWdfcGxheS5wb3NpdGlvblggPSAtNzg7XHJcbiAgICAgICAgLy8gdGhpcy5pbWdfcGxheS5wb3NpdGlvblkgPSAnMCUnO1xyXG4gICAgICAgIC8vIHRoaXMuaW1nX3BsYXkuc291cmNlV2lkdGggPSA0MDQ7XHJcbiAgICAgICAgLy8gdGhpcy5pbWdfcGxheS5zb3VyY2VIZWlnaHQgPSA0MDM7XHJcbiAgICAgICAgLy8gdGhpcy5pbWdfcGxheS53aWR0aCA9IDMyO1xyXG4gICAgICAgIC8vIHRoaXMuaW1nX3BsYXkuaGVpZ2h0ID0gMzI7XHJcbiAgICAgICAgLy8gLy8gdGhpcy5pbWdfcGxheS5pc1BvaW50ZXJCbG9ja2VyID0gdHJ1ZTtcclxuICAgICAgICAvLyB0aGlzLmltZ19wbGF5LnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgIC8vIHRoaXMuaW1nX3BsYXkub25DbGljayA9IG5ldyBPbkNsaWNrKGV2ZW50ID0+IHtcclxuICAgICAgICAvLyAgICAgdGhpcy5sb2coJ29uY2xpY2sgUGxheScpO1xyXG4gICAgICAgIC8vICAgICB0aGlzLnN3YXBQbGF5UGF1c2UodHJ1ZSk7XHJcbiAgICAgICAgLy8gICAgIHRoaXMubm90aWZ5TGlzdGVuZXIodHJ1ZSwgZmFsc2UpO1xyXG4gICAgICAgIC8vIH0pO1xyXG5cclxuXHJcbiAgICAgICAgLy8gdGhpcy5pbWdfcGF1c2UgPSBuZXcgVUlJbWFnZSh0aGlzLmNvbnRhaW5lciwgbmV3IFRleHR1cmUoJ2ltYWdlcy9wYXVzZV9zaWx2ZXIucG5nJykpO1xyXG4gICAgICAgIC8vIHRoaXMuaW1nX3BhdXNlLnBvc2l0aW9uWCA9IC03ODtcclxuICAgICAgICAvLyB0aGlzLmltZ19wYXVzZS5wb3NpdGlvblkgPSAnMCUnO1xyXG4gICAgICAgIC8vIHRoaXMuaW1nX3BhdXNlLnNvdXJjZVdpZHRoID0gNDAzO1xyXG4gICAgICAgIC8vIHRoaXMuaW1nX3BhdXNlLnNvdXJjZUhlaWdodCA9IDQwMjtcclxuICAgICAgICAvLyB0aGlzLmltZ19wYXVzZS53aWR0aCA9IDMyO1xyXG4gICAgICAgIC8vIHRoaXMuaW1nX3BhdXNlLmhlaWdodCA9IDMyO1xyXG4gICAgICAgIC8vIC8vIHRoaXMuaW1nX3BhdXNlLmlzUG9pbnRlckJsb2NrZXIgPSB0cnVlO1xyXG4gICAgICAgIC8vIHRoaXMuaW1nX3BhdXNlLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAvLyB0aGlzLmltZ19wYXVzZS5vbkNsaWNrID0gbmV3IE9uQ2xpY2soZXZlbnQgPT4ge1xyXG4gICAgICAgIC8vICAgICB0aGlzLmxvZygnb25jbGljayBQYXVzZScpO1xyXG4gICAgICAgIC8vICAgICB0aGlzLnN3YXBQbGF5UGF1c2UoZmFsc2UpO1xyXG4gICAgICAgIC8vICAgICB0aGlzLm5vdGlmeUxpc3RlbmVyKGZhbHNlLCB0cnVlKTtcclxuICAgICAgICAvLyB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5pbWdfc3RvcCA9IG5ldyBVSUltYWdlKHRoaXMuY29udGFpbmVyLCBuZXcgVGV4dHVyZSgnaW1hZ2VzL3N0b3Bfc2lsdmVyLnBuZycpKTtcclxuICAgICAgICB0aGlzLmltZ19zdG9wLnBvc2l0aW9uWCA9IC00MjtcclxuICAgICAgICB0aGlzLmltZ19zdG9wLnBvc2l0aW9uWSA9ICcwJSc7XHJcbiAgICAgICAgdGhpcy5pbWdfc3RvcC5zb3VyY2VXaWR0aCA9IDQwNjtcclxuICAgICAgICB0aGlzLmltZ19zdG9wLnNvdXJjZUhlaWdodCA9IDQwNDtcclxuICAgICAgICB0aGlzLmltZ19zdG9wLndpZHRoID0gMzI7XHJcbiAgICAgICAgdGhpcy5pbWdfc3RvcC5oZWlnaHQgPSAzMjtcclxuICAgICAgICAvLyB0aGlzLmltZ19zdG9wLmlzUG9pbnRlckJsb2NrZXIgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuaW1nX3N0b3Aub25DbGljayA9IG5ldyBPbkNsaWNrKGV2ZW50ID0+IHtcclxuICAgICAgICAgICAgdGhpcy5sb2coJ29uY2xpY2sgU3RvcCcpO1xyXG4gICAgICAgICAgICB0aGlzLnBsYXlfcGF1c2UubWFrZU9uZVZpc2libGUoJ3BsYXknKTtcclxuICAgICAgICAgICAgdGhpcy5ub3RpZnlMaXN0ZW5lcihmYWxzZSwgZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0UG9zaXRpb24ocG9zWCwgcG9zWSkge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnBvc2l0aW9uWCA9IHBvc1g7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIucG9zaXRpb25ZID0gcG9zWTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0QmVhdChiZWF0OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLmluZGljYXRvci52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKCFpc05hTihiZWF0KSAmJiAoYmVhdCA+IDApICYmICAoYmVhdCA8PSBpbmRpY2F0b3JQb3NpdGlvblgubGVuZ3RoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmluZGljYXRvci5wb3NpdGlvblggPSBpbmRpY2F0b3JQb3NpdGlvblhbYmVhdC0xXTtcclxuICAgICAgICAgICAgdGhpcy5pbmRpY2F0b3IudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5sb2coXCJJTlZBTElEIFJFUVVFU1QgYmVhdD1cIiArIGJlYXQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfY2FsbGJhY2tTdGFydFRlbXBvO1xyXG4gICAgcHVibGljIHJlZ2lzdGVyT25UZW1wb0NoYW5nZWQoY2FsbGJhY2s6IChpc1N0YXJ0ZWQ6Ym9vbGVhbiwgaXNGcm96ZW46Ym9vbGVhbik9PnZvaWQpIHtcclxuICAgICAgICB0aGlzLl9jYWxsYmFja1N0YXJ0VGVtcG8gPSBjYWxsYmFjaztcclxuICAgIH1cclxuXHJcbiAgICBub3RpZnlMaXN0ZW5lcihpc1N0YXJ0ZWQ6Ym9vbGVhbiwgaXNGcm96ZW46Ym9vbGVhbikge1xyXG4gICAgICAgIGlmICh0aGlzLl9jYWxsYmFja1N0YXJ0VGVtcG8pIHRoaXMuX2NhbGxiYWNrU3RhcnRUZW1wbyhpc1N0YXJ0ZWQsIGlzRnJvemVuKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBzd2FwUGxheVBhdXNlKGlzRnJvemVuOiBib29sZWFuKSB7XHJcbiAgICAvLyAgICAgdGhpcy5pbWdfcGF1c2UudmlzaWJsZSA9IGlzRnJvemVuO1xyXG4gICAgLy8gICAgIHRoaXMuaW1nX3BsYXkudmlzaWJsZSA9ICFpc0Zyb3plbjtcclxuICAgIC8vIH1cclxuXHJcblxyXG59IiwiZXhwb3J0IGludGVyZmFjZSBJVGltZXJDb21wb25lbnR7XHJcbiAgICBlbGFwc2VkVGltZTogbnVtYmVyXHJcbiAgICB0YXJnZXRUaW1lOiBudW1iZXJcclxuICAgIG9uVGFyZ2V0VGltZVJlYWNoZWQ6IChvd25lckVudGl0eTogSUVudGl0eSkgPT4gdm9pZCBcclxufVxyXG4iLCJpbXBvcnQgeyBJVGltZXJDb21wb25lbnQgfSBmcm9tIFwiLi9pdGltZXJjb21wb25lbnRcIjtcclxuaW1wb3J0IHsgVGltZXJTeXN0ZW0gfSBmcm9tIFwiLi4vc3lzdGVtL3RpbWVyU3lzdGVtXCI7XHJcblxyXG4vKipcclxuICogRXhlY3V0ZSBvbmNlIGFmdGVyIFggbWlsbGlzZWNvbmRzXHJcbiAqL1xyXG5AQ29tcG9uZW50KFwidGltZXJEZWxheVwiKVxyXG5leHBvcnQgY2xhc3MgRGVsYXkgaW1wbGVtZW50cyBJVGltZXJDb21wb25lbnR7XHJcbiAgICBlbGFwc2VkVGltZTogbnVtYmVyO1xyXG4gICAgdGFyZ2V0VGltZTogbnVtYmVyO1xyXG4gICAgb25UYXJnZXRUaW1lUmVhY2hlZDogKG93bmVyRW50aXR5OiBJRW50aXR5KSA9PiB2b2lkO1xyXG5cclxuICAgIHByaXZhdGUgb25UaW1lUmVhY2hlZENhbGxiYWNrPzogKCk9PiB2b2lkXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gbWlsbGlzZWNzIGFtb3VudCBvZiB0aW1lIGluIG1pbGxpc2Vjb25kc1xyXG4gICAgICogQHBhcmFtIG9uVGltZVJlYWNoZWRDYWxsYmFjayBjYWxsYmFjayBmb3Igd2hlbiB0aW1lIGlzIHJlYWNoZWRcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IobWlsbGlzZWNzOiBudW1iZXIsIG9uVGltZVJlYWNoZWRDYWxsYmFjaz86ICgpPT4gdm9pZCl7XHJcbiAgICAgICAgVGltZXJTeXN0ZW0uY3JlYXRlQW5kQWRkVG9FbmdpbmUoKVxyXG5cclxuICAgICAgICB0aGlzLmVsYXBzZWRUaW1lID0gMFxyXG4gICAgICAgIHRoaXMudGFyZ2V0VGltZSA9IG1pbGxpc2VjcyAvIDEwMDBcclxuICAgICAgICB0aGlzLm9uVGltZVJlYWNoZWRDYWxsYmFjayA9IG9uVGltZVJlYWNoZWRDYWxsYmFja1xyXG4gICAgICAgIHRoaXMub25UYXJnZXRUaW1lUmVhY2hlZCA9IChlbnRpdHkpPT57XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9uVGltZVJlYWNoZWRDYWxsYmFjaykgdGhpcy5vblRpbWVSZWFjaGVkQ2FsbGJhY2soKVxyXG4gICAgICAgICAgICBlbnRpdHkucmVtb3ZlQ29tcG9uZW50KHRoaXMpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldENhbGxiYWNrKG9uVGltZVJlYWNoZWRDYWxsYmFjazogKCk9PiB2b2lkKXtcclxuICAgICAgICB0aGlzLm9uVGltZVJlYWNoZWRDYWxsYmFjayA9IG9uVGltZVJlYWNoZWRDYWxsYmFja1xyXG4gICAgfVxyXG5cclxufVxyXG4iLCJpbXBvcnQgeyBJVGltZXJDb21wb25lbnQgfSBmcm9tIFwiLi9pdGltZXJjb21wb25lbnRcIjtcclxuaW1wb3J0IHsgVGltZXJTeXN0ZW0gfSBmcm9tIFwiLi4vc3lzdGVtL3RpbWVyU3lzdGVtXCI7XHJcblxyXG4vKipcclxuICogUmVtb3ZlIGVudGl0eSBhZnRlciBYIG1pbGxpc2Vjb25kc1xyXG4gKi9cclxuQENvbXBvbmVudChcInRpbWVyRXhwaXJlSW5cIilcclxuZXhwb3J0IGNsYXNzIEV4cGlyZUluIGltcGxlbWVudHMgSVRpbWVyQ29tcG9uZW50e1xyXG4gICAgZWxhcHNlZFRpbWU6IG51bWJlcjtcclxuICAgIHRhcmdldFRpbWU6IG51bWJlcjtcclxuICAgIG9uVGFyZ2V0VGltZVJlYWNoZWQ6IChvd25lckVudGl0eTogSUVudGl0eSkgPT4gdm9pZDtcclxuXHJcbiAgICBwcml2YXRlIG9uVGltZVJlYWNoZWRDYWxsYmFjaz86ICgpPT4gdm9pZFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIG1pbGxpc2VjcyBhbW91bnQgb2YgdGltZSBpbiBtaWxsaXNlY29uZHNcclxuICAgICAqIEBwYXJhbSBvblRpbWVSZWFjaGVkQ2FsbGJhY2sgY2FsbGJhY2sgZm9yIHdoZW4gdGltZSBpcyByZWFjaGVkXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG1pbGxpc2VjczogbnVtYmVyLCBvblRpbWVSZWFjaGVkQ2FsbGJhY2s/OiAoKT0+IHZvaWQpe1xyXG4gICAgICAgIFRpbWVyU3lzdGVtLmNyZWF0ZUFuZEFkZFRvRW5naW5lKClcclxuXHJcbiAgICAgICAgdGhpcy5lbGFwc2VkVGltZSA9IDBcclxuICAgICAgICB0aGlzLnRhcmdldFRpbWUgPSBtaWxsaXNlY3MgLyAxMDAwXHJcbiAgICAgICAgdGhpcy5vblRpbWVSZWFjaGVkQ2FsbGJhY2sgPSBvblRpbWVSZWFjaGVkQ2FsbGJhY2tcclxuICAgICAgICB0aGlzLm9uVGFyZ2V0VGltZVJlYWNoZWQgPSAoZW50aXR5KT0+e1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vblRpbWVSZWFjaGVkQ2FsbGJhY2spIHRoaXMub25UaW1lUmVhY2hlZENhbGxiYWNrKClcclxuICAgICAgICAgICAgZW50aXR5LnJlbW92ZUNvbXBvbmVudCh0aGlzKVxyXG4gICAgICAgICAgICBlbmdpbmUucmVtb3ZlRW50aXR5KGVudGl0eSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Q2FsbGJhY2sob25UaW1lUmVhY2hlZENhbGxiYWNrOiAoKT0+IHZvaWQpe1xyXG4gICAgICAgIHRoaXMub25UaW1lUmVhY2hlZENhbGxiYWNrID0gb25UaW1lUmVhY2hlZENhbGxiYWNrXHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IHsgSVRpbWVyQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudC9pdGltZXJjb21wb25lbnRcIjtcclxuaW1wb3J0IHsgSW50ZXJ2YWwgfSBmcm9tIFwiLi4vY29tcG9uZW50L2ludGVydmFsXCI7XHJcbmltcG9ydCB7IERlbGF5IH0gZnJvbSBcIi4uL2NvbXBvbmVudC9kZWxheVwiO1xyXG5pbXBvcnQgeyBFeHBpcmVJbiB9IGZyb20gXCIuLi9jb21wb25lbnQvZXhwaXJlXCI7XHJcblxyXG5leHBvcnQgIGNsYXNzIFRpbWVyU3lzdGVtIGltcGxlbWVudHMgSVN5c3RlbSB7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBfaW5zdGFuY2U6IFRpbWVyU3lzdGVtIHwgbnVsbCA9IG51bGxcclxuXHJcbiAgICBwcml2YXRlIF9jb21wb25lbnRzOiBDb21wb25lbnRDb25zdHJ1Y3RvcjxJVGltZXJDb21wb25lbnQ+W10gPSBbXVxyXG5cclxuICAgIHN0YXRpYyBjcmVhdGVBbmRBZGRUb0VuZ2luZSgpOiBUaW1lclN5c3RlbXtcclxuICAgICAgICBpZiAodGhpcy5faW5zdGFuY2UgPT0gbnVsbCl7XHJcbiAgICAgICAgICAgIHRoaXMuX2luc3RhbmNlID0gbmV3IFRpbWVyU3lzdGVtKClcclxuICAgICAgICAgICAgZW5naW5lLmFkZFN5c3RlbSh0aGlzLl9pbnN0YW5jZSlcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2luc3RhbmNlXHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHJlZ2lzdGVyQ3VzdG9tQ29tcG9uZW50PFQgZXh0ZW5kcyBJVGltZXJDb21wb25lbnQ+KGNvbXBvbmVudDogQ29tcG9uZW50Q29uc3RydWN0b3I8VD4pe1xyXG4gICAgICAgIHRoaXMuY3JlYXRlQW5kQWRkVG9FbmdpbmUoKS5fY29tcG9uZW50cy5wdXNoKGNvbXBvbmVudClcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHJpdmF0ZSBjb25zdHJ1Y3Rvcigpe1xyXG4gICAgICAgIFRpbWVyU3lzdGVtLl9pbnN0YW5jZSA9IHRoaXNcclxuICAgICAgICB0aGlzLl9jb21wb25lbnRzLnB1c2goSW50ZXJ2YWwpXHJcbiAgICAgICAgdGhpcy5fY29tcG9uZW50cy5wdXNoKERlbGF5KVxyXG4gICAgICAgIHRoaXMuX2NvbXBvbmVudHMucHVzaChFeHBpcmVJbilcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoZHQ6IG51bWJlcil7XHJcbiAgICAgICAgdGhpcy5fY29tcG9uZW50cy5mb3JFYWNoKGNvbXBvbmVudCA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29tcG9uZW50KGR0LCBjb21wb25lbnQpICAgIFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlQ29tcG9uZW50PFQgZXh0ZW5kcyBJVGltZXJDb21wb25lbnQ+KGR0OiBudW1iZXIsIGNvbXBvbmVudDogQ29tcG9uZW50Q29uc3RydWN0b3I8VD4pe1xyXG4gICAgICAgIGxldCByZWNvcmQgPSBlbmdpbmUuZ2V0RW50aXRpZXNXaXRoQ29tcG9uZW50KGNvbXBvbmVudClcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcmVjb3JkKSB7XHJcbiAgICAgICAgICAgIGlmIChyZWNvcmQuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGVudGl0eSA9IHJlY29yZFtrZXldO1xyXG4gICAgICAgICAgICAgICAgbGV0IHRpbWVyQ29tcG9uZW50ID0gZW50aXR5LmdldENvbXBvbmVudChjb21wb25lbnQpXHJcblxyXG4gICAgICAgICAgICAgICAgdGltZXJDb21wb25lbnQuZWxhcHNlZFRpbWUgKz0gZHRcclxuICAgICAgICAgICAgICAgIGlmICh0aW1lckNvbXBvbmVudC5lbGFwc2VkVGltZSA+PSB0aW1lckNvbXBvbmVudC50YXJnZXRUaW1lKXtcclxuICAgICAgICAgICAgICAgICAgICB0aW1lckNvbXBvbmVudC5vblRhcmdldFRpbWVSZWFjaGVkKGVudGl0eSlcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBJVGltZXJDb21wb25lbnQgfSBmcm9tIFwiLi9pdGltZXJjb21wb25lbnRcIjtcclxuaW1wb3J0IHsgVGltZXJTeXN0ZW0gfSBmcm9tIFwiLi4vc3lzdGVtL3RpbWVyU3lzdGVtXCI7XHJcblxyXG4vKipcclxuICogRXhlY3V0ZSBldmVyeSBYIG1pbGxpc2Vjb25kc1xyXG4gKi9cclxuQENvbXBvbmVudChcInRpbWVySW50ZXJ2YWxcIilcclxuZXhwb3J0IGNsYXNzIEludGVydmFsIGltcGxlbWVudHMgSVRpbWVyQ29tcG9uZW50e1xyXG4gICAgZWxhcHNlZFRpbWU6IG51bWJlcjtcclxuICAgIHRhcmdldFRpbWU6IG51bWJlcjtcclxuICAgIG9uVGFyZ2V0VGltZVJlYWNoZWQ6IChvd25lckVudGl0eTogSUVudGl0eSkgPT4gdm9pZDtcclxuXHJcbiAgICBwcml2YXRlIG9uVGltZVJlYWNoZWRDYWxsYmFjaz86ICgpPT4gdm9pZFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIG1pbGxpc2VjcyBhbW91bnQgb2YgdGltZSBpbiBtaWxsaXNlY29uZHNcclxuICAgICAqIEBwYXJhbSBvblRpbWVSZWFjaGVkQ2FsbGJhY2sgY2FsbGJhY2sgZm9yIHdoZW4gdGltZSBpcyByZWFjaGVkXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG1pbGxpc2VjczogbnVtYmVyLCBvblRpbWVSZWFjaGVkQ2FsbGJhY2s/OiAoKT0+IHZvaWQpe1xyXG4gICAgICAgIFRpbWVyU3lzdGVtLmNyZWF0ZUFuZEFkZFRvRW5naW5lKClcclxuXHJcbiAgICAgICAgdGhpcy5lbGFwc2VkVGltZSA9IDBcclxuICAgICAgICB0aGlzLnRhcmdldFRpbWUgPSBtaWxsaXNlY3MgLyAxMDAwXHJcbiAgICAgICAgdGhpcy5vblRpbWVSZWFjaGVkQ2FsbGJhY2sgPSBvblRpbWVSZWFjaGVkQ2FsbGJhY2tcclxuICAgICAgICB0aGlzLm9uVGFyZ2V0VGltZVJlYWNoZWQgPSAoKT0+e1xyXG4gICAgICAgICAgICB0aGlzLmVsYXBzZWRUaW1lID0gMFxyXG4gICAgICAgICAgICBpZiAodGhpcy5vblRpbWVSZWFjaGVkQ2FsbGJhY2spIHRoaXMub25UaW1lUmVhY2hlZENhbGxiYWNrKClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Q2FsbGJhY2sob25UaW1lUmVhY2hlZENhbGxiYWNrOiAoKT0+IHZvaWQpe1xyXG4gICAgICAgIHRoaXMub25UaW1lUmVhY2hlZENhbGxiYWNrID0gb25UaW1lUmVhY2hlZENhbGxiYWNrXHJcbiAgICB9XHJcblxyXG59XHJcbiIsImltcG9ydCB7IEludGVydmFsIH0gZnJvbSAnLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2RlY2VudHJhbGFuZC1lY3MtdXRpbHMvdGltZXIvY29tcG9uZW50L2ludGVydmFsJztcclxuXHJcbmV4cG9ydCBjbGFzcyBUZW1wbyB7XHJcbiAgICBuYkJhclBlclBocmFzZTtcclxuICAgIG5iQmVhdHNQZXJCYXI7XHJcbiAgICB0ZW1wb0JQTTtcclxuICAgIHRpbWVyRW50aXR5OiBFbnRpdHk7XHJcbiAgICB1cEJlYXRSYXRpbyA9IDEyOyAvLyBjb252ZW5pZW50IGZvciB0ZXJuYXJ5IGFuZCA0LWJlYXQgcnl0aG1lIChpZiB0ZW1wbyAxODAgYnBtLCB0aW1lciBwZXJpb2QgaXMgc2V0IHRvIDI4IG1zZWMpXHJcbiAgICB0aW1lcjtcclxuICAgIHNoYWxsU3RvcEF0RW5kT2ZCYXIgPSBmYWxzZTtcclxuICAgIGN1cnJlbnRUaW1lIDogbnVtYmVyO1xyXG4gICAgaXNTdGFydGVkID0gZmFsc2U7XHJcbiAgICBpc0Zyb3plbiA9IGZhbHNlO1xyXG4gICAgbG9nOiAoc3RyaW5nKSA9PiB2b2lkO1xyXG4gICAgcHJpdmF0ZSBfY2FsbGJhY2tzVXBCZWF0OiAoKGN1cnJlbnRUaW1lOiBudW1iZXIpPT52b2lkKVtdID0gW107XHJcbiAgICBwcml2YXRlIF9jYWxsYmFja3NCZWF0OiAoKGN1cnJlbnRQaHJhc2U6IG51bWJlciwgY3VycmVudEJhcjogbnVtYmVyLCBjdXJyZW50QmVhdDogbnVtYmVyLCBjdXJyZW50QmVhdEluUGhyYXNlOiBudW1iZXIpPT52b2lkKVtdID0gW107XHJcbiAgICBwcml2YXRlIF9jYWxsYmFja3NCYXI6ICgoY3VycmVudFBocmFzZTogbnVtYmVyLCBjdXJyZW50QmFyOiBudW1iZXIpPT52b2lkKVtdID0gW107XHJcblxyXG4gICAgY29uc3RydWN0b3IobG9nOiAoc3RyaW5nKSA9PiB2b2lkLCB0ZW1wb0JQTTogbnVtYmVyLCBuYkJlYXRzUGVyQmFyOiBudW1iZXIsIG5iQmFyUGVyUGhyYXNlOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLmxvZyA9IGxvZztcclxuICAgICAgICB0aGlzLnRlbXBvQlBNID0gdGVtcG9CUE07XHJcbiAgICAgICAgdGhpcy5uYkJlYXRzUGVyQmFyID0gbmJCZWF0c1BlckJhcjtcclxuICAgICAgICB0aGlzLm5iQmFyUGVyUGhyYXNlID0gbmJCYXJQZXJQaHJhc2U7XHJcbiAgICAgICAgdGhpcy50aW1lckVudGl0eSA9IG5ldyBFbnRpdHkoKTtcclxuICAgICAgICBlbmdpbmUuYWRkRW50aXR5KHRoaXMudGltZXJFbnRpdHkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXROb21pbmFsUGVyaW9kTVMoKSB7XHJcbiAgICAgICAgcmV0dXJuIDYwKjEwMDAvdGhpcy50ZW1wb0JQTTtcclxuICAgIH1cclxuXHJcbiAgICByZWluaXQoKSB7XHJcbiAgICAgICAgdGhpcy5zaGFsbFN0b3BBdEVuZE9mQmFyID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50VGltZSA9IDA7XHJcbiAgICAgICAgdGhpcy5pc0Zyb3plbiA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaXNTdGFydGVkID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXJ0KCkge1xyXG4gICAgICAgIC8vIHNhbWUgYXMgcmVzdW1lIHdpdGggcmVpbml0IGJlZm9yZVxyXG4gICAgICAgIHRoaXMucmVpbml0KCk7XHJcbiAgICAgICAgdGhpcy5yZXN1bWUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZnJlZXplKCkge1xyXG4gICAgICAgIC8vIHNhbWUgYXMgc3RvcFxyXG4gICAgICAgIHRoaXMuc3RvcCgpO1xyXG4gICAgICAgIHRoaXMuaXNGcm96ZW4gPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZXN1bWUoKSB7XHJcbiAgICAgICAgdGhpcy5pc0Zyb3plbiA9IGZhbHNlO1xyXG4gICAgICAgIC8vIHNhbWUgYXMgc3RhcnQsIHdpdGhvdXQgcmVpbml0XHJcbiAgICAgICAgdGhpcy50aW1lciA9IG5ldyBJbnRlcnZhbCh0aGlzLmdldE5vbWluYWxQZXJpb2RNUygpL3RoaXMudXBCZWF0UmF0aW8sICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50VGltZSArPSAxO1xyXG4gICAgICAgICAgICB0aGlzLm9uVXBCZWF0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5vblVwQmVhdCgpO1xyXG4gICAgICAgIHRoaXMudGltZXJFbnRpdHkuYWRkQ29tcG9uZW50KHRoaXMudGltZXIpO1xyXG4gICAgICAgIHRoaXMuaXNTdGFydGVkID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RvcCgpIHtcclxuICAgICAgICB0aGlzLnRpbWVyRW50aXR5LnJlbW92ZUNvbXBvbmVudCh0aGlzLnRpbWVyKTtcclxuICAgICAgICB0aGlzLnRpbWVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLmlzRnJvemVuID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pc1N0YXJ0ZWQgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RvcEF0RW5kT2ZCYXIoKSB7XHJcbiAgICAgICAgdGhpcy5zaGFsbFN0b3BBdEVuZE9mQmFyID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0VGVtcG9CUE0oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGVtcG9CUE07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEN1cnJlbnRUaW1lKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRUaW1lO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRDdXJyZW50VXBCZWF0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRUaW1lICUgdGhpcy51cEJlYXRSYXRpbztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0Q3VycmVudEJlYXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IodGhpcy5jdXJyZW50VGltZSAvIHRoaXMudXBCZWF0UmF0aW8pICUgdGhpcy5uYkJlYXRzUGVyQmFyO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRDdXJyZW50QmVhdEluUGhyYXNlKCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKHRoaXMuY3VycmVudFRpbWUgLyB0aGlzLnVwQmVhdFJhdGlvKSAlICh0aGlzLm5iQmVhdHNQZXJCYXIgKiB0aGlzLm5iQmFyUGVyUGhyYXNlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0Q3VycmVudEJhcigpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcih0aGlzLmN1cnJlbnRUaW1lIC8gKHRoaXMudXBCZWF0UmF0aW8gKiB0aGlzLm5iQmVhdHNQZXJCYXIpKSAlIHRoaXMubmJCYXJQZXJQaHJhc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEN1cnJlbnRQaHJhc2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IodGhpcy5jdXJyZW50VGltZSAvICh0aGlzLnVwQmVhdFJhdGlvICogdGhpcy5uYkJlYXRzUGVyQmFyICogdGhpcy5uYkJhclBlclBocmFzZSkpO1xyXG4gICAgfVxyXG5cclxuICAgIDtcclxuICAgIHB1YmxpYyByZWdpc3Rlck9uVXBCZWF0KGNhbGxiYWNrOiAoY3VycmVudFRpbWU6IG51bWJlcik9PnZvaWQpIHtcclxuICAgICAgICB0aGlzLl9jYWxsYmFja3NVcEJlYXQucHVzaChjYWxsYmFjayk7XHJcbiAgICB9XHJcblxyXG4gICAgO1xyXG4gICAgcHVibGljIHJlZ2lzdGVyT25CZWF0KGNhbGxiYWNrOiAoY3VycmVudFBocmFzZTogbnVtYmVyLCBjdXJyZW50QmFyOiBudW1iZXIsIGN1cnJlbnRCZWF0OiBudW1iZXIsIGN1cnJlbnRCZWF0SW5QaHJhc2U6IG51bWJlcik9PnZvaWQpIHtcclxuICAgICAgICB0aGlzLl9jYWxsYmFja3NCZWF0LnB1c2goY2FsbGJhY2spO1xyXG4gICAgfVxyXG5cclxuICAgIDtcclxuICAgIHB1YmxpYyByZWdpc3Rlck9uQmFyKGNhbGxiYWNrOiAoY3VycmVudFBocmFzZTogbnVtYmVyLCBjdXJyZW50QmFyOiBudW1iZXIpPT52b2lkKSB7XHJcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tzQmFyLnB1c2goY2FsbGJhY2spO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25VcEJlYXQoKSB7XHJcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tzVXBCZWF0LmZvckVhY2goY2FsbGJhY2sgPT4ge1xyXG4gICAgICAgICAgICBjYWxsYmFjayh0aGlzLmN1cnJlbnRUaW1lKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAodGhpcy5nZXRDdXJyZW50VXBCZWF0KCkgPT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLl9jYWxsYmFja3NCZWF0LmZvckVhY2goY2FsbGJhY2sgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sodGhpcy5nZXRDdXJyZW50UGhyYXNlKCksIHRoaXMuZ2V0Q3VycmVudEJhcigpLCB0aGlzLmdldEN1cnJlbnRCZWF0KCksIHRoaXMuZ2V0Q3VycmVudEJlYXRJblBocmFzZSgpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdldEN1cnJlbnRCZWF0KCkgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2FsbGJhY2tzQmFyLmZvckVhY2goY2FsbGJhY2sgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHRoaXMuZ2V0Q3VycmVudFBocmFzZSgpLCB0aGlzLmdldEN1cnJlbnRCYXIoKSk7XHJcbiAgICAgICAgICAgICAgICB9KTsgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUZW1wb1Rlc3Qge1xyXG4gICAgbG9nOiAoc3RyaW5nKSA9PiB2b2lkO1xyXG4gICAgdGVtcG87XHJcbiAgICBuYlVwQmVhdGluQmVhdCA9IDA7XHJcbiAgICBjb25zdHJ1Y3Rvcihsb2c6IChzdHJpbmcpID0+IHZvaWQpIHtcclxuICAgICAgICB0aGlzLmxvZyA9IGxvZztcclxuICAgICAgICB0aGlzLnRlbXBvID0gbmV3IFRlbXBvKGxvZywgOTAsIDQsIDQpO1xyXG4gICAgICAgIHRoaXMudGVtcG8ucmVnaXN0ZXJPbkJhcigoY3VycmVudFBocmFzZTogbnVtYmVyLCBjdXJyZW50QmFyOiBudW1iZXIpPT57XHJcbiAgICAgICAgICAgIHRoaXMubG9nKGBvbkJhci0+JHtjdXJyZW50UGhyYXNlfSwke2N1cnJlbnRCYXJ9YCk7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50UGhyYXNlID49IDUpIHRoaXMudGVtcG8uZnJlZXplKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy50ZW1wby5yZWdpc3Rlck9uQmVhdCgoY3VycmVudFBocmFzZTogbnVtYmVyLCBjdXJyZW50QmFyOiBudW1iZXIsIGN1cnJlbnRCZWF0OiBudW1iZXIsIGN1cnJlbnRCZWF0SW5QaHJhc2U6IG51bWJlcik9PntcclxuICAgICAgICAgICAgdGhpcy5sb2coYG9uQmVhdC0+JHtjdXJyZW50UGhyYXNlfSwke2N1cnJlbnRCYXJ9LCR7Y3VycmVudEJlYXR9LCBuYlVwQmVhdCA9ICR7dGhpcy5uYlVwQmVhdGluQmVhdH1gKTtcclxuICAgICAgICAgICAgdGhpcy5uYlVwQmVhdGluQmVhdCA9IDA7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy50ZW1wby5yZWdpc3Rlck9uVXBCZWF0KChjdXJyZW50VGltZTogbnVtYmVyKT0+e1xyXG4gICAgICAgICAgICB0aGlzLm5iVXBCZWF0aW5CZWF0Kz0xO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXJ0KCkge1xyXG4gICAgICAgIHRoaXMudGVtcG8uc3RhcnQoKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IFRlbXBvIH0gZnJvbSBcIi4vdGVtcG9cIjtcclxuaW1wb3J0IHsgSUluc3RydW1lbnRSZWNvcmRlciwgSVNvdW5kSHViIH0gZnJvbSBcIi4uL3NvdW5kaHViL3NvdW5kaHViXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVHJhY2tSZWNvcmRlciBpbXBsZW1lbnRzIElJbnN0cnVtZW50UmVjb3JkZXIge1xyXG4gICAgbG9nOiAoc3RyaW5nICk9PiB2b2lkO1xyXG4gICAgaW5zdHJ1bWVudDogc3RyaW5nO1xyXG4gICAgc291bmRIdWI6IElTb3VuZEh1YjtcclxuICAgIHRlbXBvOiBUZW1wbztcclxuICAgIGlzUmVjb3JkaW5nID0gZmFsc2U7XHJcbiAgICBpc1BsYXlpbmcgPSBmYWxzZTtcclxuICAgIF9yZWNvcmQ6IHsgW3M6bnVtYmVyXTogc3RyaW5nO30gID0gPGFueT57fTtcclxuICAgIHN0YXJ0VGltZSA9IDA7XHJcbiAgICByZWNMZW5ndGggPSAwO1xyXG4gICAgY29uc3RydWN0b3IobG9nOiAoc3RyaW5nICk9PiB2b2lkLCBpbnN0cnVtZW50OnN0cmluZywgc291bmRIdWI6IElTb3VuZEh1YiwgdGVtcG86IFRlbXBvKSB7XHJcbiAgICAgICAgdGhpcy5sb2cgPSBsb2c7XHJcbiAgICAgICAgdGhpcy5pbnN0cnVtZW50ID0gaW5zdHJ1bWVudDtcclxuICAgICAgICB0aGlzLnNvdW5kSHViID0gc291bmRIdWI7XHJcbiAgICAgICAgdGhpcy50ZW1wbyA9IHRlbXBvO1xyXG4gICAgICAgIHRoaXMuc2V0U291bmRIdWIoc291bmRIdWIpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldFNvdW5kSHViKHNvdW5kSHViOiBJU291bmRIdWIpIHtcclxuICAgICAgICBzb3VuZEh1Yi5yZWdpc3RlclJlY29yZGVyKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIG9uUGxheWVkTm90ZSA9IChub3RlOiBzdHJpbmcpID0+IHtcclxuICAgICAgICB0aGlzLmxvZyhgcmVjb3JkZXIgZm9yIGluc3RydW1lbnQgJHt0aGlzLmluc3RydW1lbnR9IGlzIHJlY29yZGluZyBub3RlICR7bm90ZX1gKTtcclxuICAgICAgICBpZiAodGhpcy5pc1JlY29yZGluZykge1xyXG4gICAgICAgICAgICBsZXQgcmVjVGltZSA9IHRoaXMudGVtcG8uZ2V0Q3VycmVudFRpbWUoKSAtIHRoaXMuc3RhcnRUaW1lOyBcclxuICAgICAgICAgICAgdGhpcy5fcmVjb3JkW3JlY1RpbWVdID0gbm90ZTtcclxuICAgICAgICAgICAgdGhpcy5yZWNMZW5ndGggPSByZWNUaW1lO1xyXG4gICAgICAgICAgICB0aGlzLmxvZyhgUmVjb3JkaW5nIGluc3RydW1lbnQgJHt0aGlzLmluc3RydW1lbnR9IG5vdGUgJHtub3RlfSBhdCB0aW1lICR7cmVjVGltZX1gKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0SW5zdHJ1bWVudCgpIHtcclxuICAgICAgICB0aGlzLmxvZyhcImdldEluc3RydW1lbnQoKSAtPiBcIiArIHRoaXMuaW5zdHJ1bWVudCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdHJ1bWVudDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGFydFJlY29yZGluZygpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNSZWNvcmRpbmcgJiYgIXRoaXMuaXNQbGF5aW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlY29yZCA9IDxhbnk+e307XHJcbiAgICAgICAgICAgIHRoaXMubG9nKFwiU1RBUlQgUkVDT1JESU5HICEhIVwiKTtcclxuICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSB0aGlzLnRlbXBvLmdldEN1cnJlbnRUaW1lKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVjTGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgdGhpcy5pc1JlY29yZGluZyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIHN0b3AoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNSZWNvcmRpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2coXCJTVE9QIFJFQ09SRElORyAhISFcIik7XHJcbiAgICAgICAgICAgIHRoaXMuaXNSZWNvcmRpbmcgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaXNQbGF5aW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9nKFwiU1RPUCBQTEFZSU5HICEhIVwiKTtcclxuICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbmRPZlBsYXlpbmc6ICgpID0+IHZvaWQ7XHJcbiAgICBwdWJsaWMgc3RhcnRQbGF5aW5nKGVuZE9mUGxheWluZzogKCkgPT4gdm9pZCkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc1BsYXlpbmcgJiYgIXRoaXMuaXNSZWNvcmRpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2coXCJTVEFSVCBQTEFZSU5HICEhIVwiKTtcclxuICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSB0aGlzLnRlbXBvLmdldEN1cnJlbnRUaW1lKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy50ZW1wby5yZWdpc3Rlck9uVXBCZWF0KGN1cnJlbnRUaW1lID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzUGxheWluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCByZWNUaW1lID0gY3VycmVudFRpbWUgLSB0aGlzLnN0YXJ0VGltZTsgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlY1RpbWUgaW4gdGhpcy5fcmVjb3JkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBub3RlID0gdGhpcy5fcmVjb3JkW3JlY1RpbWVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZyhgUGxheSAke3RoaXMuaW5zdHJ1bWVudH0gbm90ZSAke25vdGV9IGF0IHRpbWUgJHtyZWNUaW1lfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNvdW5kSHViLm9uUGxheU5vdGUodGhpcy5pbnN0cnVtZW50LCBub3RlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlY1RpbWUgPj0gdGhpcy5yZWNMZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZE9mUGxheWluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgSW1hZ2VDb250YWluZXIgfSBmcm9tIFwiLi4vaW1hZ2VfY29udGFpbmVyXCI7XHJcbmltcG9ydCB7IFRyYWNrUmVjb3JkZXIgfSBmcm9tIFwiLi4vcmVjb3JkZXIvdHJhY2tSZWNvcmRlclwiO1xyXG5cclxuZXhwb3J0IGVudW0gZVRyYWNrU3RhdHVzIHtcclxuICAgIERJU0FCTEVELFxyXG4gICAgRU1QVFksXHJcbiAgICBSRUNPUkRJTkcsXHJcbiAgICBSRUFEWSxcclxuICAgIFBMQVlJTkdcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRyYWNrVUkge1xyXG4gICAgY29udGFpbmVyOiBVSUNvbnRhaW5lclJlY3Q7XHJcbiAgICBpbWFnZTogVUlJbWFnZTtcclxuICAgIGxjZDogSW1hZ2VDb250YWluZXI7XHJcbiAgICBwbGF5X3N0b3BfcmVjOiBJbWFnZUNvbnRhaW5lcjtcclxuICAgIGRlbGV0ZTogSW1hZ2VDb250YWluZXI7XHJcbiAgICBpbWFnZUxDRF9wbGF5aW5nOiBVSUltYWdlO1xyXG4gICAgaW1nX3BsYXk6IFVJSW1hZ2U7XHJcbiAgICBpbWdfc3RvcDogVUlJbWFnZTtcclxuICAgIGltZ19yZWM6IFVJSW1hZ2U7XHJcbiAgICBpbWdfZGVsZXRlOiBVSUltYWdlO1xyXG4gICAgaW1nX2RlbGV0ZV9pbmFjdGl2ZTogVUlJbWFnZTtcclxuICAgIHR4dF9uZXdfdHJhY2s6IFVJVGV4dDtcclxuICAgIHR4dF9yZWNvcmRpbmc6IFVJVGV4dDtcclxuICAgIHR4dF9wbGF5aW5nOiBVSVRleHQ7XHJcbiAgICB0eHRfdHJhY2s6IFVJVGV4dDtcclxuICAgIHN0YXR1czogZVRyYWNrU3RhdHVzID0gZVRyYWNrU3RhdHVzLkRJU0FCTEVEO1xyXG4gICAgdHJhY2tSZWNvcmRlcjogVHJhY2tSZWNvcmRlciA9IG51bGw7XHJcbiAgICBsb2c6IChzdHJpbmcgKT0+IHZvaWQ7XHJcbiAgICBjb25zdHJ1Y3Rvcihsb2c6IChzdHJpbmcgKT0+IHZvaWQsIHBhcmVudDogVUlTaGFwZSkge1xyXG4gICAgICAgIHRoaXMubG9nID0gbG9nO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gbmV3IFVJQ29udGFpbmVyUmVjdChwYXJlbnQpO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLndpZHRoID0gMTYwO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmhlaWdodCA9IDQwO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmhBbGlnbiA9ICdjZW50ZXInO1xyXG4gICAgICAgIC8vIHRoaXMuaW5kaWNhdG9yLnZBbGlnbiA9ICd0b3AnO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnBvc2l0aW9uWSA9IDU2O1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmlzUG9pbnRlckJsb2NrZXIgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLm9wYWNpdHkgPSAxLjA7XHJcblxyXG4gICAgICAgIHRoaXMucGxheV9zdG9wX3JlYyA9IG5ldyBJbWFnZUNvbnRhaW5lcih0aGlzLmNvbnRhaW5lcik7XHJcbiAgICAgICAgdGhpcy5wbGF5X3N0b3BfcmVjLmNvbnRhaW5lcigpLmlzUG9pbnRlckJsb2NrZXIgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucGxheV9zdG9wX3JlYy5jb250YWluZXIoKS5wb3NpdGlvblggPSAtMTAwO1xyXG4gICAgICAgIHRoaXMucGxheV9zdG9wX3JlYy5jb250YWluZXIoKS5wb3NpdGlvblkgPSAwO1xyXG4gICAgICAgIHRoaXMucGxheV9zdG9wX3JlYy5jb250YWluZXIoKS53aWR0aCA9IDI4O1xyXG4gICAgICAgIHRoaXMucGxheV9zdG9wX3JlYy5jb250YWluZXIoKS5oZWlnaHQgPSAyODtcclxuICAgICAgICB0aGlzLnBsYXlfc3RvcF9yZWMucmVnaXN0ZXJJbWFnZSgncGxheScsICdpbWFnZXMvcGxheS5wbmcnLCA3MCwgNzApO1xyXG4gICAgICAgIHRoaXMucGxheV9zdG9wX3JlYy5yZWdpc3Rlck9uQ2xpY2tJbWFnZSgncGxheScsIG5ldyBPbkNsaWNrKGV2ZW50ID0+IHtcclxuICAgICAgICAgICAgdGhpcy5sb2coJ29uY2xpY2sgUGxheScpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT0gZVRyYWNrU3RhdHVzLkRJU0FCTEVEKSByZXR1cm47XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PSBlVHJhY2tTdGF0dXMuUkVBRFkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlU3RhdHVzKGVUcmFja1N0YXR1cy5QTEFZSU5HKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pKTtcclxuICAgICAgICB0aGlzLnBsYXlfc3RvcF9yZWMucmVnaXN0ZXJJbWFnZSgnc3RvcCcsICdpbWFnZXMvc3RvcC5wbmcnLCA3MCwgNzApO1xyXG4gICAgICAgIHRoaXMucGxheV9zdG9wX3JlYy5yZWdpc3Rlck9uQ2xpY2tJbWFnZSgnc3RvcCcsIG5ldyBPbkNsaWNrKGV2ZW50ID0+IHtcclxuICAgICAgICAgICAgdGhpcy5sb2coJ29uY2xpY2sgU3RvcCcpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT0gZVRyYWNrU3RhdHVzLkRJU0FCTEVEKSByZXR1cm47XHJcbiAgICAgICAgICAgIGlmICgodGhpcy5zdGF0dXMgPT0gZVRyYWNrU3RhdHVzLlBMQVlJTkcpIHx8ICh0aGlzLnN0YXR1cyA9PSBlVHJhY2tTdGF0dXMuUkVDT1JESU5HKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VTdGF0dXMoZVRyYWNrU3RhdHVzLlJFQURZKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pKTtcclxuICAgICAgICB0aGlzLnBsYXlfc3RvcF9yZWMucmVnaXN0ZXJJbWFnZSgncmVjb3JkJywgJ2ltYWdlcy9yZWNvcmQucG5nJywgNzAsIDcxKTtcclxuICAgICAgICB0aGlzLnBsYXlfc3RvcF9yZWMucmVnaXN0ZXJPbkNsaWNrSW1hZ2UoJ3JlY29yZCcsIG5ldyBPbkNsaWNrKGV2ZW50ID0+IHtcclxuICAgICAgICAgICAgdGhpcy5sb2coJ29uY2xpY2sgUmVjJyk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PSBlVHJhY2tTdGF0dXMuRElTQUJMRUQpIHJldHVybjtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09IGVUcmFja1N0YXR1cy5FTVBUWSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VTdGF0dXMoZVRyYWNrU3RhdHVzLlJFQ09SRElORyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgdGhpcy5wbGF5X3N0b3BfcmVjLnJlZ2lzdGVySW1hZ2UoJ2Rpc2FibGVkJywgJ2ltYWdlcy9yZWNvcmRfb2ZmLnBuZycsIDcwLCA3MCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gdGhpcy5pbWdfcGxheSA9IG5ldyBVSUltYWdlKHRoaXMuY29udGFpbmVyLCBuZXcgVGV4dHVyZSgnaW1hZ2VzL3BsYXkucG5nJykpO1xyXG4gICAgICAgIC8vIHRoaXMuaW1nX3BsYXkuc291cmNlV2lkdGggPSA3MDtcclxuICAgICAgICAvLyB0aGlzLmltZ19wbGF5LnNvdXJjZUhlaWdodCA9IDcwO1xyXG4gICAgICAgIC8vIHRoaXMuc2V0QnV0dG9uR2VvbWV0cnkodGhpcy5pbWdfcGxheSk7XHJcbiAgICAgICAgLy8gdGhpcy5pbWdfcGxheS5vbkNsaWNrID0gbmV3IE9uQ2xpY2soZXZlbnQgPT4ge1xyXG4gICAgICAgIC8vICAgICB0aGlzLmxvZygnb25jbGljayBQbGF5Jyk7XHJcbiAgICAgICAgLy8gICAgIGlmICh0aGlzLnN0YXR1cyA9PSBlVHJhY2tTdGF0dXMuUkVBRFkpIHtcclxuICAgICAgICAvLyAgICAgICAgIHRoaXMuc3RhdHVzID0gZVRyYWNrU3RhdHVzLlBMQVlJTkc7XHJcbiAgICAgICAgLy8gICAgICAgICB0aGlzLnN3YXBCdXR0b25zQW5kVGV4dHMoKTtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vIH0pO1xyXG5cclxuICAgICAgICAvLyB0aGlzLmltZ19zdG9wID0gbmV3IFVJSW1hZ2UodGhpcy5jb250YWluZXIsIG5ldyBUZXh0dXJlKCdpbWFnZXMvc3RvcC5wbmcnKSk7XHJcbiAgICAgICAgLy8gdGhpcy5pbWdfc3RvcC5zb3VyY2VXaWR0aCA9IDcwO1xyXG4gICAgICAgIC8vIHRoaXMuaW1nX3N0b3Auc291cmNlSGVpZ2h0ID0gNzA7XHJcbiAgICAgICAgLy8gdGhpcy5zZXRCdXR0b25HZW9tZXRyeSh0aGlzLmltZ19zdG9wKTtcclxuICAgICAgICAvLyB0aGlzLmltZ19zdG9wLm9uQ2xpY2sgPSBuZXcgT25DbGljayhldmVudCA9PiB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMubG9nKCdvbmNsaWNrIFN0b3AnKTtcclxuICAgICAgICAvLyAgICAgaWYgKCh0aGlzLnN0YXR1cyA9PSBlVHJhY2tTdGF0dXMuUExBWUlORykgfHwgKHRoaXMuc3RhdHVzID09IGVUcmFja1N0YXR1cy5SRUNPUkRJTkcpKSB7XHJcbiAgICAgICAgLy8gICAgICAgICB0aGlzLnN0YXR1cyA9IGVUcmFja1N0YXR1cy5SRUFEWTtcclxuICAgICAgICAvLyAgICAgICAgIHRoaXMuc3dhcEJ1dHRvbnNBbmRUZXh0cygpO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfSk7XHJcblxyXG4gICAgICAgIC8vIHRoaXMuaW1nX3JlYyA9IG5ldyBVSUltYWdlKHRoaXMuY29udGFpbmVyLCBuZXcgVGV4dHVyZSgnaW1hZ2VzL3JlY29yZC5wbmcnKSk7XHJcbiAgICAgICAgLy8gdGhpcy5pbWdfcmVjLnNvdXJjZVdpZHRoID0gNzA7XHJcbiAgICAgICAgLy8gdGhpcy5pbWdfcmVjLnNvdXJjZUhlaWdodCA9IDcxO1xyXG4gICAgICAgIC8vIHRoaXMuc2V0QnV0dG9uR2VvbWV0cnkodGhpcy5pbWdfcmVjKTtcclxuICAgICAgICAvLyB0aGlzLmltZ19yZWMub25DbGljayA9IG5ldyBPbkNsaWNrKGV2ZW50ID0+IHtcclxuICAgICAgICAvLyAgICAgdGhpcy5sb2coJ29uY2xpY2sgUmVjJyk7XHJcbiAgICAgICAgLy8gICAgIGlmICh0aGlzLnN0YXR1cyA9PSBlVHJhY2tTdGF0dXMuRU1QVFkpIHtcclxuICAgICAgICAvLyAgICAgICAgIHRoaXMuc3RhdHVzID0gZVRyYWNrU3RhdHVzLlJFQ09SRElORztcclxuICAgICAgICAvLyAgICAgICAgIHRoaXMuc3dhcEJ1dHRvbnNBbmRUZXh0cygpO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfSk7XHJcblxyXG4gICAgICAgIHRoaXMuZGVsZXRlID0gbmV3IEltYWdlQ29udGFpbmVyKHRoaXMuY29udGFpbmVyKTtcclxuICAgICAgICB0aGlzLmRlbGV0ZS5jb250YWluZXIoKS5wb3NpdGlvblggPSAxNTtcclxuICAgICAgICB0aGlzLmRlbGV0ZS5jb250YWluZXIoKS5wb3NpdGlvblkgPSAnMCUnO1xyXG4gICAgICAgIHRoaXMuZGVsZXRlLmNvbnRhaW5lcigpLndpZHRoID0gMjQ7XHJcbiAgICAgICAgdGhpcy5kZWxldGUuY29udGFpbmVyKCkuaGVpZ2h0ID0gMjQ7XHJcbiAgICAgICAgdGhpcy5kZWxldGUucmVnaXN0ZXJJbWFnZSgnYWN0aXZlJywgJ2ltYWdlcy9jcm9zc19hY3RpdmUucG5nJywgODEsODQpO1xyXG4gICAgICAgIHRoaXMuZGVsZXRlLnJlZ2lzdGVyT25DbGlja0ltYWdlKCdhY3RpdmUnLCBuZXcgT25DbGljayhldmVudCA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubG9nKCdvbmNsaWNrIERlbGV0ZScpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT0gZVRyYWNrU3RhdHVzLlJFQURZKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVN0YXR1cyhlVHJhY2tTdGF0dXMuRU1QVFkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHRoaXMuZGVsZXRlLnJlZ2lzdGVySW1hZ2UoJ2luYWN0aXZlJywgJ2ltYWdlcy9jcm9zcy5wbmcnLCA4MSw4NCk7XHJcblxyXG4gICAgICAgIC8vIHRoaXMuaW1nX2RlbGV0ZSA9IG5ldyBVSUltYWdlKHRoaXMuY29udGFpbmVyLCBuZXcgVGV4dHVyZSgnaW1hZ2VzL2Nyb3NzX2FjdGl2ZS5wbmcnKSk7XHJcbiAgICAgICAgLy8gdGhpcy5pbWdfZGVsZXRlLnNvdXJjZVdpZHRoID0gODE7XHJcbiAgICAgICAgLy8gdGhpcy5pbWdfZGVsZXRlLnNvdXJjZUhlaWdodCA9IDg0O1xyXG4gICAgICAgIC8vIHRoaXMuaW1nX2RlbGV0ZS5wb3NpdGlvblggPSA3MDtcclxuICAgICAgICAvLyB0aGlzLmltZ19kZWxldGUucG9zaXRpb25ZID0gJzAlJztcclxuICAgICAgICAvLyB0aGlzLmltZ19kZWxldGUud2lkdGggPSAzMjtcclxuICAgICAgICAvLyB0aGlzLmltZ19kZWxldGUuaGVpZ2h0ID0gMzI7XHJcbiAgICAgICAgLy8gdGhpcy5pbWdfZGVsZXRlLm9uQ2xpY2sgPSBuZXcgT25DbGljayhldmVudCA9PiB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMubG9nKCdvbmNsaWNrIERlbGV0ZScpO1xyXG4gICAgICAgIC8vICAgICBpZiAodGhpcy5zdGF0dXMgPT0gZVRyYWNrU3RhdHVzLlJFQURZKSB7XHJcbiAgICAgICAgLy8gICAgICAgICB0aGlzLnN0YXR1cyA9IGVUcmFja1N0YXR1cy5FTVBUWTtcclxuICAgICAgICAvLyAgICAgICAgIHRoaXMuc3dhcEJ1dHRvbnNBbmRUZXh0cygpO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfSk7XHJcblxyXG4gICAgICAgIHRoaXMubGNkID0gbmV3IEltYWdlQ29udGFpbmVyKHRoaXMuY29udGFpbmVyKTtcclxuICAgICAgICB0aGlzLmxjZC5yZWdpc3RlckltYWdlKCdpbmFjdGl2ZScsICdpbWFnZXMvTENEX2JhY2tncm91bmQucG5nJywgNDE3LCAxNzgpO1xyXG4gICAgICAgIHRoaXMubGNkLnJlZ2lzdGVySW1hZ2UoJ2FjdGl2ZScsICdpbWFnZXMvTENEX2JhY2tncm91bmRfcGxheWluZy5wbmcnLCA0MTcsIDE3OCk7XHJcbiAgICAgICAgdGhpcy5sY2QuY29udGFpbmVyKCkucG9zaXRpb25YID0gJy0xNSUnO1xyXG4gICAgICAgIHRoaXMubGNkLmNvbnRhaW5lcigpLnBvc2l0aW9uWSA9ICcwJSc7XHJcbiAgICAgICAgdGhpcy5sY2QuY29udGFpbmVyKCkud2lkdGggPSAxMTU7XHJcbiAgICAgICAgdGhpcy5sY2QuY29udGFpbmVyKCkuaGVpZ2h0ID0gJzEwMCUnO1xyXG4gICAgICAgIHRoaXMubGNkLmNvbnRhaW5lcigpLnZpc2libGUgPSB0cnVlO1xyXG5cclxuICAgICAgICAvLyBsZXQgaW1hZ2VMQ0QgPSBuZXcgVUlJbWFnZSh0aGlzLmNvbnRhaW5lciwgbmV3IFRleHR1cmUoJ2ltYWdlcy9MQ0RfYmFja2dyb3VuZC5wbmcnKSk7XHJcbiAgICAgICAgLy8gaW1hZ2VMQ0QucG9zaXRpb25YID0gJy0xNSUnO1xyXG4gICAgICAgIC8vIGltYWdlTENELnBvc2l0aW9uWSA9ICcwJSc7XHJcbiAgICAgICAgLy8gaW1hZ2VMQ0Quc291cmNlV2lkdGggPSA0MTc7XHJcbiAgICAgICAgLy8gaW1hZ2VMQ0Quc291cmNlSGVpZ2h0ID0gMTc4O1xyXG4gICAgICAgIC8vIGltYWdlTENELndpZHRoID0gMTYwO1xyXG4gICAgICAgIC8vIGltYWdlTENELmhlaWdodCA9ICcxMDAlJztcclxuICAgICAgICAvLyBpbWFnZUxDRC52aXNpYmxlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgLy8gdGhpcy5pbWFnZUxDRF9wbGF5aW5nID0gbmV3IFVJSW1hZ2UoaW1hZ2VMQ0QsIG5ldyBUZXh0dXJlKCdpbWFnZXMvTENEX2JhY2tncm91bmRfcGxheWluZy5wbmcnKSk7XHJcbiAgICAgICAgLy8gdGhpcy5pbWFnZUxDRF9wbGF5aW5nLnBvc2l0aW9uWCA9ICctMTUlJztcclxuICAgICAgICAvLyB0aGlzLmltYWdlTENEX3BsYXlpbmcucG9zaXRpb25ZID0gJzAlJztcclxuICAgICAgICAvLyB0aGlzLmltYWdlTENEX3BsYXlpbmcuc291cmNlV2lkdGggPSA0MTc7XHJcbiAgICAgICAgLy8gdGhpcy5pbWFnZUxDRF9wbGF5aW5nLnNvdXJjZUhlaWdodCA9IDE3ODtcclxuICAgICAgICAvLyB0aGlzLmltYWdlTENEX3BsYXlpbmcud2lkdGggPSAnMTAwJSc7XHJcbiAgICAgICAgLy8gdGhpcy5pbWFnZUxDRF9wbGF5aW5nLmhlaWdodCA9ICcxMDAlJztcclxuICAgICAgICAvLyB0aGlzLmltYWdlTENEX3BsYXlpbmcudmlzaWJsZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLnR4dF9uZXdfdHJhY2sgPSBuZXcgVUlUZXh0KHRoaXMubGNkLmNvbnRhaW5lcigpKTtcclxuICAgICAgICB0aGlzLnR4dF9uZXdfdHJhY2sudmFsdWUgPSBcIiBbK10gTmV3IHRyYWNrXCI7XHJcbiAgICAgICAgdGhpcy50eHRfbmV3X3RyYWNrLmhUZXh0QWxpZ24gPSAnbGVmdCc7XHJcbiAgICAgICAgdGhpcy5zZXRUZXh0R2VvbWV0cnkodGhpcy50eHRfbmV3X3RyYWNrKTtcclxuXHJcbiAgICAgICAgdGhpcy50eHRfcmVjb3JkaW5nID0gbmV3IFVJVGV4dCh0aGlzLmxjZC5jb250YWluZXIoKSk7XHJcbiAgICAgICAgdGhpcy50eHRfcmVjb3JkaW5nLnZhbHVlID0gXCIqUkVDT1JESU5HKlwiO1xyXG4gICAgICAgIHRoaXMudHh0X3JlY29yZGluZy5jb2xvciA9IENvbG9yNC5SZWQoKTtcclxuICAgICAgICB0aGlzLnR4dF9yZWNvcmRpbmcuaFRleHRBbGlnbiA9ICdjZW50ZXInO1xyXG4gICAgICAgIHRoaXMuc2V0VGV4dEdlb21ldHJ5KHRoaXMudHh0X3JlY29yZGluZyk7XHJcbiAgICAgICAgdGhpcy50eHRfcmVjb3JkaW5nLmZvbnRTaXplID0gMTM7XHJcblxyXG4gICAgICAgIHRoaXMudHh0X3BsYXlpbmcgPSBuZXcgVUlUZXh0KHRoaXMubGNkLmNvbnRhaW5lcigpKTtcclxuICAgICAgICB0aGlzLnR4dF9wbGF5aW5nLnZhbHVlID0gXCIqUkVQTEFZKlwiO1xyXG4gICAgICAgIHRoaXMudHh0X3BsYXlpbmcuY29sb3IgPSBDb2xvcjQuR3JlZW4oKTtcclxuICAgICAgICB0aGlzLnR4dF9wbGF5aW5nLmhUZXh0QWxpZ24gPSAnbGVmdCc7XHJcbiAgICAgICAgdGhpcy5zZXRUZXh0R2VvbWV0cnkodGhpcy50eHRfcGxheWluZyk7XHJcbiAgICAgICAgdGhpcy50eHRfcGxheWluZy5mb250U2l6ZSA9IDEzO1xyXG5cclxuICAgICAgICB0aGlzLnR4dF90cmFjayA9IG5ldyBVSVRleHQodGhpcy5sY2QuY29udGFpbmVyKCkpO1xyXG4gICAgICAgIHRoaXMudHh0X3RyYWNrLnZhbHVlID0gXCJUUkFDS18jXCI7XHJcbiAgICAgICAgdGhpcy50eHRfdHJhY2suaFRleHRBbGlnbiA9ICdsZWZ0JztcclxuICAgICAgICB0aGlzLnR4dF90cmFjay50ZXh0V3JhcHBpbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMudHh0X3RyYWNrLmNvbG9yID0gQ29sb3I0LlRlYWwoKTtcclxuICAgICAgICB0aGlzLnR4dF90cmFjay5zaGFkb3dCbHVyID0gMjA7XHJcbiAgICAgICAgdGhpcy5zZXRUZXh0R2VvbWV0cnkodGhpcy50eHRfdHJhY2spO1xyXG5cclxuICAgICAgICB0aGlzLnN3YXBCdXR0b25zQW5kVGV4dHMoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFRyYWNrUmVjb3JkZXIgKHRyYWNrUmVjb3JkZXI6IFRyYWNrUmVjb3JkZXIpIHtcclxuICAgICAgICB0aGlzLnRyYWNrUmVjb3JkZXIgPSB0cmFja1JlY29yZGVyO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlbmFibGUoZW5hYmxlOiBib29sZWFuKSB7XHJcbiAgICAgICAgbGV0IG5ld1N0YXR1cyA9IGVUcmFja1N0YXR1cy5ESVNBQkxFRDtcclxuICAgICAgICBpZiAoZW5hYmxlKSB7XHJcbiAgICAgICAgICAgIG5ld1N0YXR1cyA9IGVUcmFja1N0YXR1cy5FTVBUWTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VTdGF0dXMobmV3U3RhdHVzLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFBvc2l0aW9uKHBvc1gsIHBvc1kpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5wb3NpdGlvblggPSBwb3NYO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnBvc2l0aW9uWSA9IHBvc1k7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VGV4dEdlb21ldHJ5KHRleHQ6IFVJVGV4dCkge1xyXG4gICAgICAgIGxldCBwb3NYID0gMDtcclxuICAgICAgICBsZXQgcG9zWSA9ICc0NSUnO1xyXG4gICAgICAgIGxldCBmb250RmFtaWx5ID0gJ0xDRCc7XHJcbiAgICAgICAgbGV0IGZvbnRBdXRvU2l6ZSA9IHRydWU7XHJcbiAgICAgICAgbGV0IGZvbnRXZWlnaHQgPSAnYm9sZCc7XHJcbiAgICAgICAgdGV4dC5mb250U2l6ZSA9IDE1O1xyXG4gICAgICAgIHRleHQud2lkdGggPSAxMDA7XHJcbiAgICAgICAgdGV4dC5wb3NpdGlvblggPSBwb3NYO1xyXG4gICAgICAgIHRleHQucG9zaXRpb25ZID0gcG9zWTtcclxuICAgICAgICAvLyB0ZXh0LmZvbnRGYW1pbHkgPSAnTENEJztcclxuICAgICAgICAvLyB0ZXh0LmZvbnRBdXRvU2l6ZSA9IGZvbnRBdXRvU2l6ZTtcclxuICAgICAgICB0ZXh0LmZvbnRXZWlnaHQgPSBmb250V2VpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHNldEJ1dHRvbkdlb21ldHJ5KGJ1dHRvbjogVUlJbWFnZSkge1xyXG4gICAgLy8gICAgIGxldCBidXR0b25fcG9zWCA9IC0xMjA7XHJcbiAgICAvLyAgICAgbGV0IGJ1dHRvbl9wb3NZID0gMDtcclxuICAgIC8vICAgICBsZXQgYnV0dG9uX3dpZHRoID0gMzI7XHJcbiAgICAvLyAgICAgbGV0IGJ1dHRvbl9oZWlnaHQgPSAzMjtcclxuICAgIC8vICAgICBidXR0b24uaXNQb2ludGVyQmxvY2tlciA9IHRydWU7XHJcbiAgICAvLyAgICAgYnV0dG9uLnBvc2l0aW9uWCA9IGJ1dHRvbl9wb3NYO1xyXG4gICAgLy8gICAgIGJ1dHRvbi5wb3NpdGlvblkgPSBidXR0b25fcG9zWTtcclxuICAgIC8vICAgICBidXR0b24ud2lkdGggPSBidXR0b25fd2lkdGg7XHJcbiAgICAvLyAgICAgYnV0dG9uLmhlaWdodCA9IGJ1dHRvbl9oZWlnaHQ7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgc3dhcEJ1dHRvbnNBbmRUZXh0cygpIHtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMuc3RhdHVzKSB7XHJcbiAgICAgICAgICAgIGNhc2UgZVRyYWNrU3RhdHVzLkRJU0FCTEVEOiB7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmltZ19yZWMudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmltZ19wbGF5LnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuaW1nX2RlbGV0ZS52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmltZ19zdG9wLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMudHh0X25ld190cmFjay52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMudHh0X25ld190cmFjay5jb2xvciA9IENvbG9yNC5HcmF5KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnR4dF9yZWNvcmRpbmcudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50eHRfcGxheWluZy52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnR4dF90cmFjay52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXlfc3RvcF9yZWMubWFrZU9uZVZpc2libGUoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZS5tYWtlQWxsSW52aXNpYmxlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxjZC5tYWtlT25lVmlzaWJsZSgnaW5hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgZVRyYWNrU3RhdHVzLkVNUFRZOiB7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmltZ19yZWMudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmltZ19wbGF5LnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuaW1nX2RlbGV0ZS52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmltZ19zdG9wLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMudHh0X25ld190cmFjay52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMudHh0X25ld190cmFjay5jb2xvciA9IENvbG9yNC5XaGl0ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50eHRfcmVjb3JkaW5nLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMudHh0X3BsYXlpbmcudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50eHRfdHJhY2sudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5X3N0b3BfcmVjLm1ha2VPbmVWaXNpYmxlKCdyZWNvcmQnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlLm1ha2VBbGxJbnZpc2libGUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubGNkLm1ha2VPbmVWaXNpYmxlKCdpbmFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBlVHJhY2tTdGF0dXMuUkVDT1JESU5HOiB7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmltZ19yZWMudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5pbWdfcGxheS52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmltZ19kZWxldGUudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5pbWdfc3RvcC52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMudHh0X25ld190cmFjay52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnR4dF9yZWNvcmRpbmcudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnR4dF9wbGF5aW5nLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMudHh0X3RyYWNrLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheV9zdG9wX3JlYy5tYWtlT25lVmlzaWJsZSgnc3RvcCcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWxldGUubWFrZU9uZVZpc2libGUoJ2luYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxjZC5tYWtlT25lVmlzaWJsZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIGVUcmFja1N0YXR1cy5SRUFEWToge1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5pbWdfcmVjLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuaW1nX3BsYXkudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmltZ19kZWxldGUudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmltZ19zdG9wLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMudHh0X25ld190cmFjay52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnR4dF9yZWNvcmRpbmcudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50eHRfcGxheWluZy52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnR4dF90cmFjay52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheV9zdG9wX3JlYy5tYWtlT25lVmlzaWJsZSgncGxheScpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWxldGUubWFrZU9uZVZpc2libGUoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sY2QubWFrZU9uZVZpc2libGUoJ2luYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIGVUcmFja1N0YXR1cy5QTEFZSU5HOiB7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmltZ19yZWMudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5pbWdfcGxheS52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmltZ19kZWxldGUudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5pbWdfc3RvcC52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMudHh0X25ld190cmFjay52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnR4dF9yZWNvcmRpbmcudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50eHRfcGxheWluZy52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMudHh0X3RyYWNrLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheV9zdG9wX3JlYy5tYWtlT25lVmlzaWJsZSgnc3RvcCcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWxldGUubWFrZU9uZVZpc2libGUoJ2luYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxjZC5tYWtlT25lVmlzaWJsZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9uQ2hhbmdlQ2FsbGJhY2s6IChtZTpUcmFja1VJLCBzdGF0dXM6ZVRyYWNrU3RhdHVzKSA9PiB2b2lkO1xyXG4gICAgcHVibGljIHJlZ2lzdGVyT25TdGF0dXNDaGFuZ2VkKGNhbGxiYWNrOiAobWU6VHJhY2tVSSwgc3RhdHVzOmVUcmFja1N0YXR1cykgPT4gdm9pZCkge1xyXG4gICAgICAgIHRoaXMub25DaGFuZ2VDYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gICAgfVxyXG5cclxuICAgIGNoYW5nZVN0YXR1cyhuZXdTdGF0dXM6IGVUcmFja1N0YXR1cywgbm90aWZ5OiBib29sZWFuID0gdHJ1ZSkge1xyXG4gICAgICAgIGxldCBvbGRTdGF0dXMgPSB0aGlzLnN0YXR1cztcclxuICAgICAgICBpZiAob2xkU3RhdHVzID09IG5ld1N0YXR1cykgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuc3RhdHVzID0gbmV3U3RhdHVzO1xyXG4gICAgICAgIHRoaXMuc3dhcEJ1dHRvbnNBbmRUZXh0cygpO1xyXG4gICAgICAgIGlmICh0aGlzLnRyYWNrUmVjb3JkZXIpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09IGVUcmFja1N0YXR1cy5SRUNPUkRJTkcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudHJhY2tSZWNvcmRlci5zdGFydFJlY29yZGluZygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvbGRTdGF0dXMgPT0gZVRyYWNrU3RhdHVzLlJFQ09SRElORykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50cmFja1JlY29yZGVyLnN0b3AoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT0gZVRyYWNrU3RhdHVzLlBMQVlJTkcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudHJhY2tSZWNvcmRlci5zdGFydFBsYXlpbmcoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlU3RhdHVzKGVUcmFja1N0YXR1cy5SRUFEWSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob2xkU3RhdHVzID09IGVUcmFja1N0YXR1cy5QTEFZSU5HKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyYWNrUmVjb3JkZXIuc3RvcCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChub3RpZnkgJiYgdGhpcy5vbkNoYW5nZUNhbGxiYWNrKSB0aGlzLm9uQ2hhbmdlQ2FsbGJhY2sodGhpcywgbmV3U3RhdHVzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0U3RhdHVzKCk6IGVUcmFja1N0YXR1cyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzO1xyXG4gICAgfVxyXG5cclxufSIsImltcG9ydCB7IElTb3VuZEh1YiB9IGZyb20gXCIuLi9zb3VuZGh1Yi9zb3VuZGh1YlwiO1xyXG5pbXBvcnQgeyBUZW1wb1VJIH0gZnJvbSBcIi4vdGVtcG9VSVwiO1xyXG5pbXBvcnQgeyBUZW1wbyB9IGZyb20gXCIuLi9yZWNvcmRlci90ZW1wb1wiO1xyXG5pbXBvcnQgeyBUcmFja1VJLCBlVHJhY2tTdGF0dXMgfSBmcm9tIFwiLi90cmFja1VJXCI7XHJcbmltcG9ydCB7IFRyYWNrUmVjb3JkZXIgfSBmcm9tIFwiLi4vcmVjb3JkZXIvdHJhY2tSZWNvcmRlclwiO1xyXG5pbXBvcnQgeyBVSVdyYXBwZXIgfSBmcm9tIFwiLi4vdWlfd3JhcHBlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFJlY29yZGVyVUkgZXh0ZW5kcyBVSVdyYXBwZXIge1xyXG4gICAgc291bmRIdWI6IElTb3VuZEh1YjtcclxuICAgIGltYWdlOiBVSUltYWdlO1xyXG4gICAgaW5kaWNhdG9yOiBUZW1wb1VJO1xyXG4gICAgdGVtcG86IFRlbXBvO1xyXG4gICAgdHJhY2tzOiBUcmFja1VJW10gPSBbXTtcclxuICAgIGluc3RydW1lbnQ6IHN0cmluZztcclxuICAgIGNvbnN0cnVjdG9yKGxvZzogKHN0cmluZyApPT4gdm9pZCwgcGFyZW50OiBVSVNoYXBlLCBzb3VuZEh1YjogSVNvdW5kSHViLCB0ZW1wbzogVGVtcG8pIHtcclxuICAgICAgICBzdXBlcihsb2csIHBhcmVudCk7XHJcbiAgICAgICAgdGhpcy5zb3VuZEh1YiA9IHNvdW5kSHViO1xyXG4gICAgICAgIHRoaXMudGVtcG8gPSB0ZW1wbztcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci53aWR0aCA9IDM2MDtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5oZWlnaHQgPSAyMzA7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuaEFsaWduID0gJ3JpZ2h0JztcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5wb3NpdGlvblkgPSAtMzUwO1xyXG5cclxuICAgICAgICBsZXQgaW1hZ2VUZXh0dXJlID0gbmV3IFRleHR1cmUoJ2ltYWdlcy9hdWRpb19kZXZpY2VfYmFja2dyb3VuZF8yLnBuZycpO1xyXG4gICAgICAgIHRoaXMuaW1hZ2UgPSBuZXcgVUlJbWFnZSh0aGlzLmNvbnRhaW5lciwgaW1hZ2VUZXh0dXJlKTtcclxuICAgICAgICB0aGlzLmltYWdlLmhBbGlnbiA9ICdjZW50ZXInO1xyXG4gICAgICAgIC8vIHRoaXMuaW1hZ2UucG9zaXRpb25ZID0gJzAlJztcclxuICAgICAgICB0aGlzLmltYWdlLnZBbGlnbiA9ICd0b3AnO1xyXG4gICAgICAgIC8vIHRoaXMuaW1hZ2UucGFkZGluZ1RvcCA9ICc1MCUnO1xyXG4gICAgICAgIHRoaXMuaW1hZ2Uuc291cmNlV2lkdGggPSA2NTA7XHJcbiAgICAgICAgdGhpcy5pbWFnZS5zb3VyY2VIZWlnaHQgPSA0MTY7XHJcbiAgICAgICAgdGhpcy5pbWFnZS53aWR0aCA9IGAxMDAlYDtcclxuICAgICAgICB0aGlzLmltYWdlLmhlaWdodCA9IGAxMDAlYDtcclxuICAgICAgICB0aGlzLmltYWdlLm9wYWNpdHkgPSAxLjA7XHJcbiAgICAgICAgLy8gdGhpcy5pbWFnZS5pc1BvaW50ZXJCbG9ja2VyID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRDbG9zZUJ1dHRvbigpO1xyXG5cclxuICAgICAgICBsZXQgcG9zWHMgPSBbLTUwLCAxMjBdO1xyXG4gICAgICAgIC8vIGxldCBwb3NZcyA9IFsnLTI1JScsICctMTAlJywgJys1JScsICcrMjAlJ107XHJcbiAgICAgICAgbGV0IHBvc1lzID0gWycyMCUnLCAnNSUnLCAnLTEwJScsICctMjUlJ107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyOyBpKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCA0OyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCB0cmFjayA9IG5ldyBUcmFja1VJKHRoaXMubG9nLCB0aGlzLmltYWdlKTtcclxuICAgICAgICAgICAgICAgIHRyYWNrLnNldFBvc2l0aW9uKHBvc1hzW2ldLCBwb3NZc1tqXSk7XHJcbiAgICAgICAgICAgICAgICB0cmFjay5yZWdpc3Rlck9uU3RhdHVzQ2hhbmdlZCgodGhlVHJhY2ssIHN0YXR1cykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFRyYWNrQWN0aXZhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyYWNrcy5wdXNoKHRyYWNrKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlZnJlc2hUcmFja0FjdGl2YXRpb24oKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbmRpY2F0b3IgPSBuZXcgVGVtcG9VSSh0aGlzLmxvZywgdGhpcy5pbWFnZSk7XHJcbiAgICAgICAgdGhpcy5pbmRpY2F0b3Iuc2V0UG9zaXRpb24oLTgwLCAnKzM4JScpO1xyXG4gICAgICAgIHRoaXMuaW5kaWNhdG9yLnJlZ2lzdGVyT25UZW1wb0NoYW5nZWQoKGlzU3RhcnRlZDpib29sZWFuLCBpc0Zyb3plbjpib29sZWFuKT0+e1xyXG4gICAgICAgICAgICBpZiAoaXNTdGFydGVkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50ZW1wby5pc0Zyb3plbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kaWNhdG9yLnNldEJlYXQoMSt0aGlzLnRlbXBvLmdldEN1cnJlbnRCZWF0SW5QaHJhc2UoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wby5yZXN1bWUoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRpY2F0b3Iuc2V0QmVhdCgxK3RoaXMudGVtcG8uZ2V0Q3VycmVudEJlYXRJblBocmFzZSgpKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBvLnN0YXJ0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNGcm96ZW4pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGVtcG8uZnJlZXplKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluZGljYXRvci5zZXRCZWF0KDErdGhpcy50ZW1wby5nZXRDdXJyZW50QmVhdEluUGhyYXNlKCkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbmRpY2F0b3Iuc2V0QmVhdCgwKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudGVtcG8uc3RvcCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy50ZW1wby5yZWdpc3Rlck9uQmVhdCgoY3VycmVudFBocmFzZTpudW1iZXIsIGN1cnJlbnRCYXI6bnVtYmVyLCBjdXJyZW50QmVhdDogbnVtYmVyLCBjdXJyZW50QmVhdEluUGhyYXNlOiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5pbmRpY2F0b3Iuc2V0QmVhdCgxK2N1cnJlbnRCZWF0SW5QaHJhc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlZnJlc2hUcmFja0FjdGl2YXRpb24oKSB7XHJcbiAgICAgICAgLy8gV2Ugd2FudCBvbmx5IG9uZSB0cmFjayBpbiBSRUNPUkRJTkcgb3IgRU1QVFkgbW9kZSwgb3RoZXJ3aXNlIDpcclxuICAgICAgICAvLyAtIGlmIG5vbmUgb2YgdGhlbSwgdGhlbiBhY3RpdmF0ZSB0aGUgZmlyc3QgRElTQUJMRUQgb25lXHJcbiAgICAgICAgLy8gLSBvciBpZiBzZXZlcmFsIG9mIHRoZW0sIGRpc2FibGUgYWxsIGV4Y2VwdCB0aGUgZmlyc3Qgb25lXHJcbiAgICAgICAgbGV0IHJlY29yZGluZyA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBmaXJzdEVtcHR5OiBUcmFja1VJID0gbnVsbDtcclxuICAgICAgICBsZXQgZmlyc3REaXNhYmxlZDogVHJhY2tVSSA9IG51bGw7XHJcbiAgICAgICAgZm9yIChsZXQgdHJhY2sgb2YgdGhpcy50cmFja3MpIHtcclxuICAgICAgICAgICAgaWYgKHRyYWNrLmdldFN0YXR1cygpID09IGVUcmFja1N0YXR1cy5FTVBUWSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFmaXJzdEVtcHR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RFbXB0eSA9IHRyYWNrO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmFjay5lbmFibGUoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0cmFjay5nZXRTdGF0dXMoKSA9PSBlVHJhY2tTdGF0dXMuUkVDT1JESU5HKSB7XHJcbiAgICAgICAgICAgICAgICByZWNvcmRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghZmlyc3REaXNhYmxlZCAmJiAodHJhY2suZ2V0U3RhdHVzKCkgPT0gZVRyYWNrU3RhdHVzLkRJU0FCTEVEKSkge1xyXG4gICAgICAgICAgICAgICAgZmlyc3REaXNhYmxlZCA9IHRyYWNrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZWNvcmRpbmcgJiYgZmlyc3RFbXB0eSkgZmlyc3RFbXB0eS5lbmFibGUoZmFsc2UpO1xyXG4gICAgICAgIGlmICghcmVjb3JkaW5nICYmICFmaXJzdEVtcHR5ICYmIGZpcnN0RGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgbGV0IHRyYWNrUmVjb3JkZXIgPSBuZXcgVHJhY2tSZWNvcmRlcih0aGlzLmxvZywgdGhpcy5pbnN0cnVtZW50LCB0aGlzLnNvdW5kSHViLCB0aGlzLnRlbXBvKTtcclxuICAgICAgICAgICAgZmlyc3REaXNhYmxlZC5zZXRUcmFja1JlY29yZGVyKHRyYWNrUmVjb3JkZXIpO1xyXG4gICAgICAgICAgICBmaXJzdERpc2FibGVkLmVuYWJsZSh0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldEFjdGl2ZUluc3RydW1lbnQoaW5zdHJ1bWVudDogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5pbnN0cnVtZW50ID0gaW5zdHJ1bWVudDtcclxuICAgICAgICB0aGlzLnRyYWNrcy5mb3JFYWNoKHRyYWNrID0+IHtcclxuICAgICAgICAgICAgdHJhY2suc2V0VHJhY2tSZWNvcmRlcihuZXcgVHJhY2tSZWNvcmRlcih0aGlzLmxvZywgdGhpcy5pbnN0cnVtZW50LCB0aGlzLnNvdW5kSHViLCB0aGlzLnRlbXBvKSk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufSIsImltcG9ydCB7IEVudGl0eVdyYXBwZXIgfSBmcm9tIFwiLi4vZW50aXR5X3dyYXBwZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBSZWNvcmRlcjNEIGV4dGVuZHMgRW50aXR5V3JhcHBlciB7XHJcbiAgICBnZXRTaGFwZSgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEdMVEZTaGFwZSgnbW9kZWxzL3JlY29yZGVyLmdsdGYnKTtcclxuICAgIH1cclxuICAgIGdldE1hdGVyaWFsKCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgSW5zdHJ1bWVudCwgSU5vdGVQcm9wcyB9IGZyb20gXCIuL0luc3RydW1lbnRcIjtcclxuaW1wb3J0IHsgTm90ZSB9IGZyb20gXCIuL25vdGVcIjtcclxuaW1wb3J0IHsgSVNvdW5kSHViIH0gZnJvbSBcIi4uL3NvdW5kaHViL3NvdW5kaHViXCI7XHJcblxyXG5jb25zdCBtb2RlbEZpbGUgPSAnbW9kZWxzL2RydW1zZXRfbG93X3BvbHkuZ2x0Zic7XHJcbmNvbnN0IHNvdW5kRmlsZUV4dGVuc2lvbiA9IFwiLndhdlwiO1xyXG5jb25zdCBkcnVtc01vZGVsRmlsZSA9IHtcclxuICAgIFwiY3ltYmFsMVwiOiBcIm1vZGVscy9jeW1iYWwxLmdsdGZcIixcclxuICAgIFwiY3ltYmFsMlwiOiBcIm1vZGVscy9jeW1iYWwyLmdsdGZcIixcclxuICAgIFwiY3ltYmFsM1wiOiBcIm1vZGVscy9jeW1iYWwzLmdsdGZcIixcclxuICAgIFwic25hcmVcIjogXCJtb2RlbHMvc25hcmUuZ2x0ZlwiLFxyXG4gICAgXCJ0b20xXCI6IFwibW9kZWxzL3RvbTEuZ2x0ZlwiLFxyXG4gICAgXCJ0b20yXCI6IFwibW9kZWxzL3RvbTIuZ2x0ZlwiLFxyXG4gICAgXCJmbG9vclwiOiBcIm1vZGVscy9mbG9vci5nbHRmXCIsXHJcbiAgICBcImtpY2tcIjogXCJtb2RlbHMva2ljay5nbHRmXCIsXHJcbn07XHJcbmNvbnN0IGRydW1zVWlJbWFnZXMgPSB7XHJcbiAgICBcImN5bWJhbDFcIjoge2ltYWdlOiBcImltYWdlcy9kcnVtc191aV9jeW1iYWwxLnBuZ1wiLCBzb3VyY2VXaWR0aDogMjk3LCBzb3VyY2VIZWlnaHQ6IDExMCwgcG9zWDogLTIxMCwgcG9zWTogLTEyfSxcclxuICAgIFwiY3ltYmFsMlwiOiB7aW1hZ2U6IFwiaW1hZ2VzL2RydW1zX3VpX2N5bWJhbDIucG5nXCIsIHNvdXJjZVdpZHRoOiAyODIsIHNvdXJjZUhlaWdodDogMTA2LCBwb3NYOiAtMTU3LCBwb3NZOiA4N30sXHJcbiAgICBcImN5bWJhbDNcIjoge2ltYWdlOiBcImltYWdlcy9kcnVtc191aV9jeW1iYWwzLnBuZ1wiLCBzb3VyY2VXaWR0aDogMjQwLCBzb3VyY2VIZWlnaHQ6IDE4MCwgcG9zWDogMjI1LCBwb3NZOiA2M30sXHJcbiAgICBcInNuYXJlXCI6IHtpbWFnZTogXCJpbWFnZXMvZHJ1bXNfdWlfc25hcmUucG5nXCIsIHNvdXJjZVdpZHRoOiAzMDUsIHNvdXJjZUhlaWdodDogMTQ2LCBwb3NYOiAtMjAwLCBwb3NZOiAtMTIwfSxcclxuICAgIFwidG9tMVwiOiB7aW1hZ2U6IFwiaW1hZ2VzL2RydW1zX3VpX3RvbTEucG5nXCIsIHNvdXJjZVdpZHRoOiAxOTcsIHNvdXJjZUhlaWdodDogMTA1LCBwb3NYOiAtNTMsIHBvc1k6IDM4fSxcclxuICAgIFwidG9tMlwiOiB7aW1hZ2U6IFwiaW1hZ2VzL2RydW1zX3VpX3RvbTIucG5nXCIsIHNvdXJjZVdpZHRoOiAyMDYsIHNvdXJjZUhlaWdodDogMTE0LCBwb3NYOiA5NSwgcG9zWTogMzh9LFxyXG4gICAgXCJmbG9vclwiOiB7aW1hZ2U6IFwiaW1hZ2VzL2RydW1zX3VpX2Zsb29yLnBuZ1wiLCBzb3VyY2VXaWR0aDogMjk3LCBzb3VyY2VIZWlnaHQ6IDE2MSwgcG9zWDogMjEwLCBwb3NZOiAtOTV9LFxyXG4gICAgXCJraWNrXCI6IHtpbWFnZTogXCJpbWFnZXMvZHJ1bXNfdWlfa2ljay5wbmdcIiwgc291cmNlV2lkdGg6IDMzNywgc291cmNlSGVpZ2h0OiAxNjAsIHBvc1g6IDAsIHBvc1k6IC0xMTB9LFxyXG59XHJcblxyXG5jb25zdCBzb3VuZHNQYXRoID0gXCJzb3VuZHMvZHJ1bXMvXCI7XHJcbnZhciBkcnVtc05vdGVzOiBJTm90ZVByb3BzW107XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXREcnVtc05vdGVzKCk6IElOb3RlUHJvcHNbXSB7XHJcbiAgICBpZiAoIWRydW1zTm90ZXMpIHtcclxuICAgICAgICBkcnVtc05vdGVzID0gW107XHJcbiAgICAgICAgbGV0IGluZGV4ID0gMDtcclxuICAgICAgICBmb3IgKGxldCBub3RlIGluIGRydW1zTW9kZWxGaWxlKSB7XHJcbiAgICAgICAgICAgIGxldCBzb3VuZEZpbGUgPSBzb3VuZHNQYXRoICsgbm90ZSArIHNvdW5kRmlsZUV4dGVuc2lvbjtcclxuICAgICAgICAgICAgZHJ1bXNOb3Rlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIG5vdGU6IG5vdGUsIGluZGV4OiBpbmRleCwgc29uZzogc291bmRGaWxlLCBleHRyYXM6IHtcclxuICAgICAgICAgICAgICAgICAgICBcIm1vZGVsXCI6IGRydW1zTW9kZWxGaWxlW25vdGVdLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidWlfaW1hZ2VcIjogZHJ1bXNVaUltYWdlc1tub3RlXS5pbWFnZSxcclxuICAgICAgICAgICAgICAgICAgICBcInVpX3Bvc1hcIjogZHJ1bXNVaUltYWdlc1tub3RlXS5wb3NYLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidWlfcG9zWVwiOiBkcnVtc1VpSW1hZ2VzW25vdGVdLnBvc1ksXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ1aV9zb3VyY2VXaWR0aFwiOiBkcnVtc1VpSW1hZ2VzW25vdGVdLnNvdXJjZVdpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidWlfc291cmNlSGVpZ2h0XCI6IGRydW1zVWlJbWFnZXNbbm90ZV0uc291cmNlSGVpZ2h0XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpbmRleCArKztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZHJ1bXNOb3RlcztcclxufVxyXG5jb25zdCBpbnN0cnVtZW50ID0gXCJkcnVtc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIERydW1TZXQgZXh0ZW5kcyBJbnN0cnVtZW50PERydW1JdGVtPiB7XHJcbiAgICBjb25zdHJ1Y3Rvcihsb2c6IChzdHJpbmcgKT0+IHZvaWQsIHNvdW5kSHViOiBJU291bmRIdWIsIHRyYW5zZm9ybTogVHJhbnNmb3JtKSB7XHJcbiAgICAgICAgc3VwZXIobG9nLCBzb3VuZEh1YiwgdHJhbnNmb3JtKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZU5vdGVzKHNvdW5kSHViLCBEcnVtSXRlbSwgZ2V0RHJ1bXNOb3RlcygpKTtcclxuICAgIH1cclxuICAgIGdldE1hdGVyaWFsKCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgZ2V0U2hhcGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBHTFRGU2hhcGUobW9kZWxGaWxlKTtcclxuICAgIH1cclxuICAgIGdldFRyYW5zZm9ybUZvck5vdGUobm90ZVByb3A6IElOb3RlUHJvcHMpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFRyYW5zZm9ybSh7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgVmVjdG9yMygwLjAsIDAuMCwgMC4wKVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBEcnVtSXRlbSBleHRlbmRzIE5vdGUge1xyXG4gICAgLy8gY29uc3RydWN0b3IgKGxvZzogKHN0cmluZyApPT4gdm9pZCwgdHJhbnNmb3JtOiBUcmFuc2Zvcm0sIHBhcmVudDogRW50aXR5LCBub3RlUHJvcDogSU5vdGVQcm9wcykge1xyXG4gICAgLy8gICAgIHN1cGVyKGxvZywgdHJhbnNmb3JtLCBwYXJlbnQsIG5vdGVQcm9wKTtcclxuICAgIC8vIH1cclxuICAgIGdldEluc3RydW1lbnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIGluc3RydW1lbnQ7XHJcbiAgICB9XHJcbiAgICBnZXRNYXRlcmlhbCgpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGdldFNoYXBlKCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgZ2V0Tm90ZVNoYXBlKG5vdGVQcm9wOiBJTm90ZVByb3BzKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBHTFRGU2hhcGUobm90ZVByb3AuZXh0cmFzW1wibW9kZWxcIl0gYXMgc3RyaW5nKTtcclxuICAgIH1cclxuICAgIGFuaW1hdGUoKSB7XHJcblxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgVUlJbnN0cnVtZW50IH0gZnJvbSBcIi4vVUlJbnN0cnVtZW50XCI7XHJcbmltcG9ydCB7IElTb3VuZEh1YiB9IGZyb20gXCIuLi9zb3VuZGh1Yi9zb3VuZGh1YlwiO1xyXG5pbXBvcnQgeyBJTm90ZVByb3BzIH0gZnJvbSBcIi4uL2luc3RydW1lbnRzL0luc3RydW1lbnRcIjtcclxuaW1wb3J0IHsgSW1hZ2VDb250YWluZXIgfSBmcm9tIFwiLi4vaW1hZ2VfY29udGFpbmVyXCI7XHJcbmltcG9ydCB7IGdldERydW1zTm90ZXMgfSBmcm9tIFwiLi4vaW5zdHJ1bWVudHMvZHJ1bXNldFwiO1xyXG5cclxuY29uc3QgaW5zdHJ1bWVudCA9IFwiZHJ1bXNcIjtcclxubGV0IGltYWdlVGV4dHVyZSA9IG5ldyBUZXh0dXJlKCdpbWFnZXMvZHJ1bXNldF91aS5wbmcnKTtcclxubGV0IGltYWdlU291cmNlV2lkdGggPSA5NzM7XHJcbmxldCBpbWFnZVNvdXJjZUhlaWdodCA9IDQwMTtcclxubGV0IHVpV2lkdGggPSA2MDA7XHJcbmxldCB1aUhlaWdodCA9IDM1MDtcclxuXHJcbmV4cG9ydCBjbGFzcyBEcnVtU2V0VUkgZXh0ZW5kcyBVSUluc3RydW1lbnQge1xyXG4gICAgaW1hZ2U6IFVJSW1hZ2U7XHJcbiAgICBjb25zdHJ1Y3Rvcihsb2c6IChzdHJpbmcgKT0+IHZvaWQsIHBhcmVudDogVUlTaGFwZSkge1xyXG4gICAgICAgIHN1cGVyKGxvZywgcGFyZW50KTtcclxuICAgICAgICAvLyB0aGlzLmNvbnRhaW5lci53aWR0aCA9IDY0MDtcclxuICAgICAgICAvLyB0aGlzLmNvbnRhaW5lci5oQWxpZ24gPSAnbGVmdCc7XHJcblxyXG4gICAgICAgIHRoaXMuaW1hZ2UgPSBuZXcgVUlJbWFnZSh0aGlzLmNvbnRhaW5lciwgaW1hZ2VUZXh0dXJlKTtcclxuICAgICAgICB0aGlzLmltYWdlLmhBbGlnbiA9ICdjZW50ZXInXHJcbiAgICAgICAgdGhpcy5pbWFnZS5wb3NpdGlvblkgPSAwO1xyXG4gICAgICAgIHRoaXMuaW1hZ2UucGFkZGluZ1RvcCA9IDUwOyAvLyB1bmRlciB0aGUgY2xvc2UgYnV0dG9uXHJcbiAgICAgICAgLy8gdGhpcy5pbWFnZS5wYWRkaW5nTGVmdCA9IDEwMDtcclxuICAgICAgICB0aGlzLmltYWdlLnNvdXJjZVdpZHRoID0gaW1hZ2VTb3VyY2VXaWR0aDtcclxuICAgICAgICB0aGlzLmltYWdlLnNvdXJjZUhlaWdodCA9IGltYWdlU291cmNlSGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuaW1hZ2Uud2lkdGggPSB1aVdpZHRoXHJcbiAgICAgICAgdGhpcy5pbWFnZS5oZWlnaHQgPSB1aUhlaWdodFxyXG4gICAgICAgIHRoaXMuaW1hZ2UuaXNQb2ludGVyQmxvY2tlciA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5pbWFnZS5vcGFjaXR5ID0gMS4wO1xyXG4gICAgICAgIHRoaXMuaW1hZ2Uub25DbGljayA9IG5ldyBPbkNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5sb2coXCJPbiBjbGljayBEcnVtU2V0X3VpXCIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgY29uc3QgdG9vbE5hbWUgPSBuZXcgVUlUZXh0KHRoaXMuY29udGFpbmVyKVxyXG4gICAgICAgIHRvb2xOYW1lLnZhbHVlID0gXCJEcnVtc1wiXHJcbiAgICAgICAgdG9vbE5hbWUuZm9udFNpemUgPSAyMFxyXG4gICAgICAgIHRvb2xOYW1lLnZBbGlnbiA9ICd0b3AnXHJcbiAgICAgICAgdG9vbE5hbWUud2lkdGggPSAnMTUwcHgnXHJcbiAgICAgICAgdG9vbE5hbWUuaGVpZ2h0ID0gJzM1cHgnXHJcbiAgICAgICAgdG9vbE5hbWUucG9zaXRpb25YID0gMjBcclxuICAgICAgICB0b29sTmFtZS5wYWRkaW5nVG9wID0gLTEwXHJcbiAgICAgICAgdG9vbE5hbWUuY29sb3IgPSBDb2xvcjQuRnJvbUhleFN0cmluZygnIzBGMTIxN2ZmJylcclxuXHJcbiAgICAgICAgXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0U291bmRIdWIoc291bmRIdWI6IElTb3VuZEh1Yikge1xyXG4gICAgICAgIHN1cGVyLnNldFNvdW5kSHViKHNvdW5kSHViKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZU5vdGVzKHNvdW5kSHViLCBnZXREcnVtc05vdGVzKCkpO1xyXG4gICAgfVxyXG4gICAgY3JlYXRlTm90ZXMoc291bmRIdWI6IElTb3VuZEh1Yiwgbm90ZVByb3BzOiBJTm90ZVByb3BzW10pIHtcclxuICAgICAgICBsZXQgb2Zmc2V0WCA9IDE5LjU7XHJcbiAgICAgICAgbGV0IHBvc1ggPSAtMzAwO1xyXG4gICAgICAgIGxldCBwb3NZID0gJzIwJSc7XHJcbiAgICAgICAgZm9yIChsZXQgbm90ZVByb3Agb2Ygbm90ZVByb3BzKSB7XHJcbiAgICAgICAgICAgIGxldCBpbWFnZVNvdXJjZSA9IG5vdGVQcm9wLmV4dHJhc1tcInVpX2ltYWdlXCJdIGFzIHN0cmluZztcclxuICAgICAgICAgICAgbGV0IHBvc1ggPSBub3RlUHJvcC5leHRyYXNbXCJ1aV9wb3NYXCJdIGFzIG51bWJlcjtcclxuICAgICAgICAgICAgbGV0IHBvc1kgPSBub3RlUHJvcC5leHRyYXNbXCJ1aV9wb3NZXCJdIGFzIG51bWJlcjtcclxuICAgICAgICAgICAgbGV0IHNvdXJjZVdpZHRoID0gbm90ZVByb3AuZXh0cmFzW1widWlfc291cmNlV2lkdGhcIl0gYXMgbnVtYmVyO1xyXG4gICAgICAgICAgICBsZXQgc291cmNlSGVpZ2h0ID0gbm90ZVByb3AuZXh0cmFzW1widWlfc291cmNlSGVpZ2h0XCJdIGFzIG51bWJlcjtcclxuICAgICAgICAgICAgdGhpcy5sb2coXCJEcnVtU2V0VUkgOiBBZGQgaW1hZ2UgXCIgKyBpbWFnZVNvdXJjZSArIFwiIGF0IHBvc2l0aW9uIFwiICsgcG9zWCArIFwiLCBcIiArIHBvc1kpXHJcbiAgICAgICAgICAgIGxldCBpbWFnZUNvbnRhaW5lciA9IG5ldyBJbWFnZUNvbnRhaW5lcih0aGlzLmNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIGxldCB3aWR0aCA9IE1hdGgucm91bmQoc291cmNlV2lkdGgqdWlXaWR0aC9pbWFnZVNvdXJjZVdpZHRoKTtcclxuICAgICAgICAgICAgbGV0IGhlaWdodCA9IE1hdGgucm91bmQoc291cmNlSGVpZ2h0KnVpSGVpZ2h0L2ltYWdlU291cmNlSGVpZ2h0KTtcclxuICAgICAgICAgICAgaW1hZ2VDb250YWluZXIuY29udGFpbmVyKCkud2lkdGggPSAgd2lkdGg7XHJcbiAgICAgICAgICAgIGltYWdlQ29udGFpbmVyLmNvbnRhaW5lcigpLmhlaWdodCA9ICBoZWlnaHQ7XHJcbiAgICAgICAgICAgIGltYWdlQ29udGFpbmVyLmNvbnRhaW5lcigpLnBvc2l0aW9uWCA9IHBvc1g7XHJcbiAgICAgICAgICAgIGltYWdlQ29udGFpbmVyLmNvbnRhaW5lcigpLnBvc2l0aW9uWSA9IHBvc1k7XHJcbiAgICAgICAgICAgIGltYWdlQ29udGFpbmVyLnJlZ2lzdGVySW1hZ2UoJ25vcm1hbCcsIGltYWdlU291cmNlLCBzb3VyY2VXaWR0aCwgc291cmNlSGVpZ2h0KTtcclxuICAgICAgICAgICAgLy8gRW5kIHNwZWNpZmljXHJcbiAgICAgICAgICAgIGltYWdlQ29udGFpbmVyLnJlZ2lzdGVyT25DbGlja0ltYWdlKCdub3JtYWwnLCBuZXcgT25DbGljayhldmVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZyhgRHJ1bVNldFVJIDogUHJlc3Mgb24ga2V5ICR7bm90ZVByb3Aubm90ZX1gKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub25DbGlja0NhbGxiYWNrKG5vdGVQcm9wLm5vdGUpO1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIGltYWdlQ29udGFpbmVyLm1ha2VPbmVWaXNpYmxlKCdub3JtYWwnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRJbnN0cnVtZW50KCkge1xyXG4gICAgICAgIHJldHVybiBpbnN0cnVtZW50O1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgSW5zdHJ1bWVudCwgSU5vdGVQcm9wcyB9IGZyb20gXCIuL0luc3RydW1lbnRcIjtcclxuaW1wb3J0IHsgTm90ZSB9IGZyb20gXCIuL25vdGVcIjtcclxuaW1wb3J0IHsgSVNvdW5kSHViIH0gZnJvbSBcIi4uL3NvdW5kaHViL3NvdW5kaHViXCI7XHJcblxyXG5jb25zdCBndWl0YXJFbGVjTW9kZWxGaWxlID0gXCJtb2RlbHMvZ3VpdGFyX2VsZWMuZ2x0ZlwiO1xyXG5jb25zdCBzb3VuZHNQYXRoID0gXCJzb3VuZHMvZ3VpdGFyX2VsZWMvXCI7XHJcbmNvbnN0IGV4dGVuc2lvbiA9IFwiLndhdlwiO1xyXG52YXIgZ3VpdGFyRWxlY05vdGVzOiBJTm90ZVByb3BzW107XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRHdWl0YXJFbGVjTm90ZXMoKTogSU5vdGVQcm9wc1tdIHtcclxuICAgIGlmICghZ3VpdGFyRWxlY05vdGVzKSB7XHJcbiAgICAgICAgZ3VpdGFyRWxlY05vdGVzID0gW107XHJcbiAgICAgICAgbGV0IGluZGV4ID0gMDtcclxuICAgICAgICBsZXQgY29yZCA9IDE7XHJcbiAgICAgICAgbGV0IHBvc2l0aW9uID0gMDtcclxuICAgICAgICBmb3IgKGxldCBvY3RhdmUgb2YgWzIsIDMsIDRdKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGxldHRlciBvZiBbXCJDXCIsIFwiRFwiLCBcIkVcIiwgXCJGXCIsIFwiR1wiLCBcIkFcIiwgXCJCXCJdKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoKG9jdGF2ZSA9PT0gMikgJiYgKFtcIkNcIiwgXCJEXCJdLmluZGV4T2YobGV0dGVyKSAhPT0gLTEpKSBjb250aW51ZTsgLy8gc3RhcnQgd2l0aCBFMlxyXG4gICAgICAgICAgICAgICAgbGV0IG5vdGUgPSBsZXR0ZXIgKyBvY3RhdmU7XHJcbiAgICAgICAgICAgICAgICBpZiAoKChvY3RhdmUgPT09IDIpICYmIChsZXR0ZXIgPT09IFwiQVwiKSkgIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgKChvY3RhdmUgPT09IDMpICYmIChsZXR0ZXIgPT09IFwiRFwiKSkgIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgKChvY3RhdmUgPT09IDMpICYmIChsZXR0ZXIgPT09IFwiR1wiKSkgIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgKChvY3RhdmUgPT09IDMpICYmIChsZXR0ZXIgPT09IFwiQlwiKSkgIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgKChvY3RhdmUgPT09IDQpICYmIChsZXR0ZXIgPT09IFwiRVwiKSlcclxuICAgICAgICAgICAgICAgICkgeyAvLyBjaGFuZ2UgY29yZFxyXG4gICAgICAgICAgICAgICAgICAgIGd1aXRhckVsZWNOb3Rlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm90ZTogbm90ZSArIFwiX1wiLCBpbmRleDogaW5kZXgsIHNvbmcgOiBzb3VuZHNQYXRoICsgbm90ZSArIGV4dGVuc2lvbiwgZXh0cmFzOiB7XCJjb3JkXCI6IGNvcmQsIFwicG9zaXRpb25cIjogcG9zaXRpb259XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29yZCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGd1aXRhckVsZWNOb3Rlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBub3RlOiBub3RlLCBpbmRleDogaW5kZXgsIHNvbmcgOiBzb3VuZHNQYXRoICsgbm90ZSArIGV4dGVuc2lvbiwgZXh0cmFzOiB7XCJjb3JkXCI6IGNvcmQsIFwicG9zaXRpb25cIjogcG9zaXRpb259XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbisrO1xyXG4gICAgICAgICAgICAgICAgaWYgKChvY3RhdmUgPT09IDQpICYmIChsZXR0ZXIgPT09IFwiQVwiKSkgYnJlYWs7IC8vIGVuZCB3aXRoIEE0XHJcbiAgICAgICAgICAgICAgICBpZiAoW1wiQVwiLFwiQ1wiLFwiRFwiLFwiRlwiLFwiR1wiXS5pbmRleE9mKGxldHRlcikgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5vdGUgPSBsZXR0ZXIgKyBvY3RhdmUgKyBcIl9zaGFycFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGd1aXRhckVsZWNOb3Rlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm90ZTogbm90ZSwgaW5kZXg6IGluZGV4LCBzb25nIDogc291bmRzUGF0aCArIG5vdGUgKyBleHRlbnNpb24sIGV4dHJhczoge1wiY29yZFwiOiBjb3JkLCBcInBvc2l0aW9uXCI6IHBvc2l0aW9ufVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24rKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBndWl0YXJFbGVjTm90ZXM7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBHdWl0YXJFbGVjTm90ZSBleHRlbmRzIE5vdGUge1xyXG4gICAgZ2V0U2hhcGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQbGFuZVNoYXBlKCk7XHJcbiAgICB9XHJcbiAgICBnZXRNYXRlcmlhbCgpIHtcclxuICAgICAgICBjb25zdCBtYXRlcmlhbCA9IG5ldyBNYXRlcmlhbCgpXHJcbiAgICAgICAgbWF0ZXJpYWwuYWxiZWRvVGV4dHVyZSA9IG5ldyBUZXh0dXJlKFwiaW1hZ2VzL2ZpbmdlcnByaW50Mi5wbmdcIix7aGFzQWxwaGE6IHRydWV9KTtcclxuICAgICAgICBtYXRlcmlhbC5oYXNBbHBoYSA9IHRydWU7XHJcbiAgICAgICAgcmV0dXJuIG1hdGVyaWFsO1xyXG4gICAgfVxyXG4gICAgZ2V0Tm90ZVNoYXBlKG5vdGVQcm9wOiBJTm90ZVByb3BzKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBnZXRJbnN0cnVtZW50KCkge1xyXG4gICAgICAgIHJldHVybiBcImd1aXRhcl9lbGVjXCI7XHJcbiAgICB9XHJcbiAgICBhbmltYXRlKCkge1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgR3VpdGFyRWxlYyBleHRlbmRzIEluc3RydW1lbnQ8R3VpdGFyRWxlY05vdGU+IHtcclxuICAgIGNvbnN0cnVjdG9yKGxvZzogKHN0cmluZyApPT4gdm9pZCwgc291bmRIdWI6IElTb3VuZEh1YiwgdHJhbnNmb3JtOiBUcmFuc2Zvcm0pIHtcclxuICAgICAgICBzdXBlcihsb2csIHNvdW5kSHViLCB0cmFuc2Zvcm0pO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlTm90ZXMoc291bmRIdWIsIEd1aXRhckVsZWNOb3RlLCBnZXRHdWl0YXJFbGVjTm90ZXMoKSk7XHJcbiAgICB9XHJcbiAgICBnZXRNYXRlcmlhbCgpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGdldFNoYXBlKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgR0xURlNoYXBlKGd1aXRhckVsZWNNb2RlbEZpbGUpO1xyXG4gICAgfVxyXG4gICAgZ2V0VHJhbnNmb3JtRm9yTm90ZShub3RlUHJvcDogSU5vdGVQcm9wcyk6IFRyYW5zZm9ybSB7XHJcbiAgICAgICAgbGV0IHBvc1ggPSAtMS4wNjtcclxuICAgICAgICBsZXQgcG9zWSA9IDEuMTtcclxuICAgICAgICBsZXQgcG9zWiA9IC01Ljc7XHJcbiAgICAgICAgbGV0IG5vdGVDb3JkID0gbm90ZVByb3AuZXh0cmFzWydjb3JkJ10gYXMgbnVtYmVyO1xyXG4gICAgICAgIGxldCBub3RlUG9zaXRpb24gPSBub3RlUHJvcC5leHRyYXNbJ3Bvc2l0aW9uJ10gYXMgbnVtYmVyO1xyXG4gICAgICAgIHJldHVybiBuZXcgVHJhbnNmb3JtKHtcclxuICAgICAgICAgICAgcG9zaXRpb246IG5ldyBWZWN0b3IzKHBvc1ggLSAwLjExKm5vdGVDb3JkICsgMC4wNypub3RlUG9zaXRpb24sIHBvc1ksIHBvc1ogKyAwLjU0Km5vdGVQb3NpdGlvbiAtIDAuMDQqbm90ZUNvcmQpLFxyXG4gICAgICAgICAgICByb3RhdGlvbjogUXVhdGVybmlvbi5FdWxlcig5MCwwLC0xMCksXHJcbiAgICAgICAgICAgIHNjYWxlOiBuZXcgVmVjdG9yMygwLjEyLCAwLjUsIDAuMSksXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufSIsImltcG9ydCB7IFVJSW5zdHJ1bWVudCB9IGZyb20gXCIuL1VJSW5zdHJ1bWVudFwiO1xyXG5pbXBvcnQgeyBJU291bmRIdWIsIElOb3RlQ29udHJvbGxlciB9IGZyb20gXCIuLi9zb3VuZGh1Yi9zb3VuZGh1YlwiO1xyXG5pbXBvcnQgeyBJTm90ZVByb3BzIH0gZnJvbSBcIi4uL2luc3RydW1lbnRzL0luc3RydW1lbnRcIjtcclxuaW1wb3J0IHsgZ2V0R3VpdGFyRWxlY05vdGVzIH0gZnJvbSBcIi4uL2luc3RydW1lbnRzL2d1aXRhcl9lbGVjXCI7XHJcblxyXG5jb25zdCBpbnN0cnVtZW50ID0gXCJndWl0YXJfZWxlY1wiO1xyXG5cclxubGV0IGltYWdlVGV4dHVyZSA9IG5ldyBUZXh0dXJlKCdpbWFnZXMvZ3VpdGFyX2VsZWMucG5nJyk7XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIEd1aXRhckVsZWNVSSBleHRlbmRzIFVJSW5zdHJ1bWVudCB7XHJcbiAgICBpbWFnZTogVUlJbWFnZTtcclxuICAgIGNvbnN0cnVjdG9yKGxvZzogKHN0cmluZyApPT4gdm9pZCwgcGFyZW50OiBVSVNoYXBlKSB7XHJcbiAgICAgICAgc3VwZXIobG9nLCBwYXJlbnQpO1xyXG4gICAgICAgIHRoaXMuaW1hZ2UgPSBuZXcgVUlJbWFnZSh0aGlzLmNvbnRhaW5lciwgaW1hZ2VUZXh0dXJlKTtcclxuICAgICAgICB0aGlzLmltYWdlLmhBbGlnbiA9ICdjZW50ZXInXHJcbiAgICAgICAgdGhpcy5pbWFnZS5wb3NpdGlvblkgPSAnMzAlJ1xyXG4gICAgICAgIHRoaXMuaW1hZ2UucGFkZGluZ1RvcCA9IDUwOyAvLyB1bmRlciB0aGUgY2xvc2UgYnV0dG9uXHJcbiAgICAgICAgdGhpcy5pbWFnZS5zb3VyY2VXaWR0aCA9IDQxN1xyXG4gICAgICAgIHRoaXMuaW1hZ2Uuc291cmNlSGVpZ2h0ID0gMTc4XHJcbiAgICAgICAgdGhpcy5pbWFnZS53aWR0aCA9IGAxMDAlYFxyXG4gICAgICAgIHRoaXMuaW1hZ2UuaGVpZ2h0ID0gYDE4MCVgXHJcbiAgICAgICAgdGhpcy5pbWFnZS5pc1BvaW50ZXJCbG9ja2VyID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmltYWdlLm9wYWNpdHkgPSAxLjA7XHJcblxyXG4gICAgICAgIGNvbnN0IHRvb2xOYW1lID0gbmV3IFVJVGV4dCh0aGlzLmNvbnRhaW5lcilcclxuICAgICAgICB0b29sTmFtZS52YWx1ZSA9IFwiRWxlY3RyaWNhbCBHdWl0YXJcIlxyXG4gICAgICAgIHRvb2xOYW1lLmZvbnRTaXplID0gMjBcclxuICAgICAgICB0b29sTmFtZS52QWxpZ24gPSAndG9wJ1xyXG4gICAgICAgIHRvb2xOYW1lLndpZHRoID0gJzE1MHB4J1xyXG4gICAgICAgIHRvb2xOYW1lLmhlaWdodCA9ICczNXB4J1xyXG4gICAgICAgIHRvb2xOYW1lLnBvc2l0aW9uWCA9IDIwXHJcbiAgICAgICAgdG9vbE5hbWUucGFkZGluZ1RvcCA9IC0xMFxyXG4gICAgICAgIHRvb2xOYW1lLmNvbG9yID0gQ29sb3I0LkZyb21IZXhTdHJpbmcoJyMwRjEyMTdmZicpXHJcblxyXG4gICAgICAgIFxyXG4gICAgfVxyXG4gICAgcHVibGljIHNldFNvdW5kSHViKHNvdW5kSHViOiBJU291bmRIdWIpIHtcclxuICAgICAgICBzdXBlci5zZXRTb3VuZEh1Yihzb3VuZEh1Yik7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVOb3Rlcyhzb3VuZEh1YiwgZ2V0R3VpdGFyRWxlY05vdGVzKCkpO1xyXG4gICAgfVxyXG4gICAgY3JlYXRlTm90ZXMoc291bmRIdWI6IElTb3VuZEh1Yiwgbm90ZVByb3BzOiBJTm90ZVByb3BzW10pIHtcclxuICAgICAgICAvLyBsZXQgdGFiUG9zaXRpb25YID0gWyczMi41JScsICcyNSUnLCAnMTguNyUnLCAnMTIuNiUnLCAnNi43JScsICcxLjAlJ107XHJcbiAgICAgICAgbGV0IHRhYlBvc2l0aW9uWCA9IFsnMzUlJywgJzI4LjUlJywgJzIyLjUlJywgJzE2LjUlJywgJzExLjUlJywgJzclJ107XHJcbiAgICAgICAgLy8gbGV0IGNvcmRQb3NpdGlvblkgPSBbJzclJywgJzMlJywgJy0xJScsICctNSUnXTtcclxuICAgICAgICBsZXQgY29yZFBvc2l0aW9uWSA9IFsnLTEuNSUnLCAnLTUlJywgJy04LjUlJywgJy0xMiUnLCAnLTE1LjUlJywgJy0xOSUnXTtcclxuICAgICAgICBmb3IgKGxldCBub3RlUHJvcCBvZiBub3RlUHJvcHMpIHtcclxuICAgICAgICAgICAgbGV0IG5vdGVDb3JkID0gbm90ZVByb3AuZXh0cmFzWydjb3JkJ10gYXMgbnVtYmVyO1xyXG4gICAgICAgICAgICBsZXQgbm90ZVBvc2l0aW9uID0gbm90ZVByb3AuZXh0cmFzWydwb3NpdGlvbiddIGFzIG51bWJlcjtcclxuICAgICAgICAgICAgbGV0IGl0ZW0gPSBuZXcgQmFzc0l0ZW1VSSh0aGlzLmxvZywgdGhpcy5pbWFnZSwgbm90ZVByb3Aubm90ZSwgdGFiUG9zaXRpb25YW25vdGVQb3NpdGlvbl0sIGNvcmRQb3NpdGlvbllbbm90ZUNvcmQtMV0pO1xyXG4gICAgICAgICAgICBpdGVtLnNldFNvdW5kSHViKHNvdW5kSHViKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG4gICAgZ2V0SW5zdHJ1bWVudCgpIHtcclxuICAgICAgICByZXR1cm4gaW5zdHJ1bWVudDtcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgaW1hZ2VJdGVtID0gbmV3IFRleHR1cmUgKFwiaW1hZ2VzL2Jhc3NJdGVtVUkucG5nXCIsIHtoYXNBbHBoYTogdHJ1ZX0pO1xyXG5cclxuZXhwb3J0IGNsYXNzIEJhc3NJdGVtVUkgaW1wbGVtZW50cyBJTm90ZUNvbnRyb2xsZXIge1xyXG4gICAgbm90ZTogc3RyaW5nO1xyXG4gICAgaW1hZ2U6IFVJSW1hZ2U7XHJcbiAgICBsb2c6IChzdHJpbmcgKT0+IHZvaWQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IobG9nOiAoc3RyaW5nICk9PiB2b2lkLCBwYXJlbnQ6IFVJU2hhcGUsIG5vdGU6IHN0cmluZywgcG9zWCwgcG9zWSkge1xyXG4gICAgICAgIHRoaXMubG9nID0gbG9nO1xyXG4gICAgICAgIHRoaXMuaW1hZ2UgPSBuZXcgVUlJbWFnZShwYXJlbnQsIGltYWdlSXRlbSk7XHJcbiAgICAgICAgdGhpcy5pbWFnZS5wb3NpdGlvblggPSBwb3NYO1xyXG4gICAgICAgIHRoaXMuaW1hZ2UucG9zaXRpb25ZID0gcG9zWTtcclxuICAgICAgICB0aGlzLmltYWdlLnNvdXJjZVdpZHRoID0gNjgwIDsgICBcclxuICAgICAgICB0aGlzLmltYWdlLnNvdXJjZUhlaWdodCA9IDUxODtcclxuICAgICAgICB0aGlzLmltYWdlLndpZHRoID0gMzA7XHJcbiAgICAgICAgdGhpcy5pbWFnZS5oZWlnaHQgPSAxNDtcclxuICAgICAgICB0aGlzLm5vdGUgPSBub3RlO1xyXG4gICAgICAgIHRoaXMuaW1hZ2UuaXNQb2ludGVyQmxvY2tlciA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5pbWFnZS5vbkNsaWNrID0gbmV3IE9uQ2xpY2soZXZlbnQgPT4ge3RoaXMub25DbGlja0NhbGxiYWNrKCk7fSk7XHJcbiAgICB9XHJcblxyXG4gICAgc291bmRIdWI6IElTb3VuZEh1YjtcclxuICAgIC8vICoqKiogSU5vdGVDb250cm9sbGVyIGltcGxlbWVudGF0aW9uICoqKipcclxuICAgIF9vblBsYXllZE5vdGVDYWxsYmFja3M6ICgoaW5zdHJ1bWVudDogc3RyaW5nLCBub3RlOiBzdHJpbmcpPT52b2lkKVtdID0gW107XHJcbiAgICBwdWJsaWMgc2V0U291bmRIdWIoc291bmRIdWI6IElTb3VuZEh1Yikge1xyXG4gICAgICAgIHRoaXMuc291bmRIdWIgPSBzb3VuZEh1YjtcclxuICAgICAgICB0aGlzLnNvdW5kSHViLnJlZ2lzdGVyTm90ZUNvbnRyb2xsZXIodGhpcyk7XHJcbiAgICB9IFxyXG4gICAgcHVibGljIHJlZ2lzdGVyT25QbGF5ZWROb3RlKG9uUGxheU5vdGU6IChpbnN0cnVtZW50OiBzdHJpbmcsIG5vdGU6IHN0cmluZyk9PiB2b2lkKSB7XHJcbiAgICAgICAgLy8gYWxsb3cgcmVnaXN0ZXJpbmcgdG8gYWxsb3cgcmVjb3JkaW5nIGZyb20gVUlcclxuICAgICAgICB0aGlzLl9vblBsYXllZE5vdGVDYWxsYmFja3MucHVzaChvblBsYXlOb3RlKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBnZXRJbnN0cnVtZW50KCkge1xyXG4gICAgICAgIHJldHVybiBpbnN0cnVtZW50O1xyXG4gICAgfVxyXG4gICAgcHVibGljIGdldE5vdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubm90ZTtcclxuICAgIH1cclxuICAgIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuXHJcbiAgICBub3RpZnlQbGF5aW5nKCkge1xyXG4gICAgICAgIC8vIE5vdGlmeSBsaXN0ZW5lcnMgdG8gYWxsb3cgcmVjb3JkaW5nXHJcbiAgICAgICAgdGhpcy5sb2coYEJhc3NJdGVtVUkgOiBwbGF5IG5vdGUgJHt0aGlzLm5vdGV9YCk7XHJcbiAgICAgICAgdGhpcy5fb25QbGF5ZWROb3RlQ2FsbGJhY2tzLmZvckVhY2gob25QbGF5Tm90ZSA9PiB7XHJcbiAgICAgICAgICAgIG9uUGxheU5vdGUuY2FsbCh0aGlzLCB0aGlzLmdldEluc3RydW1lbnQoKSwgdGhpcy5ub3RlKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25DbGlja0NhbGxiYWNrKCkge1xyXG4gICAgICAgIC8vIHJlbGF5IHRvd2FyZHMgdGhlIDNEIGVudGl0eSBjb250YWluaW5nIHRoZSBzb3VuZCBDb21wb25lbnRcclxuICAgICAgICB0aGlzLnNvdW5kSHViLm9uUGxheU5vdGUodGhpcy5nZXRJbnN0cnVtZW50KCksIHRoaXMubm90ZSk7XHJcbiAgICAgICAgdGhpcy5ub3RpZnlQbGF5aW5nKCk7XHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IHsgTGFuZCB9IGZyb20gXCIuL21vZHVsZXMvbGFuZFwiO1xuaW1wb3J0IHsgVGVzdEluc3RydW1lbnQgfSBmcm9tIFwiLi9tb2R1bGVzL2luc3RydW1lbnRzL3Rlc3RJbnN0cnVtZW50XCI7XG5pbXBvcnQgeyBTb3VuZEh1YiB9IGZyb20gXCIuL21vZHVsZXMvc291bmRodWIvc291bmRodWJcIjtcbmltcG9ydCB7IFBpYW5vIH0gZnJvbSBcIi4vbW9kdWxlcy9pbnN0cnVtZW50cy9waWFub1wiO1xuaW1wb3J0IHsgUGxheUl0IH0gZnJvbSBcIi4vbW9kdWxlcy9wbGF5X2l0XCI7XG5pbXBvcnQgeyBCYXNzVUkgfSBmcm9tIFwiLi9tb2R1bGVzL3VpX2luc3RydW1lbnRzL2Jhc3NfdWlcIjtcbmltcG9ydCB7IFBpYW5vVUkgfSBmcm9tIFwiLi9tb2R1bGVzL3VpX2luc3RydW1lbnRzL3BpYW5vX3VpXCI7XG5pbXBvcnQgeyBSZWNvcmRlclVJIH0gZnJvbSBcIi4vbW9kdWxlcy91aV9pbnN0cnVtZW50cy9yZWNvcmRlcl91aVwiO1xuaW1wb3J0IHsgVGVtcG8gfSBmcm9tIFwiLi9tb2R1bGVzL3JlY29yZGVyL3RlbXBvXCI7XG5pbXBvcnQgeyBSZWNvcmRlcjNEIH0gZnJvbSBcIi4vbW9kdWxlcy9yZWNvcmRlci9yZWNvcmRlcjNEXCI7XG5pbXBvcnQgeyBEcnVtU2V0IH0gZnJvbSBcIi4vbW9kdWxlcy9pbnN0cnVtZW50cy9kcnVtc2V0XCI7XG5pbXBvcnQgeyBEcnVtU2V0VUkgfSBmcm9tIFwiLi9tb2R1bGVzL3VpX2luc3RydW1lbnRzL2RydW1zZXRfdWlcIjtcbmltcG9ydCB7IEd1aXRhckVsZWMsIGdldEd1aXRhckVsZWNOb3RlcyB9IGZyb20gXCIuL21vZHVsZXMvaW5zdHJ1bWVudHMvZ3VpdGFyX2VsZWNcIjtcbmltcG9ydCB7IEd1aXRhckVsZWNVSSB9IGZyb20gXCIuL21vZHVsZXMvdWlfaW5zdHJ1bWVudHMvZ3VpdGFyX2VsZWNfdWlcIjtcbmltcG9ydCB7IEJhc3MgfSBmcm9tIFwiLi9tb2R1bGVzL2luc3RydW1lbnRzL2Jhc3NcIjtcbmltcG9ydCB7IFVJV3JhcHBlciB9IGZyb20gXCIuL21vZHVsZXMvdWlfd3JhcHBlclwiO1xuXG5mdW5jdGlvbiB0cmFjZSAobWVzc2FnZSkge1xuICBjb25zb2xlLmxvZyhtZXNzYWdlKTtcbn1cblxuY29uc3Qgc291bmRIdWIgPSBuZXcgU291bmRIdWIodHJhY2UpO1xuXG5jb25zdCBnYW1lQ2FudmFzID0gbmV3IFVJQ2FudmFzKCk7XG5cbmNvbnN0IGNvbXBsZXRlID0gZmFsc2U7XG5sZXQgZmVhdHVyZXMgPSB7XG4gICdsYW5kJzogdHJ1ZSxcbiAgJ2luc3RydW1lbnRfdGVzdCc6IGZhbHNlLFxuICAncGlhbm8nOiB0cnVlLFxuICAnYmFzcyc6IHRydWUsXG4gICdndWl0YXJfZWxlYyc6IHRydWUsXG4gICdkcnVtc2V0JzogdHJ1ZSxcbiAgJ3JlY29yZGVyJzogdHJ1ZVxufVxuaWYgKCFjb21wbGV0ZSkge1xuICBmZWF0dXJlcyA9IHtcbiAgICAnbGFuZCc6IGZhbHNlLFxuICAgICdpbnN0cnVtZW50X3Rlc3QnOiBmYWxzZSxcbiAgICAncGlhbm8nOiBmYWxzZSxcbiAgICAnYmFzcyc6IGZhbHNlLFxuICAgICdndWl0YXJfZWxlYyc6IGZhbHNlLFxuICAgICdkcnVtc2V0JzogZmFsc2UsXG4gICAgJ3JlY29yZGVyJzogZmFsc2VcbiAgfVxufVxuXG5pZiAoZmVhdHVyZXMubGFuZCkge1xuICBjb25zdCBsYW5kID0gbmV3IExhbmQodHJhY2UsIG5ldyBUcmFuc2Zvcm0oe1xuICAgIHBvc2l0aW9uOiBuZXcgVmVjdG9yMyg4LjAsIDAuMCwgMTUuOCksXG4gICAgcm90YXRpb246IFF1YXRlcm5pb24uRXVsZXIoMCwgMCAsMCksXG4gICAgc2NhbGU6IG5ldyBWZWN0b3IzKDAuOTcsIDAuOTcsIDAuOTcpXG4gIH0pKTtcbiAgZW5naW5lLmFkZEVudGl0eShsYW5kLmdldEVudGl0eSgpKTtcbn1cbi8vIGNvbnN0IGluc3RydW1lbnQgPSBuZXcgVGVzdEluc3RydW1lbnQodHJhY2UsIHNvdW5kSHViLCBuZXcgVHJhbnNmb3JtKHtcbi8vICAgcG9zaXRpb246IG5ldyBWZWN0b3IzKDguMCwgMC4wLCA4LjApXG4vLyB9KSk7XG5cbmlmIChmZWF0dXJlcy5waWFubykge1xuICBjb25zdCBwaWFubyA9IG5ldyBQaWFubyh0cmFjZSwgc291bmRIdWIsIG5ldyBUcmFuc2Zvcm0oe1xuICAgIHBvc2l0aW9uOiBuZXcgVmVjdG9yMygyLCAwLjMsIDEzLjApLFxuICAgIHJvdGF0aW9uOiBRdWF0ZXJuaW9uLkV1bGVyKDAsIC0zMCAsMCksXG4gICAgc2NhbGU6IG5ldyBWZWN0b3IzKDAuMTIsIDAuMTUsIDAuMTIpXG4gIH0pKTtcbiAgY29uc3QgcGlhbm9VSSA9IG5ldyBQaWFub1VJKHRyYWNlLCBnYW1lQ2FudmFzKTtcbiAgcGlhbm9VSS5zZXRTb3VuZEh1Yihzb3VuZEh1Yik7XG4gIGNvbnN0IHBsYXlfcGlhbm8gPSBuZXcgUGxheUl0KHRyYWNlLCBuZXcgVHJhbnNmb3JtKHtcbiAgICBwb3NpdGlvbjogbmV3IFZlY3RvcjMoMC4zLDguMCwtMS45KSxcbiAgICByb3RhdGlvbjogUXVhdGVybmlvbi5FdWxlcigwLC05MCwxOSksXG4gICAgc2NhbGU6IG5ldyBWZWN0b3IzKDAuMywxLjAsNC41KVxuICB9KSwgcGlhbm8uZ2V0RW50aXR5KCksIHBpYW5vVUkpO1xuICBlbmdpbmUuYWRkRW50aXR5KHBpYW5vLmdldEVudGl0eSgpKTtcbn1cblxuaWYgKGZlYXR1cmVzLmJhc3MpIHtcbiAgY29uc3QgYmFzcyA9IG5ldyBCYXNzKHRyYWNlLCBzb3VuZEh1YiwgbmV3IFRyYW5zZm9ybSh7XG4gICAgcG9zaXRpb246IG5ldyBWZWN0b3IzKDUuNSwgMS41LCAxMi41KSxcbiAgICByb3RhdGlvbjogUXVhdGVybmlvbi5FdWxlcigyMCwgODAgLDcwKSxcbiAgICBzY2FsZTogbmV3IFZlY3RvcjMoMC4xLDAuMSwwLjEpXG4gIH0pKTtcbiAgY29uc3QgYmFzc1VJID0gbmV3IEJhc3NVSSh0cmFjZSwgZ2FtZUNhbnZhcyk7XG4gIGJhc3NVSS5zZXRTb3VuZEh1Yihzb3VuZEh1Yik7XG4gIGNvbnN0IHBsYXlfYmFzcyA9IG5ldyBQbGF5SXQodHJhY2UsIG5ldyBUcmFuc2Zvcm0oe1xuICAgIHBvc2l0aW9uOiBuZXcgVmVjdG9yMyg0LjAsMC4wLDAuMCksXG4gICAgcm90YXRpb246IFF1YXRlcm5pb24uRXVsZXIoMCwxODAsOTApLFxuICAgIHNjYWxlOiBuZXcgVmVjdG9yMygxLjAsMS4wLDUuMClcbiAgfSksIGJhc3MuZ2V0RW50aXR5KCksIGJhc3NVSSk7XG4gIGVuZ2luZS5hZGRFbnRpdHkoYmFzcy5nZXRFbnRpdHkoKSk7XG59XG5cbmlmIChmZWF0dXJlcy5yZWNvcmRlcikge1xuICBjb25zdCB0ZW1wbyA9IG5ldyBUZW1wbyh0cmFjZSwgMTAwLCA0LCA0KTtcbiAgY29uc3QgcmVjb3JkZXIzZCA9IG5ldyBSZWNvcmRlcjNEKHRyYWNlLCBuZXcgVHJhbnNmb3JtKHtcbiAgICBwb3NpdGlvbjogbmV3IFZlY3RvcjMoMTMuNSwgMS4wLCAxMy4wKSxcbiAgICByb3RhdGlvbjogUXVhdGVybmlvbi5FdWxlcigwLCA2NSAsMCksXG4gICAgc2NhbGU6IG5ldyBWZWN0b3IzKDAuMiwwLjIsMC4yKVxuICB9KSk7XG4gIGNvbnN0IHJlY29yZGVyVUkgPSBuZXcgUmVjb3JkZXJVSSh0cmFjZSwgZ2FtZUNhbnZhcywgc291bmRIdWIsIHRlbXBvKTtcbiAgY29uc3QgcGxheV9yZWNvcmRlciA9IG5ldyBQbGF5SXQodHJhY2UsIG5ldyBUcmFuc2Zvcm0oe1xuICAgIHBvc2l0aW9uOiBuZXcgVmVjdG9yMygwLjgsMS4yLDAuMCksXG4gICAgcm90YXRpb246IFF1YXRlcm5pb24uRXVsZXIoMCwxODAsMCksXG4gICAgc2NhbGU6IG5ldyBWZWN0b3IzKDAuNCwwLjQsMi4wKVxuICB9KSwgcmVjb3JkZXIzZC5nZXRFbnRpdHkoKSwgcmVjb3JkZXJVSSk7XG4gIGVuZ2luZS5hZGRFbnRpdHkocmVjb3JkZXIzZC5nZXRFbnRpdHkoKSk7XG59XG5cbmlmIChmZWF0dXJlcy5kcnVtc2V0KSB7XG4gIGNvbnN0IGRydW1TZXQgPSBuZXcgRHJ1bVNldCh0cmFjZSwgc291bmRIdWIsIG5ldyBUcmFuc2Zvcm0oe1xuICAgIHBvc2l0aW9uOiBuZXcgVmVjdG9yMyg5LjAsIDAuMywgMTMuMCksXG4gICAgcm90YXRpb246IFF1YXRlcm5pb24uRXVsZXIoMCwxODAsMCksXG4gICAgc2NhbGU6IG5ldyBWZWN0b3IzKDAuMiwgMC4yLCAwLjIpXG4gIH0pKTtcbiAgY29uc3QgZHJ1bVNldFVJID0gbmV3IERydW1TZXRVSSh0cmFjZSwgZ2FtZUNhbnZhcyk7XG4gIGRydW1TZXRVSS5zZXRTb3VuZEh1Yihzb3VuZEh1Yik7XG4gIGNvbnN0IHBsYXlfZHJ1bXMgPSBuZXcgUGxheUl0KHRyYWNlLCBuZXcgVHJhbnNmb3JtKHtcbiAgICBwb3NpdGlvbjogbmV3IFZlY3RvcjMoMC4wLDkuMCwtMS4wKSxcbiAgICByb3RhdGlvbjogUXVhdGVybmlvbi5FdWxlcigwLDkwLDApLFxuICAgIHNjYWxlOiBuZXcgVmVjdG9yMygxLjAsMS4wLDUuMClcbiAgfSksIGRydW1TZXQuZ2V0RW50aXR5KCksIGRydW1TZXRVSSk7XG4gIGVuZ2luZS5hZGRFbnRpdHkoZHJ1bVNldC5nZXRFbnRpdHkoKSk7XG59XG5cbmlmIChmZWF0dXJlcy5ndWl0YXJfZWxlYykge1xuICBjb25zdCBndWl0YXJFbGVjID0gbmV3IEd1aXRhckVsZWModHJhY2UsIHNvdW5kSHViLCBuZXcgVHJhbnNmb3JtKHtcbiAgICBwb3NpdGlvbjogbmV3IFZlY3RvcjMoMTEuNSwgMS42LCAxMi4wKSxcbiAgICByb3RhdGlvbjogUXVhdGVybmlvbi5FdWxlcigyMCwgNjAgLDcwKSxcbiAgICBzY2FsZTogbmV3IFZlY3RvcjMoMC4xLDAuMSwwLjEpXG4gIH0pKTtcbiAgY29uc3QgZ3VpdGFyRWxlY1VJID0gbmV3IEd1aXRhckVsZWNVSSh0cmFjZSwgZ2FtZUNhbnZhcyk7XG4gIGd1aXRhckVsZWNVSS5zZXRTb3VuZEh1Yihzb3VuZEh1Yik7XG4gIGNvbnN0IHBsYXlfZ3VpdGFyX2VsZWMgPSBuZXcgUGxheUl0KHRyYWNlLCBuZXcgVHJhbnNmb3JtKHtcbiAgICBwb3NpdGlvbjogbmV3IFZlY3RvcjMoNC4wLDAuMCwyLjApLFxuICAgIHJvdGF0aW9uOiBRdWF0ZXJuaW9uLkV1bGVyKDAsMTkwLDkwKSxcbiAgICBzY2FsZTogbmV3IFZlY3RvcjMoMS4wLDEuMCw1LjApXG4gIH0pLCBndWl0YXJFbGVjLmdldEVudGl0eSgpLCBndWl0YXJFbGVjVUkpO1xuICBlbmdpbmUuYWRkRW50aXR5KGd1aXRhckVsZWMuZ2V0RW50aXR5KCkpO1xufVxuXG5cblxuXG5jbGFzcyB0ZXN0VUlJbXB1dCBleHRlbmRzIFVJV3JhcHBlciB7XG4gIGNvbnN0cnVjdG9yKGxvZzogKHN0cmluZyApPT4gdm9pZCwgcGFyZW50OiBVSVNoYXBlKSB7XG4gICAgc3VwZXIobG9nLCBwYXJlbnQpO1xuICAgIGxldCBpbnB1dCA9IG5ldyBVSUlucHV0VGV4dCh0aGlzLmNvbnRhaW5lcik7XG4gICAgdGhpcy5hZGRDbG9zZUJ1dHRvbigpO1xuICB9XG5cbn1cbiIsImV4cG9ydCBjbGFzcyBUZW1wb0luZGljYXRvclVJICB7XHJcbiAgICBjb250YWluZXI6IFVJQ29udGFpbmVyUmVjdDtcclxuICAgIGNvbnN0cnVjdG9yKHBhcmVudDogVUlTaGFwZSkge1xyXG4gICAgICAgIC8vIHN1cGVyKHBhcmVudCk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBuZXcgVUlDb250YWluZXJSZWN0KHBhcmVudCk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuaGVpZ2h0ID0gXCI1MCVcIjtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci53aWR0aCA9IFwiNTAlXCI7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuaEFsaWduID0gJ2NlbnRlcic7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIudkFsaWduID0gJ2NlbnRlcic7XHJcblxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5pc1BvaW50ZXJCbG9ja2VyID0gZmFsc2U7XHJcblxyXG4gICAgICAgIC8vIGxldCBpbWFnZVRleHR1cmUgPSBuZXcgVGV4dHVyZSgnaW1hZ2VzL2ltYWdlMDAyLmpwZycpO1xyXG4gICAgICAgIC8vIGNvbnN0IGltYWdlID0gbmV3IFVJSW1hZ2UodGhpcy5jb250YWluZXIsIGltYWdlVGV4dHVyZSk7XHJcbiAgICAgICAgLy8gaW1hZ2UuaEFsaWduID0gJ2NlbnRlcidcclxuICAgICAgICAvLyBpbWFnZS52QWxpZ24gPSAnY2VudGVyJ1xyXG4gICAgICAgIC8vIGltYWdlLnNvdXJjZUxlZnQgPSAwXHJcbiAgICAgICAgLy8gaW1hZ2Uuc291cmNlVG9wID0gMFxyXG4gICAgICAgIC8vIGltYWdlLnNvdXJjZVdpZHRoID0gMTAwMFxyXG4gICAgICAgIC8vIGltYWdlLnNvdXJjZUhlaWdodCA9IDEwMDBcclxuICAgICAgICAvLyBpbWFnZS53aWR0aCA9IGAyMDBweGBcclxuICAgICAgICAvLyBpbWFnZS5oZWlnaHQgPSBgMjAwcHhgXHJcbiAgICAgICAgLy8gaW1hZ2UucG9zaXRpb25YID0gMjBcclxuICAgICAgICAvLyBpbWFnZS5wb3NpdGlvblkgPSAtMzBcclxuXHJcbiAgICAgICAgY29uc3QgY2xvc2VJY29uID0gbmV3IFVJSW1hZ2UodGhpcy5jb250YWluZXIsIG5ldyBUZXh0dXJlKCdpbWFnZXMvY2xvc2UtaWNvbjMucG5nJykpO1xyXG4gICAgICAgIGNsb3NlSWNvbi5uYW1lID0gJ2NsaWNrYWJsZS1pbWFnZSc7XHJcbiAgICAgICAgY2xvc2VJY29uLndpZHRoID0gJzUwcHgnO1xyXG4gICAgICAgIGNsb3NlSWNvbi5oZWlnaHQgPSAnNTBweCc7XHJcbiAgICAgICAgY2xvc2VJY29uLmhBbGlnbiA9ICdyaWdodCc7XHJcbiAgICAgICAgY2xvc2VJY29uLnZBbGlnbiA9ICd0b3AnO1xyXG4gICAgICAgIGNsb3NlSWNvbi5zb3VyY2VXaWR0aCA9IDEyODtcclxuICAgICAgICBjbG9zZUljb24uc291cmNlSGVpZ2h0ID0gMTI4O1xyXG4gICAgICAgIGNsb3NlSWNvbi5pc1BvaW50ZXJCbG9ja2VyID0gdHJ1ZTtcclxuICAgICAgICBjbG9zZUljb24ub25DbGljayA9IG5ldyBPbkNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5pc1BvaW50ZXJCbG9ja2VyID0gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRpc3BsYXkoKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuaXNQb2ludGVyQmxvY2tlciA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgbWFzaygpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuaXNQb2ludGVyQmxvY2tlciA9IGZhbHNlO1xyXG4gICAgfVxyXG59Il19');